{"version":3,"sources":["assets/src/game/Barrage/BarrageLayer.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,iEAA4D;AAC5D,yDAAoD;AACpD,iDAA4C;AAEtC,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA0C,gCAAY;IAAtD;QAAA,qEA4CC;QA1CG,iBAAW,GAAe,IAAI,CAAC;QAE/B,mBAAa,GAAY,CAAC,CAAC;QAC3B,gBAAU,GAAY,CAAC,CAAC;;IAuC5B,CAAC;IAtCG,4BAAK,GAAL;QACI,MAAM;QACN,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,IAAI,CAAC,EAAC,CAAC,CAAC,CAAC;IACrD,CAAC;IACD,kCAAW,GAAX;QAAA,iBAiCC;QAhCG,IAAI,WAAW,GAAG,oBAAU,CAAC,WAAW,CAAC,GAAG,EAAE,CAAC;QAC/C,IAAG,CAAC,WAAW,EAAC;YACZ,WAAW,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;SAClD;QACD,WAAW,CAAC,YAAY,CAAC,uBAAa,CAAC,CAAC,OAAO,EAAE,CAAC;QAClD,EAAE,CAAC,QAAQ,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,WAAW,CAAC,CAAC;QAE7C,IAAI,EAAE,GAAG,IAAI,CAAC,aAAa,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC,CAAC,CAAC,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC;QACrF,IAAI,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,IAAI,EAAC,EAAE,CAAC,CAAC;QACvB,WAAW,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAC3B,WAAW,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,CAAC,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,CAAC,GAAG,EAAE,WAAW,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;YAC9G,oBAAU,CAAC,WAAW,CAAC,GAAG,CAAC,WAAW,CAAC,CAAC;YACxC,IAAI,KAAI,CAAC,UAAU,IAAI,CAAC,EAAE;gBACtB,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,OAAO;aACV;YACD,IAAI,KAAI,CAAC,aAAa,IAAI,CAAC,EAAE;gBACzB,IAAI,SAAS,GAAG,iBAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;gBACvC,KAAI,CAAC,YAAY,CAAC;oBACd,KAAI,CAAC,aAAa,GAAG,CAAC,CAAC;oBACvB,KAAI,CAAC,UAAU,GAAG,CAAC,CAAC;oBACpB,KAAI,CAAC,WAAW,EAAE,CAAC;gBACvB,CAAC,EAAE,SAAS,CAAC,CAAA;aAChB;QACL,CAAC,CAAC,CAAC,CAAC,CAAA;QACJ,IAAI,IAAI,CAAC,aAAa,IAAI,CAAC,EAAE;YACzB,IAAI,IAAI,GAAG,iBAAO,CAAC,QAAQ,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;YACnC,IAAI,CAAC,YAAY,CAAC;gBACd,KAAI,CAAC,WAAW,EAAE,CAAC;YACvB,CAAC,EAAE,IAAI,CAAC,CAAA;SACX;QACD,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAzCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;qDACW;IAFd,YAAY;QADhC,OAAO;OACa,YAAY,CA4ChC;IAAD,mBAAC;CA5CD,AA4CC,CA5CyC,EAAE,CAAC,SAAS,GA4CrD;kBA5CoB,YAAY","file":"","sourceRoot":"/","sourcesContent":["import UIMananger from \"../../framework/manager/UIMananger\";\nimport MKUtils from \"../../framework/tools/MkUtils\";\nimport BarragePrefab from \"./BarragePrefab\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BarrageLayer extends cc.Component {\n    @property(cc.Prefab)\n    barrageNode : cc.Prefab = null;\n\n    _barrageIndex : number = 0;\n    _actionNum : number = 0;\n    start(){\n        //一秒之后\n        this.scheduleOnce(this.initBarrage.bind(this),1);\n    }\n    initBarrage(){\n        let barrageNode = UIMananger.barragePool.get();\n        if(!barrageNode){\n            barrageNode = cc.instantiate(this.barrageNode);\n        }\n        barrageNode.getComponent(BarragePrefab).setData();\n        cc.director.getScene().addChild(barrageNode);\n\n        let y1 = this._barrageIndex == 0 ? cc.winSize.height - 500 : cc.winSize.height - 700;\n        let p = cc.v2(1330,y1);\n        barrageNode.setPosition(p);\n        barrageNode.runAction(cc.sequence(cc.moveTo(10, 0, barrageNode.y), cc.moveTo(5, -690, barrageNode.y), cc.callFunc(() => {\n            UIMananger.barragePool.put(barrageNode);\n            if (this._actionNum == 0) {\n                this._actionNum++;\n                return;\n            }\n            if (this._barrageIndex == 2) {\n                let delayTime = MKUtils.randomNM(3, 8);\n                this.scheduleOnce(() => {\n                    this._barrageIndex = 0;\n                    this._actionNum = 0;\n                    this.initBarrage();\n                }, delayTime)\n            }\n        })))\n        if (this._barrageIndex == 0) {\n            let time = MKUtils.randomNM(2, 20);\n            this.scheduleOnce(() => {\n                this.initBarrage();\n            }, time)\n        }\n        this._barrageIndex++;\n    }\n}\n"]}
{"version":3,"sources":["assets/src/game/view/popView/PopGetCropView.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAGlF,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AACvD,6DAAwD;AAExD,uDAAkD;AAClD,6DAAwD;AACxD,6DAAwD;AAElD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAE5C,aAAa;AAEb;IAA4C,kCAAS;IAArD;QAAA,qEAwDC;QAtDG,cAAQ,GAAa,IAAI,CAAC;QAG1B,YAAM,GAAa,IAAI,CAAC;QAExB,cAAQ,GAAY,IAAI,CAAC;QAEzB,WAAK,GAAY,IAAI,CAAC;QAEtB,UAAI,GAAc,IAAI,CAAC;;QA4CvB,iBAAiB;IACrB,CAAC;IAzCG,+BAAM,GAAN;IAEA,CAAC;IAES,iCAAQ,GAAlB;QACI,OAAO;QACP,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QACzD,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEtD,IAAI,CAAC,MAAM,EAAE,CAAC;IAClB,CAAC;IAED,kCAAS,GAAT;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IAChC,CAAC;IACD,+BAAM,GAAN;QAAA,iBAOC;QANG,IAAI,GAAG,GAAG,uBAAa,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACnD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,GAAG,GAAG,GAAG,CAAC,IAAI,CAAC;QAC9D,iBAAO,CAAC,eAAe,CAAC,oBAAoB,IAAG,KAAG,IAAI,CAAC,KAAK,CAAC,EAAI,CAAA,EAAE,UAAC,GAAG;YACnE,KAAI,CAAC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QAChC,CAAC,CAAC,CAAC;QACH,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC;IAChD,CAAC;IACD,sCAAa,GAAb;QACI,IAAI,SAAS,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,OAAO,CAAC,KAAK,GAAG,CAAC,EAAE,EAAE,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAA;QAClE,uBAAa,CAAC,QAAQ,CAAC,SAAS,EAAE,IAAI,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QACjD,qBAAW,CAAC,aAAa,CAAC,IAAI,CAAC,KAAK,CAAC,EAAE,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,EAAE;YACrD,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,mBAAmB,CAAC,CAAC;YACjD,iDAAiD;YACjD,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,qBAAqB,CAAC,CAAA;QACtD,CAAC,EAAE;YACC,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,oBAAoB,CAAC,CAAC;QACtD,CAAC,CAAC,CAAA;QACF,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,sCAAa,GAAb;QACI,iBAAM,KAAK,WAAE,CAAC;IAClB,CAAC;IAnDD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;oDACO;IAG1B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;kDACK;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;iDACI;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACG;IAXN,cAAc;QADlC,OAAO;OACa,cAAc,CAwDlC;IAAD,qBAAC;CAxDD,AAwDC,CAxD2C,mBAAS,GAwDpD;kBAxDoB,cAAc","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport BasePanel from \"../../../framework/ui/BasePanel\";\r\nimport Global from \"../../consts/Global\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport EffectManager from \"../../manager/EffectManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n//获取作物，获得提示窗口\r\n@ccclass\r\nexport default class PopGetCropView extends BasePanel {\r\n    @property(cc.Label)\r\n    rewardLb: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    descLb: cc.Label = null;\r\n    @property(cc.Node)\r\n    btnClose: cc.Node = null;\r\n    @property(cc.Node)\r\n    btnOk: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    icon: cc.Sprite = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    mData;\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        // 关闭面板\r\n        EventDispath.on(this.btnClose, this.onCloseHandle, this);\r\n        EventDispath.on(this.btnOk, this.onClickHandle, this);\r\n\r\n        this.initUi();\r\n    }\r\n\r\n    startShow(): void {\r\n        this.mData = this.inData[0];\r\n    }\r\n    initUi() {\r\n        let cfg = ConfigManager.getCropById(this.mData.id);\r\n        this.descLb.string = \"恭喜获得\" + this.mData.num + \"个\" + cfg.name;\r\n        MKUtils.loadSpriteFrame(\"texture/crop/icon/\" + `${this.mData.id}`, (res) => {\r\n            this.icon.spriteFrame = res;\r\n        });\r\n        this.rewardLb.string = \"x\" + this.mData.num;\r\n    }\r\n    onClickHandle() {\r\n        let startNode = cc.v2(cc.winSize.width / 2, cc.winSize.height / 2)\r\n        EffectManager.playCrop(startNode, this.mData.id);\r\n        PlayerModel.checkAddOrder(this.mData.id, this.mData.num, () => {\r\n            EventDispath.send(EventType.ORDER_CURRENT_CLOSE);\r\n            // UIMananger.showPanel(UIType.orderSuccessView);\r\n            EventDispath.send(EventType.ORDER_COMPLETE_UPDATE)\r\n        }, () => {\r\n            EventDispath.send(EventType.ORDER_CURRENT_UPDATE);\r\n        })\r\n        this.onCloseHandle();\r\n    }\r\n\r\n    onCloseHandle() {\r\n        super.close();\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}
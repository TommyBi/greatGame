{"version":3,"sources":["assets/src/game/view/main/CashierPrefab.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport JSHelper from \"../../../framework/helper/JSHelper\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport SortUtils from \"../../../framework/tools/SortUtils\";\r\nimport ActionType from \"../../consts/ActionType\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport CashierManager from \"./CashierManager\";\r\nimport RolePrefab from \"./RolePrefab\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class CashierPrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    img: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    moeyBg: cc.Node = null;\r\n    @property(cc.Label)\r\n    descLb: cc.Label = null;\r\n    @property(cc.ProgressBar)\r\n    pro: cc.ProgressBar = null;\r\n    @property(sp.Skeleton)\r\n    lvUpEff: sp.Skeleton = null;\r\n\r\n\r\n    // onLoad () {}\r\n    roleList: RolePrefab[] = [];\r\n\r\n    roleLength = 0;\r\n\r\n    auto_interval = 0;\r\n    auto_one_time = 2;//自动卖出间隔\r\n    isAuto = true;\r\n    mId = -1;\r\n\r\n    startPoint = cc.v2(-340, -230)\r\n    endPoint = cc.v2(66, -90)\r\n\r\n    firstPoint = cc.v2(-370, -280)\r\n    rolePoints = [];\r\n    dayMax = 0;\r\n\r\n    pro_one = 0.1;//每半秒增加进度\r\n    pro_one_time = 0.5;\r\n    pro_interval = 0;\r\n    isAutoAddGold = false;\r\n\r\n    addTotalTime = 0;\r\n    addMultiple = ConfigManager.cashier_add_multiple;\r\n\r\n    outPut = 0;//每秒产出\r\n\r\n    flyPoint = cc.v2();\r\n    start() {\r\n        this.lvUpEff.node.active = false;\r\n        CashierManager.init(this);\r\n\r\n        this.flyPoint = this.node.convertToWorldSpaceAR(this.pro.node.getPosition());\r\n\r\n        let lastTime = ConfigManager.cashier_add_times * 60 - Math.floor((new Date().getTime()) / 1000 - PlayerModel.getAddLastTime());\r\n        if (lastTime > 0) {\r\n            this.addTotalTime = lastTime;\r\n            this.isAutoAddGold = true;\r\n            this.outPut = ConfigManager.cashier_one * ConfigManager.cashier_add_multiple;\r\n        } else {\r\n\r\n            this.outPut = ConfigManager.cashier_one;\r\n        }\r\n\r\n\r\n    }\r\n    protected onEnable(): void {\r\n        EventDispath.addEventListener(EventType.ADD_CAHIER_ROLE, this.addRole, this);\r\n        EventDispath.addEventListener(EventType.UPDATE_CAHIER_ROLE, this.updateRole, this);\r\n        EventDispath.addEventListener(EventType.CHANGE_CASHIER, this.changeSkin, this);\r\n\r\n        EventDispath.addEventListener(EventType.CASHIER_ADD_MULTIPLE, this.onMultiple, this);\r\n        EventDispath.addEventListener(EventType.GUIDE_COMPLETE, this.changeState, this);\r\n\r\n        EventDispath.on(this.node, this.showAuto, this);\r\n        this.changeState();\r\n    }\r\n    protected update(dt: number): void {\r\n        CashierManager.update(dt);\r\n\r\n        if (this.isAuto) {\r\n            this.auto_interval += dt;\r\n            if (this.auto_interval >= this.auto_one_time && this.roleList.length > 0) {\r\n                this.auto_interval = 0;\r\n                this.roleList[0].onSell();\r\n                // PlayerModel.setIsAutoOfflineTime(new Date().getTime() / 1000)\r\n            }\r\n        }\r\n\r\n        if (this.isAutoAddGold) {\r\n            this.addTotalTime -= dt;\r\n            if (this.addTotalTime <= 0) {\r\n                this.isAutoAddGold = false;\r\n            }\r\n        } else {\r\n            this.outPut = ConfigManager.cashier_one;\r\n        }\r\n\r\n        if (PlayerModel.cashierGold < this.dayMax && PlayerModel.guideState) {\r\n            this.descLb.string = \"营业中\";\r\n            if (this.isAutoAddGold) this.descLb.string = \"加速中\";\r\n            this.pro_interval += dt;\r\n            if (this.pro_interval >= this.pro_one_time) {\r\n                this.pro.progress += this.pro_one;\r\n                this.pro_interval = 0;\r\n                if (this.pro.progress >= 1) {\r\n                    this.pro.progress = 0;\r\n                    PlayerModel.setGold(this.outPut, 1, this.flyPoint);\r\n                    PlayerModel.cashierGold = this.outPut;\r\n                }\r\n            }\r\n\r\n        } else {\r\n            if (!PlayerModel.guideState) this.descLb.string = \"营业中\";\r\n            else this.descLb.string = \"今日上限\"\r\n        }\r\n\r\n    }\r\n    changeState() {\r\n        if (!PlayerModel.guideState) {\r\n            this.moeyBg.active = false;\r\n            this.pro.node.active = false;\r\n            this.descLb.node.active = false;\r\n        } else {\r\n            this.moeyBg.active = true;\r\n            this.pro.node.active = true;\r\n            this.descLb.node.active = true;\r\n\r\n        }\r\n    }\r\n    onMultiple() {\r\n        this.isAutoAddGold = true;\r\n        this.addTotalTime = ConfigManager.cashier_add_times * 60;\r\n        this.outPut = ConfigManager.cashier_one * ConfigManager.cashier_add_multiple;\r\n        PlayerModel.setAddLastTime(Math.floor(new Date().getTime() / 1000));\r\n    }\r\n\r\n    showAuto() {\r\n        // if (isFirst) {\r\n        //     let cfg: prop_config = ConfigManager.getPropById(propType.cashier, this.mId);\r\n        //     this.auto_time2 = this.auto_time = cfg.other_reward;\r\n        // }\r\n        // PlayerModel.setIsAutoSell({ isAuto: true, lastTime: this.auto_time2, time: new Date().getTime() / 1000 });\r\n        // let action = cc.sequence(cc.moveTo(3, this.endPoint), cc.callFunc(() => {\r\n        //     if (this.roleList.length > 0) this.roleList[0].onSell();\r\n\r\n        // this.isAuto = true;\r\n        // }));\r\n        UIMananger.showPanel(UIType.cashierView);\r\n    }\r\n    onAutoSell() {\r\n        // this.cashier.animation = ActionType.CASHIER_SHOUYIN;\r\n        // this.cashier.setCompleteListener((trackEntry, loopCount) => {\r\n        //     this.cashier.setCompleteListener(null);\r\n        //     this.cashier.animation = ActionType.CASHIER_STAND;\r\n        // })\r\n    }\r\n    addRole(role: RolePrefab) {\r\n        if (this.roleList.length == 0) {\r\n            role.showSell();\r\n        }\r\n        this.roleList.push(role);\r\n        role.jiezhangIndx = this.roleList.length - 1;\r\n    }\r\n    updateRole() {\r\n        this.roleList.splice(0, 1);\r\n        this.roleLength--;\r\n        let len = this.roleList.length;\r\n        let prePoint = this.firstPoint;\r\n        for (let i = 0; i < len; i++) {\r\n\r\n            this.roleList[i].changeAction(ActionType.Q_WALK_FINISH)\r\n            let p;\r\n            if (i < 6) {\r\n                p = CashierManager.pointLit[i]\r\n            } else {\r\n\r\n                p = CashierManager.pointLit[5]\r\n            }\r\n            // let p = this.roleList[i].node.getPosition();\r\n            this.move(this.roleList[i], p)\r\n            // prePoint = p;\r\n        }\r\n        CashierManager.updateRole();\r\n        // for (let i = len; i >= 0; i--) {\r\n\r\n        //     this.roleList[i].changeAction(ActionType.Q_WALK_FINISH)\r\n        //     if (i == 0) this.move(this.roleList[i], this.firstPoint)\r\n        //     else {\r\n        //         let p = this.roleList[i - 1].node.getPosition();\r\n        //         this.move(this.roleList[i], p)\r\n        //     }\r\n        // }\r\n        if (this.roleList.length > 0) {\r\n            this.roleList[0].showSell();\r\n        }\r\n\r\n        let arr = [];\r\n        for (let i = 0; i < this.roleList.length; i++) {\r\n            arr.push(this.roleList[i].jiezhangIndx)\r\n        }\r\n        console.log(\"=================\", arr)\r\n    }\r\n    move(role, p) {\r\n        role.node.runAction(cc.sequence(cc.moveTo(0.5, p), cc.callFunc(() => {\r\n            role.changeAction(ActionType.Q_STAND_FINISH_RIGHT)\r\n        })));\r\n    }\r\n\r\n    get roleLen() {\r\n        return this.roleLength - 1;\r\n    }\r\n    set roleLen(value) {\r\n        this.roleLength++;\r\n    }\r\n\r\n    setData(id = 1) {\r\n        if (id == 0) return;\r\n        this.changeSkin(0);\r\n\r\n    }\r\n\r\n    changeSkin(isLvUp = 1) {\r\n        this.mId = PlayerModel.getUIConfig().cashierlv;\r\n        if (this.mId > 0) {\r\n            // let cfg: prop_config = ConfigManager.getPropById(propType.cashier, this.mId);\r\n            // this.auto_time2 = this.auto_time = cfg.other_reward;\r\n\r\n            MKUtils.loadSpriteFrame(\"texture/prop/cashier/\" + `0${this.mId}`, (res) => {\r\n                this.img.spriteFrame = res;\r\n                if (isLvUp) {\r\n                    this.lvUpEff.node.active = true;\r\n                    this.lvUpEff.animation = \"animation\";\r\n                }\r\n                this.dayMax = ConfigManager.getCashierMax();\r\n\r\n\r\n            });\r\n        } else {\r\n        }\r\n    }\r\n}\r\n"]}
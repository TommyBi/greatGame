{"version":3,"sources":["assets/src/game/view/main/FencePrefab.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AACvD,uDAAkD;AAE5C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAyC,+BAAY;IAArD;QAAA,qEA2CC;QAxCG,UAAI,GAAc,IAAI,CAAC;QAEvB,UAAI,GAAc,IAAI,CAAC;QAEvB,aAAO,GAAY,IAAI,CAAC;;IAoC5B,CAAC;IAlCG,4BAAM,GAAN;QACI,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;QAC5B,sBAAY,CAAC,gBAAgB,CAAC,qBAAS,CAAC,YAAY,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACjF,CAAC;IAED,2BAAK,GAAL;IAEA,CAAC;IAED,6BAAO,GAAP,UAAQ,EAAM;QAAN,mBAAA,EAAA,MAAM;QACV,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAC;IACvB,CAAC;IACD,gCAAU,GAAV,UAAW,MAAU;QAArB,iBAqBC;QArBU,uBAAA,EAAA,UAAU;QACjB,IAAI,EAAE,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,OAAO,CAAC;QAC3C,IAAI,EAAE,IAAI,CAAC;YAAE,OAAO;QACpB,iBAAO,CAAC,eAAe,CAAC,qBAAqB,IAAG,MAAI,EAAE,QAAK,CAAA,EAAE,UAAC,GAAG;YAC7D,KAAI,CAAC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;YAC5B,IAAI,MAAM,EAAE;gBACR,IAAI,GAAG,GAAG,KAAI,CAAC,OAAO,CAAC,QAAQ,CAAA;gBAC/B,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC3B,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;oBACjC,IAAI,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,CAAC,YAAY,CAAC,EAAE,CAAC,QAAQ,CAAC,CAAC;oBAC3C,GAAG,CAAC,SAAS,GAAG,WAAW,CAAA;iBAC9B;gBAED,iBAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,EAAE,CAAC,EAAE;oBAC/B,KAAI,CAAC,OAAO,CAAC,MAAM,GAAG,KAAK,CAAC;gBAChC,CAAC,CAAC,CAAA;aACL;QACL,CAAC,CAAC,CAAC;QACH,iBAAO,CAAC,eAAe,CAAC,qBAAqB,IAAG,MAAI,EAAE,QAAK,CAAA,EAAE,UAAC,GAAG;YAC7D,KAAI,CAAC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QAChC,CAAC,CAAC,CAAC;IACP,CAAC;IAvCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;6CACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACM;IAPP,WAAW;QAD/B,OAAO;OACa,WAAW,CA2C/B;IAAD,kBAAC;CA3CD,AA2CC,CA3CwC,EAAE,CAAC,SAAS,GA2CpD;kBA3CoB,WAAW","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class FencePrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    img1: cc.Sprite = null;\r\n    @property(cc.Sprite)\r\n    img2: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    effNode: cc.Node = null;\r\n\r\n    onLoad() {\r\n        this.effNode.active = false;\r\n        EventDispath.addEventListener(EventType.CHANGE_FENCE, this.changeSkin, this);\r\n    }\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    setData(id = 1) {\r\n        this.changeSkin(0);\r\n    }\r\n    changeSkin(isLvUp = 1) {\r\n        let id = PlayerModel.getUIConfig().fencelv;\r\n        if (id == 0) return;\r\n        MKUtils.loadSpriteFrame(\"texture/prop/fence/\" + `0${id}_01`, (res) => {\r\n            this.img1.spriteFrame = res;\r\n            if (isLvUp) {\r\n                let arr = this.effNode.children\r\n                this.effNode.active = true;\r\n                for (let i = 0; i < arr.length; i++) {\r\n                    let eff = arr[i].getComponent(sp.Skeleton);\r\n                    eff.animation = \"animation\"\r\n                }\r\n\r\n                MKUtils.setNodeDelay(this.node, 5, () => {\r\n                    this.effNode.active = false;\r\n                })\r\n            }\r\n        });\r\n        MKUtils.loadSpriteFrame(\"texture/prop/fence/\" + `0${id}_02`, (res) => {\r\n            this.img2.spriteFrame = res;\r\n        });\r\n    }\r\n}\r\n"]}
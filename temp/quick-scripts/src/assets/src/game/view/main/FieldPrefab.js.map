{"version":3,"sources":["assets/src/game/view/main/FieldPrefab.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport JSHelper from \"../../../framework/helper/JSHelper\";\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport { UIEffectType } from \"../../../framework/manager/UIEffectManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport ComponentHelper from \"../../../framework/tools/ComponentHelper\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport Utils from \"../../../framework/tools/Utils\";\r\nimport { propType } from \"../../consts/CConst\";\r\nimport Global from \"../../consts/Global\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport EffectManager from \"../../manager/EffectManager\";\r\nimport { PopType } from \"../popView/PopView1\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport interface FieldConfig {\r\n    id: number,//地块皮肤ID\r\n    type: number, //地块类型\r\n    state: number,//地块状态，0未解锁，1解锁\r\n    cropState: number,//植物状态，0闲置，1种子，2幼苗，3成熟,4可卖出\r\n    cropId: number,//种植作物ID\r\n    lastTime: number,//剩余成熟时间\r\n    level: number, // 地块等级\r\n}\r\n\r\nexport enum CropState {\r\n    EMPTY,//0闲置\r\n    SEEDING,//种植中\r\n    PEST,//害虫\r\n    RIPE,//可收获\r\n}\r\n\r\n@ccclass\r\nexport default class FieldPrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    bg: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    buildTips: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    crop: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    qipao: cc.Node = null;\r\n    @property(cc.Node)\r\n    qpJs: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    qipaoIcon: cc.Sprite = null;\r\n    @property(cc.Label)\r\n    qipaoDesc: cc.Label = null;\r\n    @property(cc.Label)\r\n    qpJsLb: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    tipsLb: cc.Label = null;\r\n    @property(cc.Node)\r\n    getTips: cc.Node = null;\r\n    @property(cc.Label)\r\n    getTipsLb: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    getIcon: cc.Sprite = null;\r\n\r\n    @property(cc.ProgressBar)\r\n    timePro: cc.ProgressBar = null;\r\n    @property(cc.Node)\r\n    proBg: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    pro: cc.Sprite = null;\r\n    @property(cc.Label)\r\n    timeLb: cc.Label = null;\r\n    @property(sp.Skeleton)\r\n    lvUpEff: sp.Skeleton = null;\r\n    @property(sp.Skeleton)\r\n    changeSkinEff: sp.Skeleton = null;\r\n    @property(sp.Skeleton)\r\n    haichong: sp.Skeleton = null;\r\n    @property(sp.Skeleton)\r\n    chuchong: sp.Skeleton = null;\r\n    @property([cc.SpriteFrame])\r\n    qipaoFrame: cc.SpriteFrame[] = [];\r\n\r\n    config: FieldConfig = {\r\n        id: 0,\r\n        type: 0,\r\n        state: 0,\r\n        cropState: 0,\r\n        cropId: 0,\r\n        lastTime: 0,\r\n        level: 1,\r\n    }\r\n    interval = 0;\r\n    currentCropState = CropState.EMPTY;\r\n    isAddSpeed = false;//是否加速中\r\n    addSpeedTime = 3;\r\n    one_speed = 1;\r\n    addSpeedPro = 0;\r\n    mIndex = -1;\r\n    saveDataTime = 0;//几秒保存一次数据\r\n    totalTime = 0;//成熟所需总时间\r\n\r\n\r\n    thisPoint;\r\n    onLoad() {\r\n        this.buildTips.active = false;\r\n        this.lvUpEff.node.active = false;\r\n        this.changeSkinEff.node.active = false;\r\n\r\n        this.thisPoint = this.node;\r\n    }\r\n    start() {\r\n\r\n    }\r\n    protected onEnable(): void {\r\n        EventDispath.on(this.qipao, this.onQipaoClick, this, 0, false);\r\n        EventDispath.on(this.buildTips, this.onBuild, this, 0, false);\r\n\r\n        EventDispath.addEventListener(EventType.CROP_ADD_SPEED, this.addSpeed, this);\r\n        EventDispath.addEventListener(EventType.FIELD_BUILD, this.onBuildBack, this);\r\n    }\r\n\r\n    onBuild() {\r\n        //弹出场景元素信息面板\r\n        // this.buildTips.active = false;\r\n        // this.config = {\r\n        //     id: this.config.id,\r\n        //     type: this.config.type,\r\n        //     state: 1,\r\n        //     cropState: 0,\r\n        //     cropId: 0,\r\n        //     lastTime: 0,\r\n        //     level: 1,\r\n        // }\r\n\r\n        // PlayerModel.changeFieldSkin(this.mIndex, 1)\r\n        // this.changeState(CropState.EMPTY);\r\n        // this.changeSkin();\r\n        // MKUtils.setNodeDelay(this.node, 1, () => {\r\n        //     this.qipaoAnim();\r\n        // })\r\n        EventDispath.addEventListener(EventType.VIDEO_BACK, this.selectBack, this);\r\n        // let id = this.config.id + \"01\"\r\n        // SDKManager.getUnlockConfig(7, Number(id));\r\n        UIMananger.showPanel(UIType.popView1, null, () => {\r\n            EventDispath.removeByEvent(EventType.VIDEO_BACK, this.selectBack, this);\r\n        }, UIEffectType.SCALE, PopType.FIELD);\r\n    }\r\n    selectBack() {\r\n        MKUtils.alertTips(\"扩建土地成功\")\r\n        this.buildTips.active = false;\r\n        PlayerModel.changeFieldSkin(this.mIndex, 1)\r\n        this.changeSkin();\r\n        EventDispath.removeByEvent(EventType.VIDEO_BACK, this.selectBack, this);\r\n        // UIMananger.showPanel(UIType.GoodsInfoView, null, null, UIEffectType.SCALE, { selectType: LVUP_TYPE.FIELD, id: id, amount: data.amount });\r\n    }\r\n    onBuildBack(index) {\r\n        if (this.mIndex == index) this.selectBack();\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        if (this.config.lastTime > 0 && this.config.cropState < 2 && this.config.cropState > 0 && !this.isAddSpeed) {\r\n            this.interval++;\r\n            if (this.interval >= 70) {\r\n                this.saveDataTime++;\r\n                this.config.lastTime--;\r\n\r\n                this.proBg.active = true;\r\n                this.pro.fillRange = (this.totalTime - this.config.lastTime) / this.totalTime;\r\n\r\n                // if (this.config.lastTime <= 0) {\r\n                //     this.proBg.active = false;\r\n                //     this.timeLb.node.active = false;\r\n                // }\r\n                ComponentHelper.labelTimeFormat(this.timeLb.node, this.config.lastTime);\r\n                this.interval = 0;\r\n                // if ((this.totalTime - this.config.lastTime) < this.totalTime) {\r\n                // if (this.currentCropState != CropState.SEEDING) {\r\n                //     this.currentCropState = CropState.SEEDING;\r\n                //     this.changeState(CropState.SEEDING)\r\n                // }\r\n\r\n                // } else \r\n                if (this.config.lastTime <= 1) {\r\n                    if (this.currentCropState != CropState.RIPE) {\r\n                        PlayerModel.setCropRipetimes();\r\n                        this.checkHaichogn();\r\n                    }\r\n                }\r\n            }\r\n            if (this.saveDataTime >= 3) {\r\n                this.saveDataTime=0;\r\n                PlayerModel.saveData();\r\n            }\r\n        } else {\r\n                if (this.isAddSpeed) {\r\n                    this.addSpeedPro += dt;\r\n                    // this.timePro.progress = (this.totalTime - this.addSpeedTime) / this.totalTime;\r\n                    this.pro.fillRange = (this.totalTime - this.addSpeedTime) / this.totalTime;\r\n                    this.addSpeedTime -= this.one_speed\r\n                    if (this.addSpeedTime < 0) this.addSpeedTime = 0;\r\n                    ComponentHelper.labelTimeFormat(this.timeLb.node, this.addSpeedTime);\r\n                    if (this.totalTime - this.addSpeedTime >= this.totalTime) {\r\n                        this.isAddSpeed = false;\r\n                        if (this.currentCropState != CropState.RIPE && this.config.lastTime <= 0) {\r\n                            PlayerModel.setCropRipetimes();\r\n                            this.checkHaichogn();\r\n                        }\r\n                        this.addSpeedPro = 0;\r\n                    }\r\n                }\r\n        }\r\n    }\r\n    //成熟检测是否有害虫\r\n    checkHaichogn() {\r\n        if (PlayerModel.getCropRipetimes() >= 9 && PlayerModel.pestNum < 2) {\r\n            let addCfg = ConfigManager.getPropById(propType.scarecrow, PlayerModel.getUIConfig().scarecrowlv)\r\n            let rate = addCfg.add_num;\r\n            let random = MKUtils.randomNMF(0, 100)\r\n            if (random < rate) {\r\n                PlayerModel.pestNum++;\r\n                this.currentCropState = CropState.PEST;\r\n                this.changeState(CropState.PEST)\r\n            } else {\r\n                this.currentCropState = CropState.RIPE;\r\n                this.changeState(CropState.RIPE)\r\n            }\r\n        } else {\r\n            this.currentCropState = CropState.RIPE;\r\n            this.changeState(CropState.RIPE)\r\n        }\r\n    }\r\n\r\n    setData(index) {\r\n        this.mIndex = index;\r\n        this.changeSkin(0);\r\n        // if (!PlayerModel.guideState && index == 0) {\r\n        //     EventDispath.addEventListener(EventType.CROP_PLANT, this.onPlant, this);\r\n        // }\r\n    }\r\n\r\n    changeSkin(isLvUp = 1) {\r\n        let cfg = PlayerModel.getFieldListCfg()[this.mIndex];\r\n        this.config = cfg;\r\n\r\n        if (this.config.cropId != 0) {\r\n\r\n            if (Global.isCeshi_version) this.totalTime = 5;\r\n            else this.getPlantTime();\r\n        }\r\n\r\n        if (isLvUp == 0 && this.config.cropState == CropState.SEEDING) {\r\n            let offlineTime = PlayerModel.offlineLastTimestamp;\r\n            let currentTime = Math.floor(new Date().getTime() / 1000);\r\n            let time = currentTime - offlineTime;\r\n            if (this.config.lastTime > time) {\r\n                this.config.lastTime -= time;\r\n            } else {\r\n                this.config.lastTime = 0;\r\n                // this.changeState(CropState.RIPE);\r\n\r\n                this.config.cropState = CropState.RIPE;\r\n            }\r\n        }\r\n\r\n        this.currentCropState = this.config.cropState;\r\n        if (this.config.state > 0) {\r\n            this.buildTips.active = false;\r\n            // if (this.config.lastTime < 0) {\r\n            //     this.config.cropState = CropState.RIPE;\r\n            // }\r\n            let cState = this.config.cropState;\r\n            this.changeState(cState);\r\n            this.qipaoAnim();\r\n\r\n        } else {\r\n            this.qipao.active = false;\r\n            this.buildTips.active = true;\r\n        }\r\n\r\n        if (cfg.level == 0) return;\r\n        MKUtils.loadSpriteFrame(\"texture/prop/field/\" + `0${cfg.level}`, (res) => {\r\n            this.bg.spriteFrame = res;\r\n            if (isLvUp) {\r\n                this.changeSkinEff.node.active = true;\r\n                this.changeSkinEff.animation = \"animation\";\r\n            }\r\n        });\r\n    }\r\n    //切换状态\r\n    changeState(cState) {\r\n        this.config.cropState = cState;\r\n        this.crop.node.active = true;\r\n        this.crop.node.stopAllActions();\r\n        this.qipao.active = true;\r\n\r\n        this.qpJs.active = false;\r\n        this.qipaoIcon.node.active = true;\r\n\r\n        if (cState != CropState.EMPTY) {\r\n            MKUtils.loadSpriteFrame(\"texture/crop/singleIcon/\" + `${this.config.cropId}`, (res) => {\r\n                this.getIcon.spriteFrame = res;\r\n            });\r\n        }\r\n        this.timeLb.node.active = false;\r\n        this.proBg.active = false;\r\n        this.pro.fillRange = 0;\r\n        if (cState == CropState.EMPTY) {\r\n            this.crop.node.active = false;\r\n            this.timePro.node.active = false;\r\n            this.proBg.active = false;\r\n            this.qipaoIcon.spriteFrame = this.qipaoFrame[0];\r\n            this.qipaoDesc.string = \"种植\"\r\n        } else if (cState == CropState.SEEDING) {\r\n            MKUtils.loadSpriteFrame(\"texture/crop/ripe/\" + `${this.config.cropId}`, (res) => {\r\n                this.crop.spriteFrame = res;\r\n            });\r\n            // ComponentHelper.setHeartAction(this.crop.node, 1, false, 1.03);\r\n            this.qipaoIcon.node.active = false;\r\n            this.qpJs.active = true;\r\n            this.qpJsLb.string = ConfigManager.add_speed_gold + \"\";\r\n            this.qipaoDesc.string = \"加速\"\r\n\r\n            this.timeLb.node.active = true;\r\n            this.proBg.active = true;\r\n        } else if (cState == CropState.RIPE) {\r\n\r\n            JSHelper.playEffect(\"crop_ripe\");\r\n            MKUtils.loadSpriteFrame(\"texture/crop/ripe/\" + `${this.config.cropId}`, (res) => {\r\n                this.crop.spriteFrame = res;\r\n            });\r\n            MKUtils.loadSpriteFrame(\"texture/crop/singleIcon/\" + `${this.config.cropId}`, (res) => {\r\n                this.qipaoIcon.spriteFrame = res;\r\n            });\r\n\r\n            this.timePro.node.active = false;\r\n            this.proBg.active = false;\r\n            this.qipaoDesc.string = \"收获\"\r\n        } else if (cState == CropState.PEST) {\r\n            this.qipaoIcon.spriteFrame = this.qipaoFrame[1];\r\n            JSHelper.playEffect(\"crop_ripe\");\r\n            MKUtils.loadSpriteFrame(\"texture/crop/ripe/\" + `${this.config.cropId}`, (res) => {\r\n                this.crop.spriteFrame = res;\r\n            });\r\n            this.timePro.node.active = false;\r\n            this.proBg.active = false;\r\n            this.qipaoDesc.string = \"除虫\"\r\n\r\n            this.haichong.node.active = true;\r\n            this.haichong.animation = \"haichong\";\r\n            this.haichong.timeScale = 0.6;\r\n        }\r\n        //第一版bug修改注释升级效果\r\n        // if (cState != CropState.EMPTY) {\r\n        //     this.lvUpEff.node.active = true;\r\n        //     this.lvUpEff.animation = \"shengji\";\r\n        // }\r\n        PlayerModel.saveUiData();\r\n\r\n    }\r\n    //气泡点击\r\n    onQipaoClick() {\r\n        if (this.isAddSpeed) return;\r\n        switch (this.config.cropState) {\r\n            case 0://种植\r\n                if (PlayerModel.guideStep >= 0) {\r\n                    EventDispath.send(EventType.GUIDE_Hide);\r\n                }\r\n                //打开作物面板，选择作物\r\n                EventDispath.addEventListener(EventType.CROP_PLANT, this.onPlant, this);\r\n                EventDispath.addEventListener(EventType.VEGETABLE_CLOSE, this.onVrgetableClose, this)\r\n                UIMananger.showPanel(UIType.VegetablesView,null,null,null);\r\n                break;\r\n            case 1://加速\r\n                if (this.checkGold()) {\r\n                    // EventDispath.send(EventType.JX_SC, { type: 1, point: this.thisPoint });\r\n                    // EventDispath.addEventListener(EventType.JIASU, this.onJiasu, this);\r\n                    this.onJiasu();\r\n                }\r\n                break;\r\n            case 2://除虫\r\n                UIMananger.showPanel(UIType.clearPestView, null, null, UIEffectType.SCALE, this.thisPoint, this.config)\r\n\r\n                EventDispath.addEventListener(EventType.CLEAR_PEST_CLOSE, this.closePest, this);\r\n                EventDispath.addEventListener(EventType.SHACHONG, this.onShachong, this);\r\n                break;\r\n            case 3://收获\r\n                if (PlayerModel.guideStep >= 0) {\r\n                    EventDispath.send(EventType.GUIDE_Hide);\r\n                    EventDispath.send(EventType.MAIN_LOCK, true);\r\n                }\r\n                this.checkGetCrop();\r\n                break;\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n    //种植\r\n    onPlant(id) {\r\n        EventDispath.removeByEvent(EventType.CROP_PLANT, this.onPlant, this);\r\n        console.log(\"种植id：\", id);\r\n        // SDKManager.onEvent(Global.EVENT_ACTION.client_seed)\r\n\r\n        PlayerModel.setPlantNumById(id);\r\n\r\n        this.config.cropId = id;\r\n        this.config.cropState = 1;\r\n\r\n        if (Global.isCeshi_version) this.totalTime = 5;\r\n        else this.getPlantTime();\r\n        this.config.lastTime = this.totalTime;\r\n\r\n        PlayerModel.saveUiData();\r\n        MKUtils.setNodeDelay(this.node, 0.1, () => {\r\n            this.currentCropState = CropState.SEEDING;\r\n            this.changeState(CropState.SEEDING)\r\n        })\r\n\r\n        EventDispath.send(EventType.UPDATE_FIELD_TIPS);\r\n\r\n    }\r\n    onVrgetableClose() {\r\n        EventDispath.removeByEvent(EventType.CROP_PLANT, this.onPlant, this);\r\n        EventDispath.removeByEvent(EventType.VEGETABLE_CLOSE, this.onVrgetableClose, this)\r\n    }\r\n    //检测加速钞票是否充足\r\n    diffGold = 0;\r\n    checkGold() {\r\n        let gold = PlayerModel.getGold();\r\n        if (gold < ConfigManager.add_speed_gold) {\r\n            // this.diffGold = ConfigManager.add_speed_gold - gold;\r\n            // EventDispath.addEventListener(EventType.VIDEO_BACK, this.addGold, this);\r\n            UIMananger.showPanel(UIType.popView1, null, () => {\r\n                // EventDispath.removeByEvent(EventType.VIDEO_BACK, this.addGold, this);\r\n            }, UIEffectType.SCALE, PopType.GOLD2, 1000);\r\n            return false;\r\n        }\r\n        return true;\r\n    }\r\n    //加速\r\n    onJiasu() {\r\n        PlayerModel.setGold(-ConfigManager.add_speed_gold);\r\n        this.addSpeed();\r\n        // let cfg = ConfigManager.getPropById(propType.pipe, PlayerModel.getUIConfig().pipelv);\r\n        // this.config.lastTime -= cfg.add_num * 60;\r\n        // this.addSpeedTime = cfg.add_num * 60;\r\n        // this.isAddSpeed = true;\r\n        // this.flyJsTips(cfg.add_num)\r\n        // EventDispath.removeByEvent(EventType.JIASU, this.onJiasu, this);\r\n    }\r\n    //关闭除虫面板\r\n    closePest() {\r\n        EventDispath.removeByEvent(EventType.SHACHONG, this.onShachong, this);\r\n    }\r\n    //除虫\r\n    onShachong(data) {\r\n        EventDispath.removeByEvent(EventType.SHACHONG, this.onShachong, this);\r\n\r\n        this.chuchong.node.active = true;\r\n        this.chuchong.animation = \"shachong\";\r\n        this.qipao.active = false;\r\n        this.chuchong.setCompleteListener((trackEntry, loopCount) => {\r\n            this.chuchong.setCompleteListener(null);\r\n            this.chuchong.node.active = false;\r\n            this.haichong.node.active = false;\r\n            this.changeState(CropState.RIPE);\r\n            UIMananger.showPanel(UIType.popRewardView, null, () => {\r\n            }, UIEffectType.SCALE, 0, data)\r\n        })\r\n        PlayerModel.pestNum--;\r\n    }\r\n    //收获\r\n    checkGetCrop() {\r\n        let getNum = 1;\r\n        if (PlayerModel.crop_get_num >= ConfigManager.crop_maxGet_interval) {\r\n            let random = MKUtils.randomNMF(0, 1);\r\n            if (random < ConfigManager.crop_maxGet_rate) {\r\n                getNum = ConfigManager.crop_maxGet_num;\r\n                PlayerModel.crop_get_num = 0;\r\n                EventDispath.addEventListener(EventType.CROP_GC, this.getCrop, this);\r\n                // MKUtils.alertTips(\"弹出高产页面\")\r\n                UIMananger.showPanel(UIType.popGcView, null, () => {\r\n                    EventDispath.removeByEvent(EventType.CROP_GC, this.getCrop, this);\r\n                }, UIEffectType.SCALE, this.config.cropId);\r\n                return;\r\n            }\r\n        }\r\n\r\n        if (this.checkHouseMax(getNum)) {\r\n            MKUtils.alertTips(\"仓库放不下了，快点卖出作物赚钱吧\")\r\n            return;\r\n        }\r\n        this.getCrop(1);\r\n    }\r\n    getCrop(num) {\r\n\r\n        EventDispath.send(EventType.CROP_GET);\r\n        this.changeState(CropState.EMPTY)\r\n        this.qipao.active = false;\r\n        EventDispath.removeByEvent(EventType.CROP_GC, this.getCrop, this);\r\n        this.flyGetTips(num);\r\n\r\n        PlayerModel.crop_get_num++;\r\n\r\n        JSHelper.playEffect(\"crop_ripe\", false, true);\r\n        this.lvUpEff.animation = \"shengji\";\r\n\r\n\r\n        let startNode = this.node.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        EffectManager.playCrop(startNode, this.config.cropId, 8, () => {\r\n            if (!PlayerModel.guideState) EventDispath.send(EventType.MAIN_LOCK, false);\r\n        });\r\n        PlayerModel.setHouseAddCrop(this.config.cropId, num);\r\n        PlayerModel.setCropGetNum(num);\r\n        PlayerModel.setXfzs(0.2);\r\n        this.scheduleOnce(() => {\r\n            PlayerModel.checkAddOrder(this.config.cropId, num, () => {\r\n                // UIMananger.showPanel(UIType.orderSuccessView);\r\n                EventDispath.send(EventType.ORDER_COMPLETE_UPDATE)\r\n                if (PlayerModel.guideStep >= 0) {\r\n                    EventDispath.send(EventType.GUIDE_UPDATE)\r\n                }\r\n            }, () => {\r\n                if (PlayerModel.guideStep >= 0) {\r\n                    EventDispath.send(EventType.GUIDE_UPDATE)\r\n                }\r\n                //辛苦红包判断\r\n                if (PlayerModel.getCropGetNum() >= ConfigManager.hard_hb_interval) {\r\n                    PlayerModel.setCropGetNum(-PlayerModel.getCropGetNum());\r\n                    if (!UIMananger.checkPanel(UIType.orderSuccessView)) {\r\n                        UIMananger.showPanel(UIType.hardView, null, null, UIEffectType.SCALE, 0);\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n            this.reset();\r\n            EventDispath.send(EventType.UPDATE_FIELD_TIPS);\r\n            MKUtils.setNodeDelay(this.node, 0.5, () => {\r\n                this.qipaoAnim();\r\n            })\r\n        }, 1);\r\n        // SDKManager.onEvent(Global.EVENT_ACTION.client_get_crops)\r\n\r\n    }\r\n    //钞票不足，看视频\r\n    addGold() {\r\n        // PlayerModel.setGold(this.diffGold);\r\n        // EventDispath.removeByEvent(EventType.VIDEO_BACK, this.addGold, this);\r\n    }\r\n    //加速\r\n    addSpeed() {\r\n        if (this.config.cropState != CropState.SEEDING) return;\r\n        this.qipao.active = false;\r\n        this.haichong.node.active = true;\r\n        this.haichong.animation = \"jiasu\";\r\n        this.haichong.setCompleteListener((trackEntry, loopCount) => {\r\n            this.haichong.setCompleteListener(null);\r\n            this.haichong.node.active = false;\r\n\r\n            let cfg = ConfigManager.getPropById(propType.pipe, PlayerModel.getUIConfig().pipelv);\r\n            if (this.config.lastTime > cfg.add_num * 60) {\r\n                this.config.lastTime -= cfg.add_num * 60;\r\n                this.addSpeedTime = cfg.add_num * 60;\r\n            } else {\r\n\r\n                this.addSpeedTime = this.config.lastTime;\r\n                this.config.lastTime -= cfg.add_num * 60;\r\n            }\r\n            if (this.addSpeedTime > 100) {\r\n                this.one_speed = 4\r\n            }\r\n            this.isAddSpeed = true;\r\n            this.flyJsTips(cfg.add_num)\r\n        })\r\n\r\n    }\r\n\r\n    reset() {\r\n        this.config.cropId = 0;\r\n        this.config.lastTime = 0;\r\n        this.crop.node.active = false;\r\n        this.qipao.active = false;\r\n\r\n        PlayerModel.saveData();\r\n    }\r\n    qipaoAnim() {\r\n        this.qipao.active = true;\r\n        this.qipao.stopAllActions();\r\n        this.qipao.runAction(cc.repeatForever(\r\n            cc.sequence(\r\n                cc.scaleTo(0.3, 1.2),\r\n                cc.scaleTo(0.3, 1),\r\n                cc.scaleTo(0.3, 1.2),\r\n                cc.scaleTo(0.3, 1),\r\n                cc.delayTime(2)\r\n            )\r\n        ))\r\n    }\r\n    //检测仓库是否达到上限\r\n    checkHouseMax(value) {\r\n        let lv = PlayerModel.getUIConfig().warehouselv;\r\n        // let arr = ConfigManager.prop.filter((value) => {\r\n        //     return value.id == Number(propType.warehouse + `0${id}`);\r\n        // })\r\n        let cfg = ConfigManager.getPropById(propType.warehouse, lv);\r\n        let currentNum = PlayerModel.getCurrentPutNum();\r\n        if ((cfg.add_num - currentNum) < value) return true;\r\n        return false;\r\n    }\r\n\r\n    getPlantTime() {\r\n        let time = ConfigManager.getCropTime(this.config.cropId, PlayerModel.getPlantNumById(this.config.cropId));\r\n        let add = PlayerModel.getTimeAdd(this.config.type, this.config.level)\r\n        this.totalTime = time - add * time;\r\n    }\r\n\r\n    flyJsTips(num) {\r\n        this.tipsLb.node.stopAllActions();\r\n        this.tipsLb.node.active = true;\r\n        this.tipsLb.node.opacity = 255;\r\n        this.tipsLb.string = `-${num}分钟`;\r\n        this.tipsLb.node.runAction(cc.sequence(\r\n            cc.moveTo(Utils._FT(30), cc.v2(this.tipsLb.node.x, 100)),\r\n            cc.fadeOut(Utils._FT(15)),\r\n            cc.callFunc(() => {\r\n                this.tipsLb.node.active = false;\r\n                this.tipsLb.node.y = 0;\r\n            })\r\n        ));\r\n    }\r\n    flyGetTips(num) {\r\n        this.getTipsLb.string = \"+\" + num;\r\n        this.getTips.stopAllActions();\r\n        this.getTips.active = true;\r\n        this.getTips.opacity = 255;\r\n        this.getTips.runAction(cc.sequence(\r\n            cc.moveTo(Utils._FT(30), cc.v2(this.getTips.x, 150)),\r\n            cc.fadeOut(Utils._FT(15)),\r\n            cc.callFunc(() => {\r\n                this.getTips.active = false;\r\n                this.getTips.y = 0;\r\n            })\r\n        ));\r\n    }\r\n}\r\n"]}
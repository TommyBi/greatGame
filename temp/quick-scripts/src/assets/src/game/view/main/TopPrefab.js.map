{"version":3,"sources":["assets/src/game/view/main/TopPrefab.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import JSHelper from \"../../../framework/helper/JSHelper\";\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport { UIEffectType } from \"../../../framework/manager/UIEffectManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport ComponentHelper from \"../../../framework/tools/ComponentHelper\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport Utils from \"../../../framework/tools/Utils\";\r\nimport { crop_config } from \"../../consts/CConst\";\r\nimport Global from \"../../consts/Global\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport { PopType } from \"../popView/PopView1\";\r\nimport TopOrderPrefab from \"./TopOrderPrefab\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class TopPrefab extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    moneyLab: cc.Label = null;\r\n    @property(cc.Label)\r\n    goldLab: cc.Label = null;\r\n    @property(cc.Node)\r\n    addGold: cc.Node = null;\r\n    @property(cc.Label)\r\n    degreeLb: cc.Label = null;\r\n    @property(cc.Label)\r\n    lvLb: cc.Label = null;\r\n    @property(cc.Node)\r\n    lvProBg: cc.Node = null;\r\n    @property(cc.Label)\r\n    lvProLb: cc.Label = null;\r\n\r\n    @property(cc.Node)\r\n    settingBtn: cc.Node = null;\r\n    @property(cc.Sprite)\r\n    headIcon: cc.Sprite = null;\r\n\r\n    @property(cc.Node)\r\n    flyMoney: cc.Node = null;\r\n    @property(cc.Node)\r\n    flyGold: cc.Node = null;\r\n    @property(cc.Node)\r\n    flyXfzs: cc.Node = null;\r\n    @property(cc.Node)\r\n    orderGp: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    topOrder: cc.Prefab = null;\r\n\r\n    //money动画开启\r\n    _startMoney: number = 0;\r\n    _endMoney: number = 0;\r\n    _curTimer: number = 0;\r\n    _endTimer: number = Utils._FT(10);\r\n    // LIFE-CYCLE CALLBACKS:\r\n\r\n    orderPrefab: TopOrderPrefab;\r\n\r\n    onLoad() {\r\n\r\n        this.initOrder();\r\n\r\n    }\r\n    onEnable(): void {\r\n        EventDispath.addEventListener(EventType.UPDATE_MONEY, this.updateTopMoney, this);\r\n        EventDispath.addEventListener(EventType.UPDATE_GOLD, this.updateGold, this);\r\n        EventDispath.addEventListener(EventType.UPDATE_XFZS, this.updateXfzs, this);\r\n\r\n        EventDispath.addEventListener(EventType.LEVEL_UPDATE, this.updateLv, this);\r\n\r\n        EventDispath.addEventListener(EventType.SDK_WXBIND, this.updateHead, this);\r\n        this.updateHead();\r\n    }\r\n    onDisable(): void {\r\n    }\r\n\r\n    start() {\r\n        this.flyMoney.y = - 15;\r\n        this.flyGold.y = - 15;\r\n        this.flyXfzs.y = - 450;\r\n        this.initData();\r\n    }\r\n    initData() {\r\n        this.updateLv();\r\n        this.moneyLab.string = `${PlayerModel.getMoney()}元`;\r\n        this.goldLab.string = `${PlayerModel.getGold()}`;\r\n        this.degreeLb.string = `${PlayerModel.getXfzs()}`;\r\n        // this.updateTixianTips();\r\n    }\r\n\r\n    updateHead() {\r\n        let headUrl = SDKManager.getUserIcon();\r\n        // let headUrl = \"https://thirdwx.qlogo.cn/mmopen/vi_32/PiajxSqBRaEKM0iaGwI4LEdCUicZuIgmrm4zXNMlDHYq7XnA36qKUX5n6ibzjtWgPj7ocPgE2ialhJ2eOG9NgTXam8A/132\";\r\n        if (headUrl && headUrl != \"\") {\r\n            let self = this;\r\n            cc.assetManager.loadRemote(headUrl, { ext: '.png' }, function (err, texture: cc.Texture2D) {\r\n                if (err) {\r\n                    console.log(\"头像加载失败\", headUrl);\r\n                    return;\r\n                }\r\n                self.headIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }\r\n    }\r\n    //设置\r\n    openSetting() {\r\n        JSHelper.playClickEffect();\r\n        UIMananger.showPanel(UIType.settingView);\r\n    }\r\n    /** 幸福指数 */\r\n    openXfzs(): void {\r\n        JSHelper.playClickEffect();\r\n        UIMananger.showPanel(UIType.xfzsView);\r\n    }\r\n    /** 增加钞票 */\r\n    openAddGold(): void {\r\n        JSHelper.playClickEffect();\r\n        // UIMananger.showPanel(UIType.ManyiView);\r\n    }\r\n    openLevel() {\r\n        UIMananger.showPanel(UIType.levelView);\r\n    }\r\n\r\n    //提现\r\n    openTixian() {\r\n        JSHelper.playClickEffect();\r\n        SDKManager.openWithdraw();\r\n    }\r\n    //领取钞票\r\n    openGoldVAiew() {\r\n        JSHelper.playClickEffect();\r\n        UIMananger.showPanel(UIType.popView1, null, null, UIEffectType.SCALE, PopType.GOLD1, 1000);\r\n    }\r\n    updateTopMoney(data) {\r\n        //ActionFloat后续扩展到引擎上面 TODO\r\n        this.moneyLab.string = `${PlayerModel.getMoney()}元`;\r\n        if (Utils.isUndefined(data)) {\r\n            console.error(\"TopPrefab updateTopMoney data is undefined\");\r\n            return;\r\n        }\r\n        if (data != 0) this.flyRewardLabel(Number(data));\r\n\r\n        // this.updateTixianTips();\r\n\r\n    }\r\n    updateLv() {\r\n        let data = SDKManager.getJSLevelInfo();\r\n        console.log(\"获取等级相关信息\", data);\r\n        this.lvProBg.stopAllActions();\r\n        this.lvProBg.angle = 0;\r\n        this.lvLb.string = \"Lv.\" + data.jsLevel;\r\n        if (data.jxOrderNum == 0 && data.userJxOrderNum == 0) {\r\n            this.lvProBg.active = false;\r\n            this.lvProLb.node.active = false;\r\n        } else {\r\n\r\n            if (data.jxOrderNum != 0 && data.userJxOrderNum >= data.jxOrderNum) {\r\n                this.lvProLb.string = \"可升级\"\r\n                ComponentHelper.setRotation(this.lvProBg);\r\n            } else {\r\n                this.lvProLb.string = Math.floor(data.userJxOrderNum / data.jxOrderNum * 100) + \"%\";\r\n            }\r\n        }\r\n    }\r\n    updateGold(addValue) {\r\n\r\n        if (addValue > 0) this.flyGoldLb(addValue);\r\n        PlayerModel.changeGold(addValue);\r\n        this.goldLab.string = `${PlayerModel.getGold()}`;\r\n    }\r\n    updateXfzs(addValue) {\r\n        this.degreeLb.string = `${PlayerModel.getXfzs()}`;\r\n        this.flyXfzsLb(addValue);\r\n    }\r\n\r\n    checkCropUnlock() {\r\n        let list = ConfigManager.crop;\r\n        let newCrop: crop_config;\r\n        let unLockList = PlayerModel.getUnlockCrop();\r\n        for (let i = 0; i < list.length; i++) {\r\n            let crop = list[i];\r\n            let index = unLockList.indexOf(crop.id)\r\n        }\r\n        if (newCrop) {\r\n            UIMananger.showPanel(UIType.VegetablesUnlockView, null, null, UIEffectType.SCALE, newCrop.id)\r\n            PlayerModel.setNewCrop(newCrop.id);\r\n        }\r\n        console.log(\"新解锁植物\", newCrop);\r\n    }\r\n    update(dt: number): void {\r\n    }\r\n    flyRewardLabel(num) {\r\n        this.flyMoney.stopAllActions();\r\n        this.flyMoney.active = true;\r\n        this.flyMoney.opacity = 255;\r\n        this.flyMoney.getComponent(cc.Label).string = `+${num.toFixed(2)}元`;\r\n        this.flyMoney.runAction(cc.sequence(\r\n            cc.moveTo(Utils._FT(30), cc.v2(this.flyMoney.x, 100)),\r\n            cc.fadeOut(Utils._FT(15)),\r\n            cc.callFunc(() => {\r\n                this.flyMoney.active = false;\r\n                this.flyMoney.y = 45;\r\n            })\r\n        ));\r\n    }\r\n    flyGoldLb(num) {\r\n        this.flyGold.stopAllActions();\r\n        this.flyGold.active = true;\r\n        this.flyGold.opacity = 255;\r\n        if (num > 0) this.flyGold.getComponent(cc.Label).string = `+${num}`;\r\n        else this.flyGold.getComponent(cc.Label).string = `${num}`;\r\n\r\n        this.flyGold.runAction(cc.sequence(\r\n            cc.moveTo(Utils._FT(30), cc.v2(this.flyGold.x, 100)),\r\n            cc.fadeOut(Utils._FT(15)),\r\n            cc.callFunc(() => {\r\n                this.flyGold.active = false;\r\n                this.flyGold.y = 45;\r\n            })\r\n        ));\r\n    }\r\n    flyXfzsLb(num) {\r\n        this.flyXfzs.stopAllActions();\r\n        this.flyXfzs.active = true;\r\n        this.flyXfzs.opacity = 255;\r\n        this.flyXfzs.getComponent(cc.Label).string = `+${num}`;\r\n        this.flyXfzs.runAction(cc.sequence(\r\n            cc.moveTo(Utils._FT(30), cc.v2(this.flyXfzs.x, -400)),\r\n            cc.fadeOut(Utils._FT(15)),\r\n            cc.callFunc(() => {\r\n                this.flyXfzs.active = false;\r\n                this.flyXfzs.y = - 450;\r\n            })\r\n        ));\r\n    }\r\n\r\n    initOrder() {\r\n        let order = cc.instantiate(this.topOrder);\r\n        this.orderGp.addChild(order);\r\n        this.orderPrefab = order.getComponent(TopOrderPrefab);\r\n    }\r\n\r\n    getGuidePoint() {\r\n        let p = this.orderGp.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        return p;\r\n    }\r\n}\r\n"]}
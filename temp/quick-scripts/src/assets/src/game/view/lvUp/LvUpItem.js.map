{"version":3,"sources":["assets/src/game/view/lvUp/LvUpItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport { UIEffectType } from \"../../../framework/manager/UIEffectManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport { PopType } from \"../popView/PopView1\";\r\nimport AItemRenderer from \"../task/AItemRenerer\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n/** 单个元素的详细条目 */\r\n@ccclass\r\nexport default class LvUpItem extends AItemRenderer<string> {\r\n\r\n    @property(cc.Sprite)\r\n    icon: cc.Sprite = null;     // 物品图标\r\n\r\n    @property(cc.Node)\r\n    lvNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_lvUp: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_build: cc.Node = null;\r\n    @property(cc.Node)\r\n    maxLv: cc.Node = null;      // 是否最高级\r\n\r\n    @property(cc.Label)\r\n    addLb: cc.Label = null;    //加成描述\r\n    @property(cc.Label)\r\n    nameLb: cc.Label = null;\r\n    @property(cc.Label)\r\n    lvLb: cc.Label = null;\r\n\r\n\r\n    onLoad() {\r\n    }\r\n    protected dataChanged(): void {\r\n        // console.log(this.data);\r\n        this.initUI();\r\n    }\r\n    initUI() {\r\n        this.btn_build.active = false;\r\n        this.btn_lvUp.active = false;\r\n        this.maxLv.active = false;\r\n        switch (this.data.tabIndex) {\r\n            case 1:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/field/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 2:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/shelves/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 3:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/cashier/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 4:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/pipe/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 5:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/wall/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 6:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/road/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 7:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/scarecrow/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 8:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/warehouse/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n            case 9:\r\n                MKUtils.loadSpriteFrame(\"texture/prop/fence/icon/\" + `0${this.data[\"level\"]}`, (res) => {\r\n                    this.icon.spriteFrame = res;\r\n                });\r\n                break;\r\n        }\r\n        this.nameLb.string = `${this.data.name}`;\r\n        if (this.data.level == 0) {\r\n            this.lvLb.node.active = false;\r\n            this.lvNode.active = false;\r\n            this.btn_build.active = true;\r\n            this.addLb.string = \"未扩建\";\r\n        } else {\r\n            this.addLb.string = this.data.addDesc;\r\n            if (this.data.isMaxLv) {\r\n                this.maxLv.active = true;\r\n            } else {\r\n                this.btn_lvUp.active = true;\r\n            }\r\n            this.lvLb.node.active = true;\r\n            this.lvNode.active = true;\r\n            this.lvLb.string = this.data.level + \"级\";\r\n        }\r\n\r\n        // this.isLock = this.data.isLock;\r\n        // this.uImgLock.enabled = this.isLock ? true : false;\r\n        // this.uImgMask.enabled = this.uImgLock.enabled;\r\n\r\n    }\r\n\r\n    onBuild() {\r\n        // MKUtils.alertTips(\"扩建\")\r\n        if (this.data.tabIndex == 1) {\r\n            EventDispath.addEventListener(EventType.VIDEO_BACK, this.onBuildBack, this);\r\n            // let id = this.config.id + \"01\"\r\n            // SDKManager.getUnlockConfig(7, Number(id));\r\n            UIMananger.showPanel(UIType.popView1, null, () => {\r\n                EventDispath.removeByEvent(EventType.VIDEO_BACK, this.onBuildBack, this);\r\n            }, UIEffectType.SCALE, PopType.FIELD);\r\n        }else if (this.data.tabIndex == 2) {\r\n            EventDispath.addEventListener(EventType.VIDEO_BACK, this.onBuildBack, this);\r\n            // let id = this.config.id + \"01\"\r\n            // SDKManager.getUnlockConfig(7, Number(id));\r\n            UIMananger.showPanel(UIType.popView1, null, () => {\r\n                EventDispath.removeByEvent(EventType.VIDEO_BACK, this.onBuildBack, this);\r\n            }, UIEffectType.SCALE, PopType.SHELVE);\r\n        }\r\n    }\r\n\r\n    onLvUp(): void {\r\n        // MKUtils.alertTips(\"升级\")\r\n        UIMananger.showPanel(UIType.LvUpPopView, null, () => {\r\n        }, UIEffectType.SCALE, this.data);\r\n        // EventDispath.addEventListener(EventType.PROP_INFO, this.selectBack, this);\r\n    }\r\n    onBuildBack() {\r\n        if (this.data.tabIndex == 1) {\r\n            EventDispath.send(EventType.FIELD_BUILD, this.data.index);\r\n        }else if (this.data.tabIndex == 2) {\r\n            EventDispath.send(EventType.SHELVE_BUILD, this.data.index);\r\n        }\r\n        \r\n        EventDispath.send(EventType.LVUP_UPDATE);\r\n        // EventDispath.removeByEvent(EventType.PROP_INFO, this.selectBack, this);\r\n    }\r\n\r\n    onDestroy() {\r\n        EventDispath.removeEventListeners(this);\r\n    }\r\n\r\n}\r\n"]}
{"version":3,"sources":["assets/src/game/view/task/TaskRewardView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport BasePanel from \"../../../framework/ui/BasePanel\";\r\nimport Global from \"../../consts/Global\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport EffectManager from \"../../manager/EffectManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TaskRewardView extends BasePanel {\r\n\r\n    @property([cc.Node])\r\n    iconList: cc.Node[] = [];\r\n    @property(cc.Node)\r\n    btn_get: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn_close: cc.Node = null;\r\n    @property(cc.Label)\r\n    rewardLab: cc.Label = null;\r\n    @property(cc.Label)\r\n    xfzsLab: cc.Label = null;\r\n\r\n    // LIFE-CYCLE CALLBACKS:\r\n    data;\r\n    cropId = 0;\r\n    onEnable(): void {\r\n        // 领取\r\n        EventDispath.on(this.btn_get, this.onGet, this);\r\n        // 退出\r\n        EventDispath.on(this.btn_close, this.onGet, this);\r\n\r\n        EventDispath.addEventListener(EventType.VIDEO_BACK, this.onVideoBack, this);\r\n        this.initUI();\r\n    }\r\n    initUI() {\r\n        if (this.data.taskId == 1) {\r\n            \r\n            this.rewardLab.string = \"+\" + Number(this.data.redBean).toFixed(2) + \"元\";\r\n            this.iconList[0].active = true;\r\n        } else if (this.data.taskId == 2) {\r\n            this.rewardLab.string = \"+\" + this.data.gold;\r\n            this.iconList[1].active = true;\r\n        } else if (this.data.taskId == 3) {\r\n            this.rewardLab.string = \"+3\";\r\n            this.cropId = PlayerModel.getCurrentOrderCrop();\r\n            this.iconList[2].active = true;\r\n\r\n            MKUtils.loadSpriteFrame(\"texture/crop/icon/\" + `${this.cropId}`, (res) => {\r\n                this.iconList[2].getComponent(cc.Sprite).spriteFrame = res;\r\n            });\r\n        }\r\n        this.xfzsLab.string = \"+\" +this.data.xfzs;\r\n    }\r\n    startShow() {\r\n        this.data = this.inData[0]\r\n    }\r\n    //领取奖励\r\n    onGet() {\r\n\r\n        if (this.data.taskId == 1) {\r\n            PlayerModel.setMoney(this.data.userRedBean, this.data.redBean)\r\n        } else if (this.data.taskId == 2) {\r\n            PlayerModel.setGold(this.data.gold)\r\n        } else if (this.data.taskId == 3) {\r\n            let startNode = cc.v2(cc.winSize.width / 2, cc.winSize.height / 2)\r\n            EffectManager.playCrop(startNode, this.cropId);\r\n            PlayerModel.setHouseAddCrop(this.cropId, 3);\r\n\r\n            PlayerModel.checkAddOrder(this.cropId, 3, () => {\r\n                // UIMananger.showPanel(UIType.orderSuccessView);\r\n                EventDispath.send(EventType.ORDER_COMPLETE_UPDATE)\r\n            })\r\n            // PlayerModel.setGold(this.data.gold)\r\n            //增加作物\r\n        }\r\n\r\n        PlayerModel.setXfzs(this.data.xfzs);\r\n        this.onClose();\r\n\r\n    }\r\n    onVideoBack(): void {\r\n        // PlayerModel.setGold(this.data[\"money\"] * 2, cc.v2(cc.winSize.width / 2, cc.winSize.height / 2))\r\n    }\r\n    onCloseHandler() {\r\n        EventDispath.send(EventType.TASK_ITEM_CHANG, 0);\r\n        this.onClose();\r\n    }\r\n    onClose() {\r\n        super.close();\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}
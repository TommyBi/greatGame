{"version":3,"sources":["assets/src/game/view/order/OrderRewardView.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AACvD,6DAAwD;AACxD,uDAAkD;AAClD,6DAAwD;AAElD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAI5C;IAA6C,mCAAS;IAAtD;QAAA,qEAsFC;QApFG,WAAK,GAAa,IAAI,CAAC;QAGvB,YAAM,GAAa,IAAI,CAAC;QAExB,YAAM,GAAa,IAAI,CAAC;QAExB,cAAQ,GAAa,IAAI,CAAC;QAE1B,cAAQ,GAAY,IAAI,CAAC;QAEzB,WAAK,GAAY,IAAI,CAAC;QAGtB,kBAAY,GAAG,CAAC,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,CAAC,CAAA;QAC/D,wBAAwB;QACxB,WAAK,GAAG,CAAC,CAAC,CAAA,kBAAkB;;QAmE5B,iBAAiB;IACrB,CAAC;IAjEG,gCAAM,GAAN;IAEA,CAAC;IAES,kCAAQ,GAAlB;QACI,OAAO;QACP,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QACzD,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAC;QAEtD,IAAI,CAAC,MAAM,EAAE,CAAC;QAEd,IAAI,qBAAW,CAAC,SAAS,IAAI,CAAC,EAAE;YAC5B,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;gBACjC,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,YAAY,CAAC,CAAA;YAE7C,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IAED,mCAAS,GAAT;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;QAC5B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC;IACjC,CAAC;IACD,gCAAM,GAAN;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;QAEnE,mDAAmD;QACnD,IAAI,IAAI,CAAC,MAAM,CAAC,OAAO,IAAI,CAAC,EAAE;YAC1B,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,KAAK,CAAC;YAC3B,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,cAAc,CAAC;YACpC,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC;SAE5B;aAAM;YACH,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,WAAW,GAAG,GAAG,CAAC;YAClD,IAAI,CAAC,KAAK,CAAC,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,UAAU,GAAG,GAAG,CAAC;YAEhD,IAAI,CAAC,MAAM,CAAC,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,MAAM,GAAG,uBAAa,CAAC,iBAAiB,CAAC,IAAI,CAAC,MAAM,CAAC,OAAO,GAAG,CAAC,CAAC,GAAG,KAAK,CAAC;SAC/I;IACL,CAAC;IACD,uCAAa,GAAb;QACI,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,WAAW,EAAE,IAAI,CAAC,KAAK,CAAC,OAAO,CAAC,CAAC;QACjE,IAAI,KAAK,GAAG,qBAAW,CAAC,YAAY,EAAE,CAAC;QACvC,KAAK,CAAC,CAAC,CAAC,GAAG,uBAAa,CAAC,QAAQ,EAAE,CAAC;QACpC,qBAAW,CAAC,QAAQ,EAAE,CAAC;QACvB,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,iBAAiB,CAAC,CAAC;QAC/C,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,gBAAgB,CAAC,CAAC;QAE9C,IAAI,qBAAW,CAAC,SAAS,IAAI,CAAC,EAAE;YAC5B,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,YAAY,CAAC,CAAA;SAC5C;QAED,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,YAAY,CAAC,CAAC;QAC1C,IAAI,CAAC,aAAa,EAAE,CAAC;IACzB,CAAC;IAED,uCAAa,GAAb;QACI,iBAAM,KAAK,WAAE,CAAC;IAClB,CAAC;IAED,uCAAa,GAAb;QACI,IAAI,CAAC,GAAG,IAAI,CAAC,KAAK,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;QACtD,OAAO,CAAC,CAAC;IACb,CAAC;IAjFD;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;kDACI;IAGvB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACK;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;mDACK;IAExB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;qDACO;IAE1B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;qDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACI;IAbL,eAAe;QADnC,OAAO;OACa,eAAe,CAsFnC;IAAD,sBAAC;CAtFD,AAsFC,CAtF4C,mBAAS,GAsFrD;kBAtFoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport BasePanel from \"../../../framework/ui/BasePanel\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n\r\n@ccclass\r\nexport default class OrderRewardView extends BasePanel {\r\n    @property(cc.Label)\r\n    addLb: cc.Label = null;\r\n\r\n    @property(cc.Label)\r\n    descLb: cc.Label = null;\r\n    @property(cc.Label)\r\n    baseLb: cc.Label = null;\r\n    @property(cc.Label)\r\n    rewardLb: cc.Label = null;\r\n    @property(cc.Node)\r\n    btnClose: cc.Node = null;\r\n    @property(cc.Node)\r\n    btnOk: cc.Node = null;\r\n\r\n\r\n    qualityNames = [\"普通订单\", \"青铜订单\", \"白银订单\", \"黄金订单\", \"钻石订单\", \"星耀订单\"]\r\n    // LIFE-CYCLE CALLBACKS:\r\n    mType = 0;//面板类型，0除虫奖励，1宝箱奖励\r\n    mData;\r\n    mData2;\r\n    onLoad() {\r\n\r\n    }\r\n\r\n    protected onEnable(): void {\r\n        // 关闭面板\r\n        EventDispath.on(this.btnClose, this.onCloseHandle, this);\r\n        EventDispath.on(this.btnOk, this.onClickHandle, this);\r\n\r\n        this.initUi();\r\n\r\n        if (PlayerModel.guideStep >= 0) {\r\n            MKUtils.setNodeDelay(this.node, 0.5, () => {\r\n                EventDispath.send(EventType.GUIDE_UPDATE)\r\n\r\n            })\r\n        }\r\n    }\r\n\r\n    startShow(): void {\r\n        this.mData = this.inData[0];\r\n        this.mData2 = this.inData[1];\r\n    }\r\n    initUi() {\r\n        this.rewardLb.string = Number(this.mData.redBean).toFixed(2) + \"元\";\r\n\r\n        // this.addLb.string = this.mData.addRedBean + \"元\";\r\n        if (this.mData2.quality == 0) {\r\n            this.baseLb.string = \"20元\";\r\n            this.descLb.string = \"新手订单加成 (0%)：\";\r\n            this.addLb.string = \"0元\";\r\n\r\n        } else {\r\n            this.baseLb.string = this.mData.beseRedBean + \"元\";\r\n            this.addLb.string = this.mData.addRedBean + \"元\";\r\n\r\n            this.descLb.string = this.qualityNames[this.mData2.quality - 1] + \"加成 (\" + ConfigManager.order_quality_add[this.mData2.quality - 1] + \"%)：\";\r\n        }\r\n    }\r\n    onClickHandle() {\r\n        PlayerModel.setMoney(this.mData.userRedBean, this.mData.redBean);\r\n        let order = PlayerModel.getOrderList();\r\n        order[0] = ConfigManager.getOrder();\r\n        PlayerModel.setOrder();\r\n        EventDispath.send(EventType.ORDER_UPDATE_LIST);\r\n        EventDispath.send(EventType.ORDER_UPDATE_TOP);\r\n\r\n        if (PlayerModel.guideStep >= 0) {\r\n            EventDispath.send(EventType.GUIDE_UPDATE)\r\n        }\r\n\r\n        EventDispath.send(EventType.LEVEL_UPDATE);\r\n        this.onCloseHandle();\r\n    }\r\n\r\n    onCloseHandle() {\r\n        super.close();\r\n    }\r\n\r\n    getGuidePoint() {\r\n        let p = this.btnOk.convertToWorldSpaceAR(cc.v2(0, 0));\r\n        return p;\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}
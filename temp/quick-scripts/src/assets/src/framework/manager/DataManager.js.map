{"version":3,"sources":["assets/src/framework/manager/DataManager.ts"],"names":[],"mappings":";;;;;;AAAA,2DAAsD;AAEtD;IAAA;QACU,gBAAW,GAAQ,EAAE,CAAC;QACvB,kBAAa,GAAW,CAAC,CAAC;QAEzB,eAAU,GAAW,oBAAU,CAAC,iBAAiB,CAAC;IAgD5D,CAAC;IA/CQ,uBAAW,GAAlB;QACE,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACnB,IAAI,CAAC,SAAS,GAAG,IAAI,WAAW,EAAE,CAAC;SACpC;QACD,OAAO,IAAI,CAAC,SAAS,CAAC;IACxB,CAAC;IAED,0BAAI,GAAJ;QACE,IAAI,CAAC,QAAQ,EAAE,CAAC;IAClB,CAAC;IAED,8BAAQ,GAAR;QAAA,iBAeC;QAdC,IAAI,OAAO,GAAG,SAAS,CAAC;QACxB,IAAI,QAAQ,GAAG;YACb,SAAS;SACV,CAAC;gCACO,CAAC;YACR,IAAI,QAAQ,GAAG,OAAO,GAAG,QAAQ,CAAC,CAAC,CAAC,CAAC;YACrC,EAAE,CAAC,MAAM,CAAC,OAAO,CAAC,QAAQ,EAAE,EAAE,CAAC,SAAS,EAAE,UAAC,KAAK,EAAE,GAAG;gBACnD,IAAI,KAAK,EAAE;oBACT,OAAO,CAAC,KAAK,CAAC,aAAa,EAAE,QAAQ,CAAC,CAAC;oBACvC,OAAO;iBACR;gBACD,KAAI,CAAC,WAAW,CAAC,QAAQ,CAAC,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YACtC,CAAC,CAAC,CAAC;;QARL,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,QAAQ,CAAC,MAAM,EAAE,EAAE,CAAC;oBAA/B,CAAC;SAST;IACH,CAAC;IAED,+BAAS,GAAT,UAAU,KAAa;QACrB,OAAO,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,IAAI,IAAI,CAAC;IACzC,CAAC;IAED,6BAAO,GAAP,UAAQ,KAAa;QACnB,IAAI,MAAM,GAAG,IAAI,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QACnC,IAAI,CAAC,MAAM,EAAE;YACX,OAAO,IAAI,CAAC;SACb;QACD,OAAO,MAAM,CAAC,MAAM,CAAC,CAAC;IACxB,CAAC;IAED,kCAAY,GAAZ,UAAa,KAAa;QACxB,IAAI,CAAC,UAAU,GAAG,KAAK,CAAC;IAC1B,CAAC;IAED,kCAAY,GAAZ;QACE,OAAO,IAAI,CAAC,UAAU,CAAC;IACzB,CAAC;IAhDM,qBAAS,GAAgB,IAAI,CAAC;IAiDvC,kBAAC;CApDD,AAoDC,IAAA;AAAA,CAAC;AACF,kBAAe,WAAW,CAAC,WAAW,EAAE,CAAC","file":"","sourceRoot":"/","sourcesContent":["import EventConst from \"../../game/consts/EventConst\";\n\nclass DataManager {\n  private _configData: any = {};\n  public _barrageIndex: number = 1;\n  static _instance: DataManager = null;\n  private _viewState: number = EventConst.VIEW_STATE_NORMAL;\n  static getInstance() {\n    if (!this._instance) {\n      this._instance = new DataManager();\n    }\n    return this._instance;\n  }\n\n  init() {\n    this.loadJson();\n  }\n\n  loadJson() {\n    let baseUrl = \"config/\";\n    let jsonList = [\n      \"allConf\"\n    ];\n    for (let i = 0; i < jsonList.length; ++i) {\n      let jsonFile = baseUrl + jsonList[i];\n      cc.loader.loadRes(jsonFile, cc.JsonAsset, (error, res) => {\n        if (error) {\n          console.error(\"JSON文件加载失败 \", jsonFile);\n          return;\n        }\n        this._configData[jsonList[i]] = res;\n      });\n    }\n  }\n\n  getConfig(mname: string) {\n    return this._configData[mname] || null;\n  }\n\n  getJson(mname: string) {\n    let config = this.getConfig(mname);\n    if (!config) {\n      return null;\n    }\n    return config[\"json\"];\n  }\n\n  setViewState(state: number) {\n    this._viewState = state;\n  }\n\n  getViewState() {\n    return this._viewState;\n  }\n};\nexport default DataManager.getInstance();"]}
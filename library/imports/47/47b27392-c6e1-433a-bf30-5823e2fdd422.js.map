{"version":3,"sources":["assets/src/game/view/setting/SettingView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import JSHelper from \"../../../framework/helper/JSHelper\";\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport Utils from \"../../../framework/tools/Utils\";\r\nimport BasePanel from \"../../../framework/ui/BasePanel\";\r\nimport Global from \"../../consts/Global\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n/**\r\n * TODO: \r\n * 1、「客服帮助」sdk缺失；\r\n * 2、用户uid数据缺失，待数据来源提供后完善；\r\n * 3、「自定义推荐」sdk缺失；\r\n * 4、「关于我们」sdk缺失；\r\n * 5、经验对应的升级进度概念目前没有相应的数据，待完善；\r\n */\r\n@ccclass\r\nexport default class SettingView extends BasePanel {\r\n\r\n    @property(cc.Node)\r\n    headIcon: cc.Node = null;\r\n    @property(cc.Label)\r\n    nameLabel: cc.Label = null;\r\n    @property(cc.Label)\r\n    idLabel: cc.Label = null;\r\n    @property(cc.Node)\r\n    btn_sound: cc.Node = null;\r\n\r\n    @property(cc.Node)\r\n    uImgSoundStatusOn = null // 音乐开\r\n    @property(cc.Node)\r\n    uImgSoundStatusOff = null// 音乐关\r\n\r\n    @property(cc.Node)\r\n    btn2: (cc.Node) = null;// 音效设置开关\r\n    @property(cc.Node)\r\n    btn2On: cc.Node = null;// 音效开\r\n    @property(cc.Node)\r\n    btn2Off: cc.Node = null;// 音效关\r\n   \r\n\r\n    @property(cc.Node)\r\n    btn_user: (cc.Node) = null; // 用户协议\r\n    @property(cc.Node)\r\n    btn_privacy: (cc.Node) = null;// 隐私政策\r\n    @property(cc.Node)\r\n    btn_restart: (cc.Node) = null;// 注销\r\n    @property(cc.Node)\r\n    btn_close: (cc.Node) = null;// 关闭面板\r\n\r\n\r\n    onEnable(): void {\r\n        // 背景音\r\n        EventDispath.on(this.btn_sound, this.onBtnSoundHandle, this);\r\n        // 音效\r\n        EventDispath.on(this.btn2, this.onBtnSoundYinXiao, this);\r\n\r\n        // 用户协议\r\n        EventDispath.on(this.btn_user, this.onBtnUserHandle, this);\r\n        // 隐私政策\r\n        EventDispath.on(this.btn_privacy, this.onBtnPrivacyHandle, this);\r\n        // 客服帮助\r\n        // EventDispath.on(this.btn_helper, this.onBtnHelper, this);\r\n        // // 关于我们\r\n        // EventDispath.on(this.btn_ours, this.onBtnAboutOurs, this);\r\n        // 注销\r\n        EventDispath.on(this.btn_restart, this.onBtnRestartHandle, this);\r\n        // 退出登录\r\n        // EventDispath.on(this.btn_quit, this.onBtnQuitHandle, this);\r\n        // 关闭面板\r\n        EventDispath.on(this.btn_close, this.onBtnCloseHandle, this);\r\n        this.initUI();\r\n    }\r\n    onDisable(): void {\r\n    }\r\n\r\n    startShow() {\r\n    }\r\n    initUI() {\r\n\r\n        let headUrl = SDKManager.getUserIcon();\r\n        if (headUrl && headUrl != \"\") {\r\n            let self = this;\r\n            cc.assetManager.loadRemote(headUrl, { ext: '.png' }, function (err, texture:cc.Texture2D) {\r\n                if (err) {\r\n                    console.log(\"头像加载失败\", headUrl);\r\n                    return;\r\n                }\r\n                self.headIcon.getComponent(cc.Sprite).spriteFrame = new cc.SpriteFrame(texture);\r\n            });\r\n        }\r\n        let userName = SDKManager.getUserNickName();\r\n        if (!Utils.isUndefined(userName) && userName !=\"\") {\r\n            this.nameLabel.string = userName;\r\n        } else {\r\n            this.nameLabel.string = \"游客\";\r\n        }\r\n\r\n        this.idLabel.string = \"ID:\"+SDKManager.getDeviceId();\r\n\r\n        this.refreshBtnSoundState();\r\n        this.refreshBtnSoundYinXiaoState();\r\n        this.refreshPersonalRecommendationState();\r\n    }\r\n\r\n    refreshBtnSoundState() {\r\n        let result = \"\";\r\n        if (PlayerModel.getSoundSwitch() == Global.SOUND_SWITCH_OPEN) {\r\n            this.uImgSoundStatusOff.active = true;\r\n            this.uImgSoundStatusOn.active = false;\r\n        } else {\r\n            this.uImgSoundStatusOff.active = false;\r\n            this.uImgSoundStatusOn.active = true;\r\n        }\r\n    }\r\n\r\n    refreshBtnSoundYinXiaoState(): void {\r\n        let result = \"\"\r\n        if (PlayerModel.getSoundYinXiaoSwitch() == Global.SOUND_YINXIAO_SWITCH_OPEN) {\r\n            this.btn2Off.active = false;\r\n            this.btn2On.active = true;\r\n        } else {\r\n            this.btn2Off.active = true;\r\n            this.btn2On.active = false;\r\n        }\r\n    }\r\n\r\n    /** 设置背景音乐 */\r\n    onBtnSoundHandle() {\r\n\r\n        let soundResult = PlayerModel.getSoundSwitch() == Global.SOUND_SWITCH_OPEN ? Global.SOUND_SWITCH_CLOSE : Global.SOUND_SWITCH_OPEN;\r\n        PlayerModel.setSoundSwitch(soundResult);\r\n        this.refreshBtnSoundState();\r\n\r\n        if (PlayerModel.getSoundSwitch() == Global.SOUND_SWITCH_OPEN) {\r\n            if (JSHelper.getLastMusic()) {\r\n                JSHelper.setResumeMusic();\r\n            } else {\r\n                JSHelper.playMisuc(\"bgm\");\r\n            }\r\n        } else {\r\n            JSHelper.setPauseMusic();\r\n        }\r\n    }\r\n\r\n    /** 设置音效 */\r\n    onBtnSoundYinXiao(): void {\r\n        let soundYinXiaoResult = PlayerModel.getSoundYinXiaoSwitch() == Global.SOUND_YINXIAO_SWITCH_OPEN ? Global.SOUND_YINXIAO_SWITCH_CLOSE : Global.SOUND_YINXIAO_SWITCH_OPEN;\r\n        PlayerModel.setSoundYinXiaoSwitch(soundYinXiaoResult);\r\n        this.refreshBtnSoundYinXiaoState();\r\n    }\r\n\r\n    /** 个性推荐  */\r\n    onBtnPersonalRecommendation(): void {\r\n        let personalRecommResult = PlayerModel.getPersonRecommSwitch() == Global.PERSONALRECOMM_SWITCH_OPEN ? Global.PERSONALRECOMM_SWITCH_OFF : Global.PERSONALRECOMM_SWITCH_OPEN;\r\n        PlayerModel.SetPersonRecommSwitch(personalRecommResult);\r\n        this.refreshPersonalRecommendationState();\r\n    }\r\n\r\n    /** 刷新个性推荐状态  */\r\n    refreshPersonalRecommendationState(): void {\r\n        let result = \"\";\r\n        if (PlayerModel.getPersonRecommSwitch() == Global.PERSONALRECOMM_SWITCH_OPEN) {\r\n        } else {\r\n        }\r\n    }\r\n\r\n    onBtnUserHandle() {\r\n        SDKManager.openUserService();\r\n    }\r\n    onBtnPrivacyHandle() {\r\n        SDKManager.openPrivacy();\r\n    }\r\n    onBtnRestartHandle() {\r\n        SDKManager.unBindWX();\r\n    }\r\n    onBtnQuitHandle() {\r\n        SDKManager.unBindWX();\r\n    }\r\n    /** 客服帮助 */\r\n    onBtnHelper(): void {\r\n        SDKManager.openFeedBack()\r\n    }\r\n    /** 关于我们 */\r\n    onBtnAboutOurs(): void {\r\n    }\r\n    onBtnCloseHandle() {\r\n        super.close();\r\n    }\r\n}\r\n"]}
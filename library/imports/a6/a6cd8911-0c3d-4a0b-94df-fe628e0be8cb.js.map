{"version":3,"sources":["assets/src/game/view/task/TaskItem.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport { UIEffectType } from \"../../../framework/manager/UIEffectManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport ComponentHelper from \"../../../framework/tools/ComponentHelper\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport Global from \"../../consts/Global\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport AItemRenderer from \"./AItemRenerer\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n@ccclass\r\nexport default class TaskItem extends AItemRenderer<string> {\r\n\r\n    @property(cc.Node)\r\n    btn1: cc.Node = null;\r\n    @property(cc.Node)\r\n    btn2: cc.Node = null;\r\n    @property(cc.Label)\r\n    descLb: cc.Label = null;\r\n    @property(cc.Label)\r\n    rewardLb: cc.Label = null;\r\n    @property(cc.Sprite)\r\n    taskIcon: cc.Sprite = null;\r\n    @property(cc.Sprite)\r\n    icon: cc.Sprite = null;\r\n    @property([cc.SpriteFrame])\r\n    frameList: cc.SpriteFrame[] = [];\r\n    // onLoad () {}\r\n\r\n    start() {\r\n\r\n    }\r\n\r\n    protected dataChanged(): void {\r\n        console.log(this.data);\r\n        this.initUI();\r\n    }\r\n    initUI() {\r\n        this.btn1.active = this.btn2.active = false;\r\n        this.descLb.string = this.data.info + \"(\" + this.data.userTimes + \"/\" + this.data.times + \")\";\r\n        if (this.index == 0) {\r\n            this.rewardLb.string = \"少量红包\"\r\n        } else if (this.index == 1) {\r\n            this.rewardLb.string = \"少量钞票\"\r\n        } else if (this.index == 2) {\r\n            this.rewardLb.string = \"随机作物 ×3\"\r\n        }\r\n\r\n        this.taskIcon.spriteFrame = this.frameList[this.index];\r\n        this.icon.spriteFrame = this.frameList[this.index];\r\n\r\n        if (this.data.userTimes >= this.data.times) {\r\n            this.btn1.active = true;\r\n        } else {\r\n            this.btn2.active = true;\r\n        }\r\n    }\r\n\r\n    onGet() {\r\n\r\n        EventDispath.addEventListener(EventType.TASK_COMPLETE_BACK, this.onVideoBack, this);\r\n        SDKManager.toFinishTask(this.data.taskId);\r\n\r\n    }\r\n    onVideoBack(data) {\r\n        EventDispath.removeByEvent(EventType.TASK_COMPLETE_BACK, this.onVideoBack, this);\r\n        let xfzs = 3;\r\n        if (this.data.taskId == 1) {\r\n            UIMananger.showPanel(UIType.taskRewardView, null, null, UIEffectType.SCALE, { taskId: this.data.taskId, redBean: data.redBean, userRedBean: data.userRedBean,xfzs:xfzs })\r\n\r\n        } else if (this.data.taskId == 2) {\r\n            let gold = MKUtils.randomNM(300,500)\r\n            UIMananger.showPanel(UIType.taskRewardView, null, null, UIEffectType.SCALE, { taskId: this.data.taskId, gold: gold,xfzs:xfzs })\r\n        } else if (this.data.taskId == 3) {\r\n            \r\n            UIMananger.showPanel(UIType.taskRewardView, null, null, UIEffectType.SCALE, { taskId: this.data.taskId, cropId: 1,xfzs:xfzs })\r\n        }\r\n        \r\n        EventDispath.send(EventType.TASK_UPDATE);\r\n    }\r\n}\r\n"]}
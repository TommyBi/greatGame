{"version":3,"sources":["assets/src/game/view/main/TopOrderPrefab.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport { UIEffectType } from \"../../../framework/manager/UIEffectManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport ComponentHelper from \"../../../framework/tools/ComponentHelper\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport TopOrderItem from \"./TopOrderItem\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class TopOrderPrefab extends cc.Component {\r\n\r\n    @property(cc.Label)\r\n    numLb: cc.Label = null;\r\n    @property(cc.Node)\r\n    right: cc.Node = null;\r\n    @property(cc.Node)\r\n    itemGp: cc.Node = null;\r\n    @property(cc.Node)\r\n    nullGp: cc.Node = null;\r\n    @property(cc.Node)\r\n    tips1: cc.Node = null;\r\n    @property(cc.Node)\r\n    tips2: cc.Node = null;\r\n    @property(cc.Node)\r\n    shou: cc.Node = null;\r\n    @property(cc.Prefab)\r\n    item: cc.Prefab = null;\r\n\r\n    mData;\r\n    // LIFE-CYCLE CALLBACKS:\r\n    isComplete = false;\r\n    onLoad() {\r\n\r\n    }\r\n    protected onEnable(): void {\r\n        EventDispath.addEventListener(EventType.ORDER_CLOSE, this.init, this);\r\n        EventDispath.addEventListener(EventType.ORDER_UPDATE_TOP, this.onUpdate, this);\r\n\r\n        EventDispath.addEventListener(EventType.ORDER_COMPLETE_UPDATE, this.onComplete, this)\r\n        this.init();\r\n        if (PlayerModel.checkOrderComplete()) {\r\n            this.onComplete();\r\n        }\r\n    }\r\n    onUpdate() {\r\n        this.init();\r\n    }\r\n    openOrderHbView() {\r\n        if (PlayerModel.guideStep >= 0) {\r\n            EventDispath.send(EventType.GUIDE_Hide);\r\n        }\r\n        if (PlayerModel.checkOrderComplete()) {\r\n            UIMananger.showPanel(UIType.orderSuccessView)\r\n        } else {\r\n            UIMananger.showPanel(UIType.orderCurrentView, null, null, UIEffectType.SCALE, this.mData)\r\n        }\r\n    }\r\n    resetUi() {\r\n        this.right.angle = 0;\r\n        this.right.stopAllActions();\r\n        this.nullGp.active = false;\r\n        this.right.active = false;\r\n        this.itemGp.active = false;\r\n        this.numLb.node.active = false;\r\n        this.tips1.active = false;\r\n        this.tips2.active = false;\r\n    }\r\n    openOrderView() {\r\n        // if (PlayerModel.guideStep == 12) return;\r\n        if (PlayerModel.guideStep >= 0) {\r\n            EventDispath.send(EventType.GUIDE_Hide);\r\n        }\r\n        let list = PlayerModel.getOrderList();\r\n        UIMananger.showPanel(UIType.orderView, null, null, UIEffectType.SCALE, list);\r\n    }\r\n\r\n    init() {\r\n\r\n        this.resetUi()\r\n        this.mData = PlayerModel.getCurrentOrder();\r\n        if (this.mData) {\r\n            this.shou.stopAllActions();\r\n            this.right.active = true;\r\n            this.itemGp.active = true;\r\n            this.numLb.node.active = true;\r\n\r\n            if (this.mData.quality == 0) this.numLb.string = \"无加成\";\r\n            else if (this.mData.quality == 1) {\r\n                this.numLb.string = \"无加成\";\r\n            } else {\r\n                this.numLb.string = \"+\" + ConfigManager.order_quality_add[this.mData.quality - 1] + \"%\";\r\n\r\n            }\r\n            this.tips1.active = true;\r\n\r\n            this.changeItem();\r\n            // let list = \r\n        } else {\r\n            this.tips2.active = true;\r\n            this.nullGp.active = true;\r\n            ComponentHelper.setHeartAction(this.shou, 0.7, false, 1.1);\r\n        }\r\n\r\n        if (PlayerModel.checkOrderComplete()) {\r\n            this.onComplete();\r\n        }\r\n\r\n    }\r\n    //订单完成，晃动\r\n    onComplete() {\r\n        this.right.stopAllActions();\r\n        ComponentHelper.setRotation(this.right)\r\n    }\r\n\r\n    changeItem() {\r\n        this.itemGp.removeAllChildren();\r\n        let list = this.mData.cropList;\r\n        for (let i = 0; i < list.length; i++) {\r\n            let item = cc.instantiate(this.item);\r\n            this.itemGp.addChild(item);\r\n            item.getComponent(TopOrderItem).setData(list[i]);\r\n        }\r\n    }\r\n\r\n    // update (dt) {}\r\n}\r\n"]}
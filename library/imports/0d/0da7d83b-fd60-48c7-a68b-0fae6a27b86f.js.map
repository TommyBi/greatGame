{"version":3,"sources":["assets/src/game/manager/ConfigManager.ts"],"names":[],"mappings":";;;;;;AAAA,uEAAkE;AAClE,wDAAmD;AACnD,oDAA+C;AAC/C,+DAA0D;AAC1D,2CAA0C;AAC1C,qDAAgD;AAChD,2CAAsC;AACtC,2CAA0H;AAC1H,iEAA4D;AAC5D,yDAAoD;AAEpD;IAAA;QAIW,aAAQ,GAAW,EAAE,CAAC,CAAA,YAAY;QACzC,gBAAW,GAAG,CAAC,CAAC;QAEhB,qBAAgB,GAAG,CAAC,CAAC,CAAA,aAAa;QAClC,gBAAW,GAAG,EAAE,CAAC,CAAA,UAAU;QAC3B,yBAAoB,GAAG,CAAC,CAAC,CAAA,MAAM;QAC/B,sBAAiB,GAAG,CAAC,CAAC,CAAA,OAAO;QAC7B,mBAAc,GAAG,GAAG,CAAC,CAAA,WAAW;QAEhC,yBAAoB,GAAG,CAAC,CAAC,CAAA,UAAU;QACnC,qBAAgB,GAAG,GAAG,CAAC,CAAA,UAAU;QACjC,oBAAe,GAAG,CAAC,CAAC,CAAA,QAAQ;QAE5B,qBAAgB,GAAG,CAAC,CAAC,CAAA,cAAc;QAEnC,sBAAiB,GAAG,CAAC,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAC,CAAC;IAgUhD,CAAC;IAtTU,sBAAQ,GAAf;QACI,IAAI,CAAC,IAAI,CAAC,SAAS,EAAE;YACjB,IAAI,CAAC,SAAS,GAAG,IAAI,aAAa,EAAE,CAAC;SACxC;QACD,OAAO,IAAI,CAAC,SAAS,CAAC;IAC1B,CAAC;IAED,4BAAI,GAAJ;QAAA,iBAeC;QAdG,uBAAa,CAAC,UAAU,CAAC,SAAS,EAAE,iBAAO,CAAC,MAAM,CAAC,UAAC,GAAG;YACnD,KAAI,CAAC,SAAS,GAAG,GAAG,CAAC,IAAI,CAAC;YAC1B,OAAO,CAAC,GAAG,CAAC,OAAO,EAAE,KAAI,CAAC,SAAS,CAAC,CAAC;YACrC,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,WAAW,CAAC,CAAC;YACxC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACrC,KAAI,CAAC,OAAO,GAAG,KAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;YACzC,KAAI,CAAC,IAAI,GAAG,KAAI,CAAC,SAAS,CAAC,MAAM,CAAC,CAAC;YACnC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACrC,KAAI,CAAC,KAAK,GAAG,KAAI,CAAC,SAAS,CAAC,OAAO,CAAC,CAAC;YACrC,KAAI,CAAC,YAAY,GAAG,KAAI,CAAC,SAAS,CAAC,cAAc,CAAC,CAAC;YAEnD,mBAAS,CAAC,QAAQ,CAAC,iBAAO,CAAC,cAAc,CAAC,CAAC;QAE/C,CAAC,EAAE,IAAI,CAAC,EAAE,QAAQ,CAAC,CAAC;IACxB,CAAC;IAEM,uCAAe,GAAtB,UAAuB,IAAI,EAAE,eAAe,EAAE,QAAkB,EAAE,WAAW,EAAE,IAAa,EAAE,OAAiB;QAA/G,iBA2CC;QA1CG,IAAI,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,EAAE;YACrB,QAAQ,EAAE,CAAA;YACV,OAAM;SACT;QAED,IAAI,WAAW,EAAE;YACb,IAAI,CAAC,WAAW,GAAG,eAAe,CAAC,MAAM,CAAA;YACzC,uDAAuD;YACvD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,eAAe,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;gBAC7C,uBAAa,CAAC,UAAU,CAAC,eAAe,CAAC,CAAC,CAAC,EAAE,iBAAO,CAAC,MAAM,CAAC,UAAC,GAAG;oBAC5D,KAAI,CAAC,WAAW,EAAE,CAAA;oBAClB,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;wBACvB,QAAQ,EAAE,CAAA;qBACb;gBACL,CAAC,EAAE,IAAI,CAAC,EAAE,QAAQ,CAAC,CAAA;aACtB;SACJ;aAAM;YACH,IAAI,OAAO,GAAG,gBAAM,CAAC,eAAe,GAAG,IAAI,GAAG,MAAM,CAAA;YACpD,IAAI,IAAI,EAAE;gBACN,OAAO,GAAG,IAAI,GAAG,IAAI,GAAG,MAAM,CAAA;aACjC;YAED,sFAAsF;YACtF,0CAA0C;YAC1C,qEAAqE;YACrE,8DAA8D;YAC9D,yDAAyD;YACzD,kEAAkE;YAClE,gDAAgD;YAChD,4EAA4E;YAE5E,mDAAmD;YACnD,4DAA4D;YAC5D,yBAAyB;YACzB,YAAY;YACZ,QAAQ;YACR,8BAA8B;YAC9B,oBAAoB;YACpB,4BAA4B;YAC5B,0GAA0G;YAC1G,gBAAgB;SACnB;IACL,CAAC;IAED,oCAAY,GAAZ;QACI,IAAI,SAAS,GAAG,EAAE,CAAC;QACnB,IAAI,GAAG,GAAG,qBAAW,CAAC,QAAQ,CAAC;QAC/B,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAK,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;QACxD,IAAI,gBAAM,CAAC,eAAe,EAAE;YACxB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAK,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;SACrD;QAED,IAAI,oBAAU,CAAC,iBAAiB,EAAE,EAAE;YAChC,iCAAiC;YACjC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACzB,SAAS,CAAC,IAAI,CAAC;gBACX,EAAE,EAAE,IAAI,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;gBAC5C,OAAO,EAAE,IAAI,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE;oBACvC,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE;oBACjD,EAAE,MAAM,EAAE,IAAI,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE,CAAC,EAAE;iBACpD;aACJ,CAAC,CAAA;YACF,GAAG,GAAG,qBAAW,CAAC,QAAQ,GAAG,CAAC,CAAC;SAClC;QACD,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,GAAG,EAAE,CAAC,EAAE,EAAE;YAC1B,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;YAC3C,IAAI,KAAK,GAAG;gBACR,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC,GAAG,CAAC;gBACjD,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE;oBACxC,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;oBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;oBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;oBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;iBAC7E;aACJ,CAAA;YACD,0CAA0C;YAC1C,qBAAqB;YACrB,uDAAuD;YACvD,yBAAyB;YACzB,IAAI;YACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;YAClC,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzB;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,GAAG,qBAAW,CAAC,QAAQ,EAAE,CAAC,EAAE,EAAE;YAC/C,IAAI,KAAK,GAAG;gBACR,EAAE,EAAE,CAAC,CAAC,EAAE,MAAM,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,CAAC,EAAE,KAAK,EAAE,CAAC,GAAG,GAAG;gBAC/C,OAAO,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE,EAC/B;aACJ,CAAA;YACD,SAAS,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;SACzB;QACD,OAAO,SAAS,CAAC;IAErB,CAAC;IACD,gCAAQ,GAAR;QACI,IAAI,QAAQ,GAAG,IAAI,CAAC,aAAa,EAAE,CAAC;QACpC,IAAI,KAAK,GAAG,IAAI,CAAC,eAAe,CAAC,QAAQ,CAAC,CAAC;QAC3C,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAK,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,GAAG,IAAI,CAAC;QACxD,IAAI,gBAAM,CAAC,eAAe,EAAE;YACxB,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,eAAK,CAAC,UAAU,EAAE,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;SACrD;QACD,IAAI,KAAK,GAAG;YACR,EAAE,EAAE,KAAK,CAAC,EAAE,EAAE,MAAM,EAAE,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,KAAK,EAAE,CAAC;YAC7C,OAAO,EAAE,KAAK,CAAC,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,QAAQ,EAAE;gBACxC,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;gBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;gBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;gBAC1E,EAAE,MAAM,EAAE,KAAK,CAAC,KAAK,EAAE,MAAM,EAAE,IAAI,CAAC,gBAAgB,CAAC,KAAK,CAAC,IAAI,CAAC,EAAE,GAAG,EAAE,CAAC,EAAE;aAC7E;SACJ,CAAA;QACD,0CAA0C;QAC1C,qBAAqB;QACrB,uDAAuD;QACvD,yBAAyB;QACzB,IAAI;QACJ,IAAI,CAAC,YAAY,CAAC,KAAK,CAAC,QAAQ,CAAC,CAAC;QAClC,OAAO,KAAK,CAAC;IACjB,CAAC;IACD,EAAE;IACF,wCAAgB,GAAhB,UAAiB,GAAG;QAChB,IAAI,IAAI,GAAG,oBAAU,CAAC,gBAAgB,EAAE,CAAC;QACzC,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,CAAC,GAAG,GAAG,IAAI,CAAC,GAAG,GAAG,CAAC,CAAC;QAC1C,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,oCAAY,GAAZ,UAAa,GAAU;QACnB,GAAG,CAAC,IAAI,CAAC,UAAC,CAAC,EAAE,CAAC;YACV,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,MAAM,CAAC;QAC/B,CAAC,CAAC,CAAA;IACN,CAAC;IACD,uCAAe,GAAf,UAAgB,KAAK;QACjB,IAAI,KAAK,GAAG,CAAC,CAAC;QACd,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACxB,KAAK,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;SAC5B;QACD,IAAI,MAAM,GAAG,iBAAO,CAAC,SAAS,CAAC,CAAC,EAAE,KAAK,CAAC,CAAC;QACzC,IAAI,UAAU,GAAG,CAAC,CAAC;QACnB,IAAI,OAAO,GAAG,CAAC,CAAC;QAChB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC,EAAE,EAAE;YACxB,UAAU,IAAI,KAAK,CAAC,IAAI,GAAG,CAAC,CAAC,CAAC;YAC9B,IAAI,MAAM,GAAG,UAAU,EAAE;gBACrB,OAAO,GAAG,CAAC,CAAC;gBACZ,MAAM;aACT;SACJ;QACD,IAAI,SAAS,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAA;QACnC,IAAI,GAAG,GAAG,SAAS,CAAC,MAAM,CAAC,UAAC,KAAK,EAAE,KAAK;YACpC,OAAO,KAAK,CAAC,OAAO,IAAI,OAAO,CAAC;QACpC,CAAC,CAAC,CAAA;QAEF,IAAI,KAAK,GAAG,eAAK,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;QACtC,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,cAAc;IACd,qCAAa,GAAb;QACI,IAAI,OAAO,GAAG,IAAI,CAAC,YAAY,CAAC;QAChC,IAAI,IAAI,GAAG,qBAAW,CAAC,OAAO,EAAE,CAAC;QACjC,IAAI,GAAwB,CAAC;QAC7B,IAAI,IAAI,IAAI,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,KAAK,EAAE;YAC3C,OAAO,OAAO,CAAC,OAAO,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SACtC;QACD,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,OAAO,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACrC,IAAI,IAAI,GAAG,OAAO,CAAC,CAAC,CAAC,CAAC,KAAK,EAAE;gBACzB,GAAG,GAAG,OAAO,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;gBACrB,MAAM;aACT;SACJ;QACD,OAAO,GAAG,CAAC;IACf,CAAC;IAED,MAAM;IACN,mCAAW,GAAX,UAAY,IAAI,EAAE,KAAK;QACnB,IAAI,MAAM,GAAG,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,IAAI;YAC5B,OAAO,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IACD,oCAAY,GAAZ,UAAa,IAAI;QACb,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,IAAI;YAC5B,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,MAAM,CAAC;IACtB,CAAC;IACD,cAAc;IACd,kCAAU,GAAV;QACI,IAAI,MAAM,GAAG,iBAAQ,CAAC,IAAI,GAAG,GAAG,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;QACpE,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,IAAI;YAC5B,OAAO,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAA;IACzB,CAAC;IAED;;;;OAIG;IACH,yCAAiB,GAAjB,UAAkB,IAAI,EAAE,KAAK;QACzB,IAAI,MAAM,GAAG,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAI;YAC7B,OAAO,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IACD,qCAAa,GAAb,UAAc,IAAI;QACd,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,IAAI;YAC7B,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,MAAM,CAAC;IACtB,CAAC;IACD;;;OAGG;IACH,uCAAe,GAAf,UAAgB,IAAI,EAAE,KAAK;QACvB,IAAI,MAAM,GAAG,IAAI,GAAG,GAAG,GAAG,KAAK,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAC,IAAI;YAC/B,OAAO,IAAI,CAAC,EAAE,IAAI,MAAM,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IACD,sCAAc,GAAd,UAAe,IAAI;QACf,IAAI,GAAG,GAAG,IAAI,CAAC,OAAO,CAAC,MAAM,CAAC,UAAC,IAAI;YAC/B,OAAO,IAAI,CAAC,IAAI,IAAI,IAAI,CAAC;QAC7B,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,MAAM,CAAC;IACtB,CAAC;IACD,eAAe;IACf,mCAAW,GAAX,UAAY,EAAU;QAClB,OAAO,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAA,CAAC;YACrB,OAAO,EAAE,IAAI,CAAC,CAAC,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;IACV,CAAC;IACD,eAAe;IACf,qCAAa,GAAb;QACI,IAAI,EAAE,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,SAAS,CAAC;QAC7C,IAAI,EAAE,GAAG,MAAM,CAAC,iBAAQ,CAAC,OAAO,GAAG,GAAG,GAAG,EAAE,CAAC,CAAC;QAC7C,IAAI,GAAG,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,CAAC,UAAC,IAAI;YAC5B,OAAO,IAAI,CAAC,EAAE,IAAI,EAAE,CAAC;QACzB,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,OAAO,CAAC;IAC1B,CAAC;IACD,UAAU;IACV,uCAAe,GAAf;QACI,IAAI,EAAE,GAAG,qBAAW,CAAC,QAAQ,EAAE,CAAC;QAChC,IAAI,GAAG,GAAG,IAAI,CAAC,KAAK,CAAC,MAAM,CAAC,UAAC,GAAG;YAC5B,OAAO,GAAG,CAAC,KAAK,IAAI,EAAE,CAAC;QAC3B,CAAC,CAAC,CAAA;QACF,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC;IACD;;;;;OAKG;IACH,mCAAW,GAAX,UAAY,EAAE,EAAE,GAAG;QACf,IAAI,MAAM,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;QAC1B,IAAI,GAAG,CAAC;QACR,IAAI,MAAM,CAAC;QACX,KAAK,IAAI,MAAM,IAAI,MAAM,EAAE;YACvB,IAAI,KAAK,GAAG,MAAM,CAAC,KAAK,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;YAC/B,IAAI,KAAK,IAAI,OAAO;gBAAE,SAAS;YAC/B,IAAI,CAAC,MAAM;gBAAE,MAAM,GAAG,MAAM,CAAC;YAC7B,IAAI,GAAG,IAAI,MAAM,CAAC,MAAM,CAAC,EAAE;gBACvB,GAAG,GAAG,MAAM,CAAC;gBACb,MAAM;aACT;YACD,MAAM,GAAG,MAAM,CAAC;SACnB;QAED,IAAI,CAAC,GAAG;YAAE,GAAG,GAAG,MAAM,CAAC;QAEvB,IAAI,OAAoB,CAAC;QACzB,KAAK,IAAI,CAAC,GAAG,CAAC,EAAE,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,MAAM,EAAE,CAAC,EAAE,EAAE;YACvC,IAAI,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,EAAE,IAAI,EAAE,EAAE;gBACvB,OAAO,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;aAC1B;SACJ;QAED,OAAO,OAAO,CAAC,GAAG,CAAC,CAAC;IAExB,CAAC;IACL,oBAAC;AAAD,CAnVA,AAmVC,IAAA;AAED,kBAAe,aAAa,CAAC,QAAQ,EAAE,CAAC","file":"","sourceRoot":"/","sourcesContent":["import LoaderManager from \"../../framework/manager/LoaderManager\";\r\nimport Handler from \"../../framework/base/Handler\";\r\nimport PlayerModel from \"../datas/PlayerModel\";\r\nimport NResponer from \"../../framework/message/NResponer\";\r\nimport { Message } from \"../view/Message\";\r\nimport Utils from \"../../framework/tools/Utils\";\r\nimport Global from \"../consts/Global\";\r\nimport { crop_config, levelUp_config, level_config, order_config, order_weight_config, propType } from \"../consts/CConst\";\r\nimport SDKManager from \"../../framework/manager/SDKManager\";\r\nimport MKUtils from \"../../framework/tools/MkUtils\";\r\n\r\nclass ConfigManager {\r\n    private static _instance: ConfigManager;\r\n\r\n    private allConfig: any;\r\n    public gameJson: object = {};//单个游戏json配置\r\n    jsonLoadNum = 0;\r\n\r\n    cashier_interval = 5;//收银台间隔几秒产出一次\r\n    cashier_one = 10;//收银台间一次产出\r\n    cashier_add_multiple = 3;//加速倍数\r\n    cashier_add_times = 3;//加速分钟数\r\n    add_speed_gold = 300;//作物加速所需钞票数\r\n\r\n    crop_maxGet_interval = 6;//判定高产间隔次数\r\n    crop_maxGet_rate = 0.6;//每次判定高产概率\r\n    crop_maxGet_num = 5;//高产作物数量\r\n\r\n    hard_hb_interval = 9;//辛苦红包收获作物数量间隔\r\n\r\n    order_quality_add = [0, 10, 25, 40, 60, 80];\r\n\r\n    crop: crop_config[];\r\n    field: levelUp_config[];\r\n    shelves: levelUp_config[];\r\n    prop: levelUp_config[];\r\n    level: level_config[];\r\n    order: order_config[];\r\n    order_weight: order_weight_config[];\r\n\r\n    static instance() {\r\n        if (!this._instance) {\r\n            this._instance = new ConfigManager();\r\n        }\r\n        return this._instance;\r\n    }\r\n\r\n    init() {\r\n        LoaderManager.loaderJson('allConf', Handler.create((res) => {\r\n            this.allConfig = res.json;\r\n            console.log(\"配置文件：\", this.allConfig);\r\n            this.crop = this.allConfig[\"crop_time\"];\r\n            this.field = this.allConfig[\"field\"];\r\n            this.shelves = this.allConfig[\"shelves\"];\r\n            this.prop = this.allConfig[\"prop\"];\r\n            this.level = this.allConfig[\"level\"];\r\n            this.order = this.allConfig[\"order\"];\r\n            this.order_weight = this.allConfig[\"order_weight\"];\r\n\r\n            NResponer.dispatch(Message.configComplete);\r\n\r\n        }, this), 'config');\r\n    }\r\n\r\n    public loadGameZipJson(name, jsonStringArray, callback: Function, isLocalJson, path?: String, isRetry?: boolean) {\r\n        if (this.gameJson[name]) {\r\n            callback()\r\n            return\r\n        }\r\n\r\n        if (isLocalJson) {\r\n            this.jsonLoadNum = jsonStringArray.length\r\n            // you now have every files contained in the loaded zip\r\n            for (let i = 0; i < jsonStringArray.length; i++) {\r\n                LoaderManager.loaderJson(jsonStringArray[i], Handler.create((res) => {\r\n                    this.jsonLoadNum--\r\n                    if (this.jsonLoadNum == 0) {\r\n                        callback()\r\n                    }\r\n                }, this), 'config')\r\n            }\r\n        } else {\r\n            let fullUrl = Global.JSON_SERVER_URL + name + \".zip\"\r\n            if (path) {\r\n                fullUrl = path + name + \".zip\"\r\n            }\r\n\r\n            // SDKManager.getInstance().sdkZibUtil(fullUrl, jsonStringArray, function (gafFiles) {\r\n            //     cc.log(\"download file: \", gafFiles)\r\n            //     DataManager.getInstance().jsonLoadNum = jsonStringArray.length\r\n            //     // you now have every files contained in the loaded zip\r\n            //     for (let i = 0; i < jsonStringArray.length; i++) {\r\n            //         let fileString = gafFiles[jsonStringArray[i] + \".json\"]\r\n            //         let fileJson = JSON.parse(fileString)\r\n            //         DataManager.getInstance().gameJson[jsonStringArray[i]] = fileJson\r\n\r\n            //         DataManager.getInstance().jsonLoadNum --\r\n            //         if (DataManager.getInstance().jsonLoadNum == 0) {\r\n            //             callback()\r\n            //         }\r\n            //     }\r\n            // }.bind(this), function () {\r\n            //     //zip下载失败重新下载\r\n            //     if (isRetry) {return}\r\n            //     DataManager.getInstance().loadGameZipJson(name, jsonStringArray, callback, isLocalJson, path, true)\r\n            // }.bind(this))\r\n        }\r\n    }\r\n\r\n    getOrderList() {\r\n        let orderList = [];\r\n        let len = PlayerModel.orderLen;\r\n        let time = Math.floor(Utils.returnTime() / 1000) + 3600;\r\n        if (Global.isCeshi_version) {\r\n            time = Math.floor(Utils.returnTime() / 1000) + 60;\r\n        }\r\n\r\n        if (SDKManager.hasNewOrderReward()) {\r\n            // if (!PlayerModel.guideState) {\r\n            let item = this.order[0];\r\n            orderList.push({\r\n                id: item.id, unlock: 1, time: time, index: 0,\r\n                quality: item.quality, state: 0, cropList: [\r\n                    { cropId: item.crop1, target: item.num1, num: 0 },\r\n                    { cropId: item.crop2, target: item.num2, num: 0 },\r\n                ]\r\n            })\r\n            len = PlayerModel.orderLen - 1;\r\n        }\r\n        let wegitCfg = this.getOrderWegit();\r\n        for (let i = 0; i < len; i++) {\r\n            let order = this.getOrderByWegit(wegitCfg);\r\n            let value = {\r\n                id: order.id, unlock: 1, time: time, index: i + 1,\r\n                quality: order.quality, state: 0, cropList: [\r\n                    { cropId: order.crop1, target: this.getOrderNumBySDK(order.num1), num: 0 },\r\n                    { cropId: order.crop2, target: this.getOrderNumBySDK(order.num2), num: 0 },\r\n                    { cropId: order.crop3, target: this.getOrderNumBySDK(order.num3), num: 0 },\r\n                    { cropId: order.crop4, target: this.getOrderNumBySDK(order.num4), num: 0 },\r\n                ]\r\n            }\r\n            // let random = MKUtils.randomNMF(0, 100);\r\n            // if (random < 50) {\r\n            //     let item = Utils.getRandomByArr(value.cropList);\r\n            //     item.cropId = 100;\r\n            // }\r\n            this.sortCropList(value.cropList);\r\n            orderList.push(value);\r\n        }\r\n        for (let k = 0; k < 5 - PlayerModel.orderLen; k++) {\r\n            let value = {\r\n                id: -1, unlock: 0, lastTime: -1, index: k + len,\r\n                quality: 0, state: 0, cropList: [\r\n                ]\r\n            }\r\n            orderList.push(value);\r\n        }\r\n        return orderList;\r\n\r\n    }\r\n    getOrder() {\r\n        let wegitCfg = this.getOrderWegit();\r\n        let order = this.getOrderByWegit(wegitCfg);\r\n        let time = Math.floor(Utils.returnTime() / 1000) + 3600;\r\n        if (Global.isCeshi_version) {\r\n            time = Math.floor(Utils.returnTime() / 1000) + 60;\r\n        }\r\n        let value = {\r\n            id: order.id, unlock: 1, time: time, index: 1,\r\n            quality: order.quality, state: 0, cropList: [\r\n                { cropId: order.crop1, target: this.getOrderNumBySDK(order.num1), num: 0 },\r\n                { cropId: order.crop2, target: this.getOrderNumBySDK(order.num2), num: 0 },\r\n                { cropId: order.crop3, target: this.getOrderNumBySDK(order.num3), num: 0 },\r\n                { cropId: order.crop4, target: this.getOrderNumBySDK(order.num4), num: 0 },\r\n            ]\r\n        }\r\n        // let random = MKUtils.randomNMF(0, 100);\r\n        // if (random < 50) {\r\n        //     let item = Utils.getRandomByArr(value.cropList);\r\n        //     item.cropId = 100;\r\n        // }\r\n        this.sortCropList(value.cropList);\r\n        return value;\r\n    }\r\n    //\r\n    getOrderNumBySDK(num) {\r\n        let flag = SDKManager.getOrderCountAdd();\r\n        let num1 = Math.round((num * flag) / 100);\r\n        return num1;\r\n    }\r\n    sortCropList(arr: any[]) {\r\n        arr.sort((a, b) => {\r\n            return a.cropId - b.cropId;\r\n        })\r\n    }\r\n    getOrderByWegit(wegit) {\r\n        let total = 0;\r\n        for (let i = 1; i < 7; i++) {\r\n            total += wegit[\"lv\" + i];\r\n        }\r\n        let random = MKUtils.randomNMF(0, total);\r\n        let wegitTotal = 0;\r\n        let quality = 0;\r\n        for (let j = 1; j < 7; j++) {\r\n            wegitTotal += wegit[\"lv\" + j];\r\n            if (random < wegitTotal) {\r\n                quality = j;\r\n                break;\r\n            }\r\n        }\r\n        let orderList = this.order.slice(1)\r\n        let arr = orderList.filter((value, index) => {\r\n            return value.quality == quality;\r\n        })\r\n\r\n        let order = Utils.getRandomByArr(arr);\r\n        return order;\r\n    }\r\n\r\n    //获取当前幸福指数对应权重\r\n    getOrderWegit() {\r\n        let cfgList = this.order_weight;\r\n        let xfzs = PlayerModel.getXfzs();\r\n        let cfg: order_weight_config;\r\n        if (xfzs >= cfgList[cfgList.length - 1].limit) {\r\n            return cfgList[cfgList.length - 1];\r\n        }\r\n        for (let i = 0; i < cfgList.length; i++) {\r\n            if (xfzs < cfgList[i].limit) {\r\n                cfg = cfgList[i - 1];\r\n                break;\r\n            }\r\n        }\r\n        return cfg;\r\n    }\r\n\r\n    //获取设施\r\n    getPropById(type, level): levelUp_config {\r\n        let itemId = type + \"0\" + level;\r\n        let arr = this.prop.filter((item) => {\r\n            return item.id == Number(itemId);\r\n        })\r\n        return arr[0];\r\n    }\r\n    getPropMaxLv(type) {\r\n        let arr = this.prop.filter((item) => {\r\n            return item.type == type;\r\n        })\r\n        return arr.length;\r\n    }\r\n    //每个货架最多排队X位顾客\r\n    getRoleMax() {\r\n        let itemId = propType.road + \"0\" + PlayerModel.getUIConfig().roadlv;\r\n        let arr = this.prop.filter((item) => {\r\n            return item.id == Number(itemId);\r\n        })\r\n        return arr[0].add_num\r\n    }\r\n\r\n    /**\r\n     * 地块配置\r\n     * @param id \r\n     * @returns \r\n     */\r\n    getFieldCfgByType(type, level) {\r\n        let itemId = type + \"0\" + level;\r\n        let arr = this.field.filter((item) => {\r\n            return item.id == Number(itemId);\r\n        })\r\n        return arr[0];\r\n    }\r\n    getFieldMaxLv(type) {\r\n        let arr = this.field.filter((item) => {\r\n            return item.type == type;\r\n        })\r\n        return arr.length;\r\n    }\r\n    /**\r\n     * 货架配置\r\n     * @returns \r\n     */\r\n    getShelveByType(type, level) {\r\n        let itemId = type + \"0\" + level;\r\n        let arr = this.shelves.filter((item) => {\r\n            return item.id == Number(itemId);\r\n        })\r\n        return arr[0];\r\n    }\r\n    getShelveMaxLv(type) {\r\n        let arr = this.shelves.filter((item) => {\r\n            return item.type == type;\r\n        })\r\n        return arr.length;\r\n    }\r\n    /** 通过id索引作物 */\r\n    getCropById(id: number): crop_config {\r\n        return this.crop.filter(x => {\r\n            return id == x.id;\r\n        })[0];\r\n    }\r\n    //收银台每日自动获取钞票上限\r\n    getCashierMax() {\r\n        let lv = PlayerModel.getUIConfig().cashierlv;\r\n        let id = Number(propType.cashier + \"0\" + lv);\r\n        let arr = this.prop.filter((item) => {\r\n            return item.id == id;\r\n        })\r\n        return arr[0].add_num;\r\n    }\r\n    //获取当前等级配置\r\n    getCurrentLvCfg() {\r\n        let lv = PlayerModel.getLevel();\r\n        let arr = this.level.filter((cfg) => {\r\n            return cfg.level == lv;\r\n        })\r\n        return arr[0];\r\n    }\r\n    /**\r\n     * 获取作物成熟时间\r\n     * @param id \r\n     * @param num 仓库中拥有数量\r\n     * @returns \r\n     */\r\n    getCropTime(id, num) {\r\n        let numObj = this.crop[0];\r\n        let key;\r\n        let preKey;\r\n        for (let numkey in numObj) {\r\n            let value = numkey.slice(0, 5);\r\n            if (value != \"value\") continue;\r\n            if (!preKey) preKey = numkey;\r\n            if (num <= numObj[numkey]) {\r\n                key = preKey;\r\n                break;\r\n            }\r\n            preKey = numkey;\r\n        }\r\n\r\n        if (!key) key = preKey;\r\n\r\n        let timeObj: crop_config;\r\n        for (let i = 1; i < this.crop.length; i++) {\r\n            if (this.crop[i].id == id) {\r\n                timeObj = this.crop[i];\r\n            }\r\n        }\r\n\r\n        return timeObj[key];\r\n\r\n    }\r\n}\r\n\r\nexport default ConfigManager.instance();\r\n"]}
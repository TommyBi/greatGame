{"version":3,"sources":["assets/src/game/view/main/PipePrefab.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AACvD,uDAAkD;AAE5C,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAwC,8BAAY;IAApD;QAAA,qEAwCC;QArCG,SAAG,GAAc,IAAI,CAAC;QAEtB,aAAO,GAAiB,IAAI,CAAC;QAE7B,aAAO,GAAgB,IAAI,CAAC;QAE5B,aAAO,GAAgB,IAAI,CAAC;;IA+BhC,CAAC;IA9BG,eAAe;IAEf,0BAAK,GAAL;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,sBAAY,CAAC,gBAAgB,CAAC,qBAAS,CAAC,WAAW,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IAChF,CAAC;IAED,4BAAO,GAAP,UAAQ,EAAM;QAAN,mBAAA,EAAA,MAAM;QACV,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;IACtB,CAAC;IAED,+BAAU,GAAV,UAAW,MAAU;QAArB,iBAkBC;QAlBU,uBAAA,EAAA,UAAU;QACjB,IAAI,EAAE,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,MAAM,CAAC;QAC1C,IAAI,EAAE,IAAI,CAAC,EAAE;YACT,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACjC,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAA;YAChC,OAAO;SACV;QACD,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,IAAI,EAAE,CAAA;QACnB,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QAChC,IAAI,CAAC,OAAO,CAAC,SAAS,GAAC,OAAO,CAAA;QAC9B,iBAAO,CAAC,eAAe,CAAC,oBAAoB,IAAG,MAAI,EAAI,CAAA,EAAE,UAAC,GAAG;YACzD,KAAI,CAAC,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC;YAC3B,IAAI,MAAM,EAAE;gBACR,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,CAAC;aACxC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IApCD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;2CACE;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,SAAS,CAAC;+CACM;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;+CACM;IAE5B;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;+CACM;IATX,UAAU;QAD9B,OAAO;OACa,UAAU,CAwC9B;IAAD,iBAAC;CAxCD,AAwCC,CAxCuC,EAAE,CAAC,SAAS,GAwCnD;kBAxCoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class PipePrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    img: cc.Sprite = null;\r\n    @property(cc.Animation)\r\n    liushui: cc.Animation = null;\r\n    @property(sp.Skeleton)\r\n    shuihua: sp.Skeleton = null;\r\n    @property(sp.Skeleton)\r\n    lvUpEff: sp.Skeleton = null;\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        this.lvUpEff.node.active = false;\r\n        EventDispath.addEventListener(EventType.CHANGE_PIPE, this.changeSkin, this);\r\n    }\r\n\r\n    setData(id = 1) {\r\n        this.changeSkin(0)\r\n    }\r\n\r\n    changeSkin(isLvUp = 1) {\r\n        let id = PlayerModel.getUIConfig().pipelv;\r\n        if (id == 0) {\r\n            this.liushui.node.active = false;\r\n            this.shuihua.node.active = false\r\n            return;\r\n        }\r\n        this.liushui.node.active = true;\r\n        this.liushui.play()\r\n        this.shuihua.node.active = true;\r\n        this.shuihua.animation=\"bowen\"\r\n        MKUtils.loadSpriteFrame(\"texture/prop/pipe/\" + `0${id}`, (res) => {\r\n            this.img.spriteFrame = res;\r\n            if (isLvUp) {\r\n                this.lvUpEff.node.active = true;\r\n                this.lvUpEff.animation = \"animation\";\r\n            }\r\n        });\r\n    }\r\n}\r\n"]}
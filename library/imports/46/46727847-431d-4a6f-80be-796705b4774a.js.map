{"version":3,"sources":["assets/src/framework/ui/BaseTips.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["import Handler from \"../base/Handler\";\nimport LoaderManager from \"../manager/LoaderManager\";\nimport UIMananger from \"../manager/UIMananger\";\nimport ComponentHelper from \"../tools/ComponentHelper\";\n\nconst {ccclass, property} = cc._decorator;\n\n@ccclass\nexport default class BaseTips extends cc.Component {\n\n    _inData : any = null;\n    _uiName:string = \"\";\n    _effect:any = null;\n    modelUI:cc.Node;\n    modelUIOpacity : number = 150;\n    _delayRemove : any = null;\n    public maskURL:string = \"mbg\";//资源放在common模块中\n    close(){\n        UIMananger.hideTips(this.node);\n        this.modelUI.stopAllActions();\n        this.modelUI.runAction(cc.fadeOut(0.2));\n    }\n    setUIParent(parentNode){\n        this.node.parent = parentNode;\n    }\n    _show_(args){\n        this._inData = args;\n        this._initModule();\n    }\n    setDelayRemove(dr){\n        this._delayRemove = dr;\n    }   \n    setUIName(uiName){\n        this._uiName = uiName;\n    }\n    setEffect(effect){\n        this._effect = effect;\n    }\n    startHide(){\n    }\n    _hide_(){\n        this.node.destroy();\n    }\n    on_Show(){\n        this._showModuleAction();\n        if(this._delayRemove && this._inData){\n            let reward = this._inData[0];\n            this.node.runAction(cc.sequence(\n                cc.delayTime(this._delayRemove),\n                cc.callFunc(()=>{\n                    this.scheduleOnce(this.close.bind(this),0);\n                })\n            ));\n            let noCoin = this._inData[1];\n        }\n    }\n    private _initModule(){\n        if (!cc.isValid(this.modelUI)) {\n            this.modelUI = ComponentHelper.createSprite(null,null);\n            LoaderManager.loaderSpriteFrame(this.maskURL,Handler.create(this._moduleComplete,this),'commonRes');\n            this.modelUI.addComponent(cc.BlockInputEvents);\n            this.modelUI.opacity = 0;\n            this.modelUI.parent = this.node;\n            this.modelUI.setSiblingIndex(0);    \n        }\n        \n    }\n    private _moduleComplete(res){\n        let sprite:cc.Sprite = ComponentHelper.spriteFrame(this.modelUI,res);\n        sprite.trim = false;\n        sprite.sizeMode = cc.Sprite.SizeMode.CUSTOM;\n        let msize = cc.view.getVisibleSize();\n        this.modelUI.width = msize.width;\n        this.modelUI.height = msize.height;\n        this._clickClose();\n    }\n    public _showModuleAction(){\n        if(cc.isValid(this.modelUI)) {\n            this.modelUI.stopAllActions();\n            this.modelUI.opacity = 0;\n            this.modelUI.runAction(cc.fadeTo(0.2,this.modelUIOpacity));\n        }\n    }\n    startShow(){}\n    //点击空白区域关闭\n    _clickClose(){\n        this.modelUI.on('touchend', (event)=> {\n            event.stopPropagation();\n            this.node.stopAllActions();\n            let clickPos = event.getLocation();\n                let visibleSize = cc.view.getVisibleSize();\n                clickPos.x = clickPos.x - visibleSize.width / 2;\n                clickPos.y = clickPos.y - visibleSize.height / 2;\n                let rect = this.node.getBoundingBox();\n                if(!rect.contains(clickPos))\n                {\n                    this.close();\n                }\n        });\n    }\n}\n"]}
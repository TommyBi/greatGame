{"version":3,"sources":["assets/src/game/view/main/RolePrefab.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAGlF,8EAAyE;AACzE,oEAA+D;AAE/D,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AAEvD,wDAAmD;AACnD,sDAAiD;AAGjD,uDAAkD;AAClD,6DAAwD;AAExD,mDAA8C;AAIxC,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAQ5C;IAAwC,8BAAY;IAApD;QAAA,qEAgnBC;QA7mBG,UAAI,GAAc,IAAI,CAAC;QAEvB,cAAQ,GAAY,IAAI,CAAC;QAEzB,cAAQ,GAAY,IAAI,CAAC;QAEzB,aAAO,GAAa,IAAI,CAAC;QAEzB,cAAQ,GAAY,IAAI,CAAC;QAEzB,kBAAY,GAAY,IAAI,CAAC;QAE7B,gBAAU,GAAY,IAAI,CAAC;QAE3B,kBAAY,GAAY,IAAI,CAAC;QAE7B,mBAAa,GAAa,IAAI,CAAC;QAE/B,kBAAY,GAAa,IAAI,CAAC;QAG9B,UAAI,GAAgB,IAAI,CAAC;QAGzB,aAAO,GAAsB,EAAE,CAAC;QAChC,wBAAwB;QACxB,QAAQ;QAER,gBAAU,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QAC9B,OAAC,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACrB,uBAAuB;QAEvB,yBAAyB;QACzB,wBAAwB;QACxB,yBAAyB;QACzB,0BAA0B;QAC1B,2BAA2B;QAC3B,kBAAY,GAAG;YACX,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC;YAChB,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC;YAChB,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC;YACf,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,EAAE,GAAG,CAAC;YACf,EAAE,CAAC,EAAE,CAAC,CAAC,GAAG,EAAE,GAAG,CAAC;SACnB,CAAA;QACD,kBAAY,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAA;QAC/B,cAAQ,GAAG,EAAE,CAAC,EAAE,CAAC,GAAG,EAAE,CAAC,GAAG,CAAC,CAAA;QAE3B,mBAAa,GAAG,oBAAU,CAAC,YAAY,CAAC;QAExC,iBAAW,GAAG,CAAC,CAAC,CAAC;QACjB,WAAK,GAAG,GAAG,CAAC;QACZ,gBAAU,GAAG,GAAG,CAAC;QACjB,cAAQ,GAAG,CAAC,CAAC,CAAC,CAAA,SAAS;QACvB,YAAM,GAAG,CAAC,CAAC,CAAC;QACZ,gBAAU,GAAG,CAAC,CAAC,CAAC,CAAA,WAAW;QAC3B,iBAAW,GAAiB,EAAE,CAAC;QAE/B,kBAAY,GAAG,CAAC,CAAC,CAAA,SAAS;QAE1B,eAAS,GAAG,KAAK,CAAC,CAAA,SAAS;QAI3B,YAAM,GAAG,IAAI,CAAC;QACd,cAAQ,GAAG,CAAC,CAAC;QAGb,kBAAY,GAAG,CAAC,CAAC;QAEjB,wBAAkB,GAAG,CAAC,CAAC,CAAC;QAkWxB,iBAAW,GAAG,CAAC,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,EAAE,CAAA;QAsGnC,cAAQ,GAAG,CAAC,CAAC;QACb,YAAM,GAAG,KAAK,CAAC;;QA+Ef,eAAe;QACf,+BAA+B;QAC/B,wCAAwC;QACxC,gDAAgD;QAChD,iDAAiD;QACjD,oBAAoB;QACpB,8CAA8C;QAC9C,QAAQ;QACR,kCAAkC;QAClC,6BAA6B;QAC7B,+CAA+C;QAC/C,mDAAmD;QACnD,wCAAwC;QACxC,sDAAsD;QACtD,oBAAoB;QACpB,IAAI;IACR,CAAC;IAtiBG,2BAAM,GAAN;IAEA,CAAC;IACD,4BAAO,GAAP,UAAQ,KAAK;QACT,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;IAChC,CAAC;IAED,0BAAK,GAAL;QACI,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,WAAW,GAAG,EAAE,CAAC;IAC1B,CAAC;IACS,6BAAQ,GAAlB;QAEI,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACpB,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC;QAE3E,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QACjD,sBAAY,CAAC,EAAE,CAAC,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC;QAClD,sBAAY,CAAC,gBAAgB,CAAC,qBAAS,CAAC,WAAW,EAAE,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,CAAC;IACjF,CAAC;IACD;;;;OAIG;IACH,2BAAM,GAAN,UAAO,EAAE,EAAE,MAAoB,EAAE,UAAyB;QACtD,IAAI,CAAC,MAAM,GAAG,EAAE,CAAC;QACjB,IAAI,CAAC,UAAU,GAAG,UAAU,CAAC;QAC7B,IAAI,MAAM,EAAE;YACR,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC;YACjC,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;YACrB,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC;SACvC;aAAM;YACH,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;SACzB;QACD,IAAI,CAAC,UAAU,EAAE,CAAC;QAClB,IAAI,CAAC,UAAU,EAAE,CAAC;IACtB,CAAC;IACD,SAAS;IACT,+BAAU,GAAV;QAAA,iBAgBC;QAfG,IAAI,CAAC,IAAI,CAAC,MAAM;YAAE,OAAO;QACzB,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC;QAChC,IAAI,EAAE,GAAG,CAAC,CAAC,CAAC;QACZ,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE;YACjB,IAAI,IAAI,GAAG,eAAK,CAAC,cAAc,CAAC,IAAI,CAAC,CAAC;YACtC,EAAE,GAAG,IAAI,CAAC,MAAM,CAAC;SACpB;aAAM;YACH,EAAE,GAAG,qBAAW,CAAC,UAAU,EAAE,CAAC;SACjC;QACD,IAAI,CAAC,UAAU,GAAG,EAAE,CAAC;QACrB,iBAAO,CAAC,eAAe,CAAC,0BAA0B,GAAG,EAAE,EAAE,UAAC,GAAG;YACzD,KAAI,CAAC,IAAI,CAAC,WAAW,GAAG,GAAG,CAAC;QAChC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,WAAW,GAAG,uBAAa,CAAC,WAAW,CAAC,IAAI,CAAC,UAAU,CAAC,CAAC;IAClE,CAAC;IACD,QAAQ;IACR,+BAAU,GAAV;QAAA,iBA+BC;QA9BG,IAAI,OAAO,CAAC,UAAC,OAAO,EAAE,MAAM;YACxB,KAAI,CAAC,IAAI,CAAC,WAAW,CAAC,KAAI,CAAC,UAAU,CAAC,CAAA;YACtC,yBAAyB;YACzB,KAAI,CAAC,IAAI,CAAC,YAAY,GAAG,KAAI,CAAC,OAAO,CAAC,KAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;YACvD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,MAAM,CAAC;YACxC,OAAO,CAAC,IAAI,CAAC,CAAC;YACd,WAAW;YACX,wEAAwE;YACxE,+CAA+C;YAC/C,wCAAwC;YACxC,yBAAyB;YACzB,oBAAoB;YACpB,IAAI;QACR,CAAC,CAAC,CAAC,IAAI,CAAC;YACJ,QAAQ,KAAI,CAAC,WAAW,EAAE;gBACtB,KAAK,CAAC,CAAC;oBACH,KAAI,CAAC,OAAO,EAAE,CAAC;oBACf,MAAM;gBACV,KAAK,CAAC,CAAC;gBACP,KAAK,CAAC,CAAC;gBACP,KAAK,CAAC,CAAC;gBACP,KAAK,CAAC,CAAC;gBACP,KAAK,CAAC;oBACF,KAAI,CAAC,OAAO,EAAE,CAAC;oBACf,MAAM;gBAEV;oBACI,MAAM;aACb;QACL,CAAC,CAAC,CAAA;IACN,CAAC;IACD,OAAO;IACP,4BAAO,GAAP;QACI,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,MAAM,CAAC;QACxC,IAAI,MAAM,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;QACnE,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IACD,MAAM;IACN,0BAAK,GAAL,UAAM,IAAQ;QAAd,iBAcC;QAdK,qBAAA,EAAA,QAAQ;QACV,IAAI,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,WAAW,CAAC,CAAA;QAChD,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,MAAM,CAAC;QACxC,IAAI,IAAI,IAAI,CAAC,EAAE;YACX,MAAM,GAAG,IAAI,CAAC,YAAY,CAAC;YAC3B,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;SAClD;QACD,IAAI,GAAG,GAAG,iBAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,QAAQ,CAAC,CAAA;QAEzD,IAAI,MAAM,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,EAAE,IAAI,CAAC,QAAQ,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;YACrE,KAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;QACjC,CAAC,CAAC,CAAC,CAAC;QACJ,IAAI,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IACD,KAAK;IACL,8BAAS,GAAT;QACI,6BAA6B;QAC7B,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;QAC9B,IAAI,CAAC,kBAAkB,GAAG,CAAC,CAAC,CAAC;QAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;QAC/C,wBAAc,CAAC,OAAO,CAAC,IAAI,CAAC,CAAC;QAC7B,mDAAmD;QACnD,gEAAgE;QAChE,kDAAkD;QAClD,6BAA6B;QAC7B,iDAAiD;QACjD,4BAA4B;QAC5B,mIAAmI;QACnI,0BAA0B;QAC1B,iEAAiE;QACjE,iCAAiC;QACjC,qCAAqC;QACrC,iEAAiE;QACjE,yCAAyC;QACzC,WAAW;QACX,gDAAgD;QAChD,kCAAkC;IACtC,CAAC;IACD,gCAAW,GAAX;QACI,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,oBAAoB,CAAC;IAC1D,CAAC;IACD,6BAAQ,GAAR;QACI,+BAA+B;IACnC,CAAC;IACD,YAAY;IACZ,4BAAO,GAAP;QAAA,iBA8CC;QA7CG,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QAEpC,IAAI,CAAC,MAAM,EAAE;YACT,IAAI,CAAC,OAAO,EAAE,CAAC;YACf,OAAO;SACV;QACD,IAAI,CAAC,MAAM,CAAC,OAAO,EAAE,CAAC;QACtB,mDAAmD;QACnD,IAAI,GAAG,GAAG,iBAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;QAElD,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,IAAI,MAAM,GAAG,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,CAAC,EAAE,IAAI,CAAC,CAAC,CAAC,EACzC,EAAE,CAAC,QAAQ,CAAC;YACR,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,YAAY,CAAC;QAClD,CAAC,CAAC,EACF,EAAE,CAAC,SAAS,CAAC,CAAC,CAAC,EACf,EAAE,CAAC,QAAQ,CAAC;YACR,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,MAAM,CAAC;QAC5C,CAAC,CAAC;QACF,+BAA+B;QAC/B,gEAAgE;QAChE,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC,EACvC,EAAE,CAAC,QAAQ,CAAC;YACR,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAI,CAAC,CAAC;YAC1B,KAAI,CAAC,MAAM,GAAG,KAAK,CAAC;YACpB,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBAChD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;gBAC/C,0BAA0B;aAC7B;iBAAM;gBACH,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,OAAO,CAAC;gBACzC,wBAAwB;aAC3B;YACD,IAAI,qBAAW,CAAC,UAAU,EAAE;gBAExB,iBAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,EAAE,CAAC,EAAE;oBAC/B,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;oBAC5B,KAAI,CAAC,OAAO,EAAE,CAAC;gBACnB,CAAC,CAAC,CAAA;aACL;iBAAM;gBACH,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;aAC/B;QACL,CAAC,CAAC,CACL,CAAC;QACF,IAAI,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IACD,MAAM;IACN,kCAAa,GAAb,UAAc,MAAoB;QAAlC,iBA+CC;QA7CG,IAAI,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC;QAC/B,IAAI,MAAM;YAAE,IAAI,CAAC,WAAW,GAAG,MAAM,CAAC,MAAM,CAAC;;YACxC,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;QAC3B,IAAI,CAAC,QAAQ,GAAG,MAAM,CAAC,OAAO,CAAC;QAC/B,wDAAwD;QACxD,8BAA8B;QAC9B,WAAW;QACX,4BAA4B;QAC5B,IAAI;QACJ,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;QAC/C,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC;QAE3B,IAAI,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC;QACpC,IAAI,CAAC,MAAM,EAAE;YACT,IAAI,CAAC,SAAS,EAAE,CAAC;YACjB,OAAO;SACV;QACD,IAAI,GAAG,GAAG,iBAAO,CAAC,gBAAgB,CAAC,MAAM,EAAE,IAAI,CAAC,YAAY,CAAC,OAAO,CAAC,CAAC,CAAA;QAEtE,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;QAC/C,IAAI,MAAM,GAAG,EAAE,CAAC,QAAQ,CAEpB,EAAE,CAAC,MAAM,CAAC,GAAG,GAAG,EAAE,EAAE,MAAM,CAAC,CAAC,EAAE,MAAM,CAAC,CAAC,CAAC;QACvC,+BAA+B;QAC/B,gFAAgF;QAChF,EAAE,CAAC,QAAQ,CAAC;YACR,KAAI,CAAC,MAAM,CAAC,OAAO,CAAC,KAAI,CAAC,CAAC;YAC1B,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBAChD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,aAAa,CAAC;gBAC/C,0BAA0B;aAC7B;iBAAM;gBACH,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,OAAO,CAAC;gBACzC,wBAAwB;aAC3B;YACD,KAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAC1B,iBAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,EAAE,CAAC,EAAE;gBAC/B,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;gBAC5B,KAAI,CAAC,OAAO,EAAE,CAAC;YACnB,CAAC,CAAC,CAAA;QAEN,CAAC,CAAC,CACL,CAAC;QACF,IAAI,SAAS,GAAG,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC;QAC7C,IAAI,CAAC,IAAI,CAAC,SAAS,CAAC,SAAS,CAAC,CAAC;IACnC,CAAC;IACD,iCAAY,GAAZ,UAAa,QAAQ;QACjB,IAAI,QAAQ,IAAI,CAAC,EAAE;YACf,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;SAC9B;aAAM,IAAI,QAAQ,IAAI,CAAC,EAAE;YACtB,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBACzE,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAC9B;SACJ;aAAM,IAAI,QAAQ,IAAI,CAAC,EAAE;YACtB,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAC9B;SACJ;aAAM,IAAI,QAAQ,IAAI,CAAC,EAAE;YACtB,IAAI,IAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBACvB,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC;aAC9B;SACJ;aAAM;YAEH,IAAI,CAAC,IAAI,CAAC,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;SAC7B;IACL,CAAC;IAED,0BAAK,GAAL;QAAA,iBA4BC;QA3BG,yBAAyB;QACzB,IAAI,IAAI,CAAC,YAAY,EAAE,EAAE;YACrB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,EAAE;gBAC1C,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;gBAC7B,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;oBAChD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,WAAW,CAAA;iBAC/C;qBAAM;oBACH,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,WAAW,CAAA;iBAC/C;gBACD,KAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAC,UAAU,EAAE,SAAS;oBAChD,KAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;oBACpC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;wBAChD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,oBAAoB,CAAC;qBACzD;yBAAM;wBACH,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,cAAc,CAAA;qBAClD;oBACD,iBAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,EAAE,GAAG,EAAE;wBACjC,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,KAAK;wBACL,KAAI,CAAC,SAAS,EAAE,CAAA;oBACpB,CAAC,CAAC,CAAA;gBACN,CAAC,CAAC,CAAA;YACN,CAAC,CAAC,CAAC;SAEN;aAAM;YACH,IAAI,CAAC,iBAAiB,EAAE,CAAC;SAC5B;IACL,CAAC;IACD,+BAAU,GAAV;QAAA,iBAQC;QAPG,IAAI,GAAG,GAAG,IAAI,CAAC,WAAW,CAAC,MAAM,CAAC,UAAC,KAAK;YACpC,OAAO,KAAK,CAAC,MAAM,IAAI,KAAI,CAAC,UAAU,CAAC;QAC3C,CAAC,CAAC,CAAA;QACF,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC;YAAE,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,EAAE,CAAC;aAC5B;YACD,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,MAAM,EAAE,IAAI,CAAC,UAAU,EAAE,GAAG,EAAE,CAAC,EAAE,CAAC,CAAC;SAC9D;IACL,CAAC;IACD,UAAU;IACV,sCAAiB,GAAjB;QAAA,iBAcC;QAbG,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,GAAG,GAAG,OAAO,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,GAAG,WAAW,CAAA;QACvD,IAAI,CAAC,OAAO,CAAC,MAAM,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;QAC5B,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;YACjC,IAAI,KAAI,CAAC,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE;gBAC7B,KAAI,CAAC,SAAS,EAAE,CAAC;aACpB;iBAAM;gBACH,KAAI,CAAC,KAAK,EAAE,CAAC;gBACb,KAAI,CAAC,MAAM,CAAC,WAAW,CAAC,KAAI,CAAC,CAAC;aACjC;YACD,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,CAAC,CAAC,CAAA;IACN,CAAC;IACD,aAAa;IACb,iCAAY,GAAZ;QAAA,iBAMC;QALG,IAAI,GAAG,GAAG,IAAI,CAAC,MAAM,CAAC,QAAQ,CAAC,MAAM,CAAC,UAAC,KAAK;YACxC,OAAO,KAAK,CAAC,MAAM,IAAI,KAAI,CAAC,UAAU,CAAC;QAC3C,CAAC,CAAC,CAAA;QACF,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC;YAAE,OAAO,IAAI,CAAC;QAChC,OAAO,KAAK,CAAC;IACjB,CAAC;IAED,6BAAQ,GAAR,UAAS,MAAM;QAAf,iBAwBC;QAvBG,IAAI,MAAM,EAAE;YACR,IAAI,MAAM,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YAC/B,IAAI,MAAM,EAAE;gBACR,oBAAoB;gBACpB,IAAI,IAAI,CAAC,WAAW,IAAI,MAAM,CAAC,MAAM,EAAE;oBACnC,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,GAAG,EAAE;wBACjC,KAAI,CAAC,UAAU,EAAE,CAAC;wBAClB,KAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,IAAI,CAAC;wBAC5B,KAAI,CAAC,OAAO,EAAE,CAAC;oBACnB,CAAC,CAAC,CAAA;iBACL;qBAAM;oBACH,IAAI,CAAC,MAAM,CAAC,WAAW,CAAC,IAAI,CAAC,CAAC;oBAC9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;oBACrB,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,CAAA;iBAC7B;aAEJ;iBAAM;gBACH,IAAI,CAAC,SAAS,EAAE,CAAC;aACpB;SACJ;aAAM;YACH,KAAK;YACL,IAAI,CAAC,SAAS,EAAE,CAAC;SACpB;IACL,CAAC;IAED,+BAAU,GAAV;QACI,IAAI,GAAG,GAAG,qBAAW,CAAC,WAAW,CAAC,MAAM,CAAC,UAAC,IAAI;YAC1C,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,IAAI,IAAI,CAAC,OAAO,GAAG,CAAC,CAAC;QACnD,CAAC,CAAC,CAAA;QACF,IAAI,GAAG,CAAC,MAAM,GAAG,CAAC,EAAE;YAChB,IAAI,MAAM,GAAG,eAAK,CAAC,cAAc,CAAC,GAAG,CAAC,CAAC;YACvC,OAAO,MAAM,CAAC;SACjB;QACD,OAAO,IAAI,CAAC;IAChB,CAAC;IACD,IAAI;IACJ,2BAAM,GAAN;QAEI,IAAI,MAAM,GAAG,iBAAO,CAAC,SAAS,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC;QAGvC,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,IAAI,CAAC,UAAU,CAAC,MAAM,GAAG,KAAK,CAAC;QAC/B,2CAA2C;QAE3C,yBAAyB;QACzB,gDAAgD;QAChD,wCAAwC;QACxC,2CAA2C;QAC3C,eAAe;QACf,yCAAyC;QACzC,+FAA+F;QAC/F,yDAAyD;QACzD,QAAQ;QACR,WAAW;QACP,IAAI,IAAI,GAAG,iBAAO,CAAC,QAAQ,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC;QACtC,IAAI,CAAC,QAAQ,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,CAAC,CAAA;QAC7B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;QACpC,IAAI;IAER,CAAC;IACD,kCAAa,GAAb,UAAc,IAAI;QACd,sBAAY,CAAC,aAAa,CAAC,qBAAS,CAAC,iBAAiB,EAAE,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC,CAAA;QACjF,sBAAY,CAAC,gBAAgB,CAAC,qBAAS,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;QAC5E,oBAAU,CAAC,gBAAgB,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;IAC/C,CAAC;IACD;;;;;;;;;;OAUG;IACH,6BAAQ,GAAR,UAAS,IAAI;QAAb,iBA6CC;QA3CG,IAAI,IAAI,GAAG,IAAI,CAAC,WAAW,CAAC,IAAI,CAAC,MAAM,CAAC,MAAM,CAAC,CAAA;QAC/C,IAAI,GAAG,GAAG,uBAAa,CAAC,eAAe,CAAC,IAAI,EAAE,IAAI,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,OAAO,CAAC;QAEvE,sBAAY,CAAC,aAAa,CAAC,qBAAS,CAAC,cAAc,EAAE,IAAI,CAAC,QAAQ,EAAE,IAAI,CAAC,CAAA;QACzE,IAAI,IAAI,GAAG,CAAC,GAAG,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC;QAC9C,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,CAAC;QACrE,IAAI,IAAI,CAAC,IAAI,EAAE;YACX,IAAI,IAAI,GAAG,IAAI,CAAC,KAAK,CAAC,IAAI,CAAC,IAAI,GAAG,CAAC,CAAC,GAAG,GAAG,GAAG,GAAG,CAAC,CAAC,CAAA;YAElD,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;YAC5C,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,GAAG,GAAG,IAAI,GAAG,EAAE,CAAC;YAC3C,qBAAW,CAAC,OAAO,CAAC,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC,CAAC;SACnC;aAAM;YACH,IAAI,CAAC,aAAa,CAAC,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,GAAG,GAAG,CAAC;YAExE,qBAAW,CAAC,QAAQ,CAAC,IAAI,CAAC,WAAW,EAAE,IAAI,CAAC,OAAO,EAAE,CAAC,CAAC,CAAC;SAC3D;QACD,qBAAW,CAAC,OAAO,CAAC,MAAM,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC,CAAC;QAErC,qBAAW,CAAC,aAAa,CAAC,GAAG,EAAE,CAAC,EAAE;YAC9B,iDAAiD;YACjD,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,qBAAqB,CAAC,CAAA;QACtD,CAAC,CAAC,CAAA;QAEF,qBAAW,CAAC,OAAO,EAAE,CAAC;QACtB,sBAAY,CAAC,IAAI,CAAC,qBAAS,CAAC,WAAW,CAAC,CAAC;QAEzC,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,YAAY,CAAC,CAAC,GAAG,GAAG,CAAC;QAC1B,IAAI,CAAC,YAAY,CAAC,MAAM,GAAG,IAAI,CAAC;QAEhC,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;QAE7B,IAAI,CAAC,YAAY,CAAC,SAAS,CAAC,EAAE,CAAC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC,GAAG,EAAE,IAAI,CAAC,YAAY,CAAC,CAAC,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC,EAAE,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,EAAE,EAAE,CAAC,SAAS,CAAC,GAAG,CAAC,EAAE,EAAE,CAAC,QAAQ,CAAC;YACrI,KAAI,CAAC,YAAY,CAAC,MAAM,GAAG,KAAK,CAAC;QACrC,CAAC,CAAC,CAAC,CAAC,CAAA;QACJ,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE;YAC/B,KAAI,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC;YACd,+CAA+C;YAC/C,KAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;YAC7B,KAAK;YACL,kDAAkD;QACtD,CAAC,CAAC,CAAA;IACN,CAAC;IACD,iCAAY,GAAZ,UAAa,MAAM;QACf,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,MAAM,CAAC;IACjC,CAAC;IAGD,2BAAM,GAAN,UAAO,EAAE;QACL,IAAI,CAAC,GAAG,IAAI,CAAC,IAAI,CAAC,WAAW,EAAE,CAAC;QAChC,IAAI,CAAC,IAAI,CAAC,MAAM,IAAI,CAAC,CAAC,CAAC,IAAI,IAAI,CAAC,QAAQ,CAAC,CAAC,GAAG,EAAE,EAAE;YAC7C,IAAI,CAAC,KAAK,EAAE,CAAC;SAChB;QAED,mBAAmB;QACnB,6BAA6B;QAC7B,yBAAyB;QACzB,yBAAyB;QACzB,+CAA+C;QAC/C,gCAAgC;QAChC,mDAAmD;QACnD,0CAA0C;QAC1C,2DAA2D;QAC3D,sFAAsF;QACtF,+BAA+B;QAC/B,kDAAkD;QAClD,4CAA4C;QAC5C,0DAA0D;QAC1D,yBAAyB;QACzB,0DAA0D;QAE1D,oBAAoB;QACpB,gBAAgB;QAEhB,YAAY;QACZ,IAAI;QAEJ,IAAI;QAEJ,IAAI,CAAC,QAAQ,GAAG,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;IAEhC,CAAC;IACD,4BAAO,GAAP;QAAA,iBAMC;QALG,IAAI,IAAI,CAAC,MAAM,CAAC,MAAM,EAAE;YACpB,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE;gBAC/B,KAAI,CAAC,KAAK,EAAE,CAAC;YACjB,CAAC,CAAC,CAAA;SACL;IACL,CAAC;IACD,0BAAK,GAAL;QACI,IAAI,CAAC,IAAI,CAAC,cAAc,EAAE,CAAC;QAC3B,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;QACnB,yBAAe,CAAC,OAAO,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;QACnC,IAAI,CAAC,YAAY,GAAG,CAAC,CAAC;QACtB,IAAI,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC;QACtB,IAAI,CAAC,SAAS,GAAG,KAAK,CAAC;QACvB,sBAAY,CAAC,oBAAoB,CAAC,IAAI,CAAC,CAAC;IAC5C,CAAC;IAED,gCAAW,GAAX;QACI,IAAI,CAAC,KAAK,GAAG,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,UAAU,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC;IAC/E,CAAC;IACD,QAAQ;IACR,kCAAa,GAAb;QACI,OAAO,IAAI,CAAC,QAAQ,CAAC,qBAAqB,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;IAC5D,CAAC;IACD,QAAQ;IACR,6BAAQ,GAAR;QAAA,iBAkBC;QAjBG,yBAAyB;QACzB,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,QAAQ,CAAC,MAAM,GAAG,KAAK,CAAC;QAC7B,IAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,WAAW,CAAA;QAC5C,IAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,UAAC,UAAU,EAAE,SAAS;YAChD,KAAI,CAAC,IAAI,CAAC,mBAAmB,CAAC,IAAI,CAAC,CAAC;YACpC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,IAAI,KAAI,CAAC,WAAW,IAAI,CAAC,EAAE;gBAChD,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,oBAAoB,CAAC;aACzD;iBAAM;gBACH,KAAI,CAAC,IAAI,CAAC,SAAS,GAAG,oBAAU,CAAC,cAAc,CAAA;aAClD;YACD,iBAAO,CAAC,YAAY,CAAC,KAAI,CAAC,IAAI,EAAE,GAAG,EAAE;gBACjC,KAAI,CAAC,UAAU,EAAE,CAAC;gBAClB,KAAK;gBACL,KAAI,CAAC,SAAS,EAAE,CAAA;YACpB,CAAC,CAAC,CAAA;QACN,CAAC,CAAC,CAAA;IACN,CAAC;IA5lBD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;4CACG;IAEvB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;+CACM;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;gDACO;IAEzB;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACW;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;kDACS;IAE3B;QADC,QAAQ,CAAC,EAAE,CAAC,IAAI,CAAC;oDACW;IAE7B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;qDACY;IAE/B;QADC,QAAQ,CAAC,EAAE,CAAC,KAAK,CAAC;oDACW;IAG9B;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;4CACG;IAGzB;QADC,QAAQ,CAAC,CAAC,EAAE,CAAC,YAAY,CAAC,CAAC;+CACI;IA3Bf,UAAU;QAD9B,OAAO;OACa,UAAU,CAgnB9B;IAAD,iBAAC;CAhnBD,AAgnBC,CAhnBuC,EAAE,CAAC,SAAS,GAgnBnD;kBAhnBoB,UAAU","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport JSHelper from \"../../../framework/helper/JSHelper\";\r\nimport GamePoolManager from \"../../../framework/manager/GamePoolManager\";\r\nimport SDKManager from \"../../../framework/manager/SDKManager\";\r\nimport UIMananger from \"../../../framework/manager/UIMananger\";\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport SortUtils from \"../../../framework/tools/SortUtils\";\r\nimport Utils from \"../../../framework/tools/Utils\";\r\nimport ActionType from \"../../consts/ActionType\";\r\nimport { crop_config, propType } from \"../../consts/CConst\";\r\nimport UIType from \"../../consts/UIType\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport EffectManager from \"../../manager/EffectManager\";\r\nimport CashierManager from \"./CashierManager\";\r\nimport CashierPrefab from \"./CashierPrefab\";\r\nimport ShelvePrefab, { putOnConfig } from \"./ShelvePrefab\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\nexport interface buyCropCfg {\r\n    cropId: number,//作物ID\r\n    num: number,//已经购买的数量\r\n}\r\n\r\n@ccclass\r\nexport default class RolePrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    crop: cc.Sprite = null;\r\n    @property(cc.Node)\r\n    cropNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    tipsNode: cc.Node = null;\r\n    @property(cc.Label)\r\n    tipsLab: cc.Label = null;\r\n    @property(cc.Node)\r\n    sellNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    sellTipsNode: cc.Node = null;\r\n    @property(cc.Node)\r\n    sellTipsHb: cc.Node = null;\r\n    @property(cc.Node)\r\n    sellTipsGold: cc.Node = null;\r\n    @property(cc.Label)\r\n    sellTipsMoney: cc.Label = null;\r\n    @property(cc.Label)\r\n    sellTipsXfzs: cc.Label = null;\r\n\r\n    @property(sp.Skeleton)\r\n    role: sp.Skeleton = null;\r\n\r\n    @property([sp.SkeletonData])\r\n    skeList: sp.SkeletonData[] = [];\r\n    // LIFE-CYCLE CALLBACKS:\r\n    // state\r\n\r\n    startPoint = cc.v2(-660, 230);\r\n    p = cc.v2(-445, 140);\r\n    // p = cc.v2(285, 110);\r\n\r\n    // sp1 = cc.v2(225, 180);\r\n    // sp2 = cc.v2(-60, 70);\r\n    // sp3 = cc.v2(190, -20);\r\n    // sp4 = cc.v2(-40, -130);\r\n    // sp5 = cc.v2(-700, -285);\r\n    targetPoints = [\r\n        cc.v2(-140, -50),\r\n        cc.v2(130, -150),\r\n        cc.v2(270, -10),\r\n        cc.v2(-10, 105),\r\n        cc.v2(-300, 220)\r\n    ]\r\n    accountPoint = cc.v2(400, -280)\r\n    outPoint = cc.v2(620, -250)\r\n\r\n    currentAction = ActionType.Q_STAND_LEFT;\r\n    shelve: ShelvePrefab;//对应货架\r\n    shelveIndex = -1;\r\n    speed = 1.5;\r\n    speed_base = 1.5;\r\n    orderNum = -1;//排在第几个位置\r\n    roleId = -1;\r\n    needCropId = -1;//需要购买的作物ID\r\n    buyCropList: buyCropCfg[] = [];\r\n    baseCropCfg: crop_config;//需要购买的作物基础配置\r\n    currentTimes = 1;//当前第几次购买\r\n\r\n    isAccount = false;//是否是结账状态\r\n\r\n    cashierPfb: CashierPrefab;//结账台\r\n\r\n    isInit = true;\r\n    currentY = 0;\r\n\r\n\r\n    jiezhangIndx = 0;\r\n\r\n    roleInSheleveIndex = -1;\r\n\r\n    onLoad() {\r\n\r\n    }\r\n    setRole(value) {\r\n        this.role.timeScale = value;\r\n    }\r\n\r\n    start() {\r\n        this.cropNode.active = false;\r\n        this.tipsNode.active = false;\r\n        this.sellNode.active = false;\r\n        this.sellTipsNode.active = false;\r\n        this.buyCropList = [];\r\n    }\r\n    protected onEnable(): void {\r\n\r\n        this.isInit = false;\r\n        this.speed = this.speed_base + this.speed_base * PlayerModel.getSpeedAdd();\r\n\r\n        EventDispath.on(this.cropNode, this.onBuy, this);\r\n        EventDispath.on(this.sellNode, this.onSell, this);\r\n        EventDispath.addEventListener(EventType.CHANGE_ROAD, this.updateSpeed, this);\r\n    }\r\n    /**\r\n     * \r\n     * @param id 人物id\r\n     * @param shelveIndex 当前货架索引\r\n     */\r\n    create(id, shelve: ShelvePrefab, cashierPfb: CashierPrefab) {\r\n        this.roleId = id;\r\n        this.cashierPfb = cashierPfb;\r\n        if (shelve) {\r\n            this.shelveIndex = shelve.mIndex;\r\n            this.shelve = shelve;\r\n            this.orderNum = this.shelve.roleNum;\r\n        } else {\r\n            this.shelveIndex = -1;\r\n        }\r\n        this.createRole();\r\n        this.selectCrop();\r\n    }\r\n    //需要购买的作物\r\n    selectCrop() {\r\n        if (!this.shelve) return;\r\n        let list = this.shelve.cropList;\r\n        let id = -1;\r\n        if (list.length > 0) {\r\n            let crop = Utils.getRandomByArr(list);\r\n            id = crop.cropId;\r\n        } else {\r\n            id = PlayerModel.getNewCrop();\r\n        }\r\n        this.needCropId = id;\r\n        MKUtils.loadSpriteFrame(\"texture/crop/singleIcon/\" + id, (res) => {\r\n            this.crop.spriteFrame = res;\r\n        });\r\n\r\n        this.baseCropCfg = ConfigManager.getCropById(this.needCropId);\r\n    }\r\n    //创建顾客动画\r\n    createRole() {\r\n        new Promise((resolve, reject) => {\r\n            this.node.setPosition(this.startPoint)\r\n            // if (this.roleId > 9) {\r\n            this.role.skeletonData = this.skeList[this.roleId - 1];\r\n            this.role.animation = ActionType.Q_WALK;\r\n            resolve(null);\r\n            // } else {\r\n            //     let url = \"spine/role/0\" + this.roleId + \"/role_0\" + this.roleId;\r\n            //     MKUtils.loadSkeletonData(url, (res) => {\r\n            //         this.role.skeletonData = res;\r\n            //         resolve(null);\r\n            //     }, () => { })\r\n            // }\r\n        }).then(() => {\r\n            switch (this.shelveIndex) {\r\n                case -1:\r\n                    this.action1();\r\n                    break;\r\n                case 1:\r\n                case 2:\r\n                case 3:\r\n                case 4:\r\n                case 0:\r\n                    this.action2();\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        })\r\n    }\r\n    //直接走出去\r\n    action1() {\r\n        this.role.animation = ActionType.Q_WALK;\r\n        let action = cc.sequence(cc.moveTo(20, this.outPoint), cc.callFunc(() => {\r\n        }));\r\n        let newAction = cc.speed(action, this.speed);\r\n        this.node.runAction(newAction);\r\n    }\r\n    //去走出去\r\n    goOut(type = 1) {\r\n        let target = this.targetPoints[this.shelveIndex]\r\n        this.role.animation = ActionType.Q_WALK;\r\n        if (type == 2) {\r\n            target = this.accountPoint;\r\n            this.role.animation = ActionType.Q_WALK_FINISH;\r\n        }\r\n        let dis = MKUtils.twoPointDistance(target, this.outPoint)\r\n\r\n        let action = cc.sequence(cc.moveTo(dis / 80, this.outPoint), cc.callFunc(() => {\r\n            this.roleInSheleveIndex = -1;\r\n        }));\r\n        let newAction = cc.speed(action, this.speed);\r\n        this.node.runAction(newAction);\r\n    }\r\n    //去结账\r\n    goAccount() {\r\n        // this.role.node.scaleX = 1;\r\n        this.shelve.refreshRole(this);\r\n        this.roleInSheleveIndex = -1;\r\n        this.role.animation = ActionType.Q_WALK_FINISH;\r\n        CashierManager.addRole(this);\r\n        // let target = this.targetPoints[this.shelveIndex]\r\n        // let dis = MKUtils.twoPointDistance(target, this.accountPoint)\r\n        // this.role.animation = ActionType.Q_WALK_FINISH;\r\n        // this.cashierPfb.roleLen++;\r\n        // this.node.parent = this.cashierPfb.roleParent;\r\n        // let action = cc.sequence(\r\n        //     cc.moveTo(dis / 80, this.accountPoint.x + this.cashierPfb.roleLen * 15, this.accountPoint.y + this.cashierPfb.roleLen * 15),\r\n        //     cc.callFunc(() => {\r\n        //         this.role.animation = ActionType.Q_STAND_FINISH_RIGHT;\r\n        //         this.isAccount = true;\r\n        //         // this.node.zIndex = 999;\r\n        //         // EventDispath.send(EventType.ADD_CAHIER_ROLE, this);\r\n        //         this.cashierPfb.addRole(this);\r\n        //     }));\r\n        // let newAction = cc.speed(action, this.speed);\r\n        // this.node.runAction(newAction);\r\n    }\r\n    finshAction() {\r\n        this.role.animation = ActionType.Q_STAND_FINISH_RIGHT;\r\n    }\r\n    showSell() {\r\n        // this.sellNode.active = true;\r\n    }\r\n    //第一次走到某个摊位前\r\n    action2() {\r\n        let target = this.shelve.getPoint();\r\n\r\n        if (!target) {\r\n            this.action1();\r\n            return;\r\n        }\r\n        this.shelve.walkLen++;\r\n        // let target = this.targetPoints[this.shelveIndex]\r\n        let dis = MKUtils.twoPointDistance(target, this.p)\r\n\r\n        this.isMove = true;\r\n        let action = cc.sequence(cc.moveTo(4, this.p),\r\n            cc.callFunc(() => {\r\n                this.role.animation = ActionType.Q_STAND_LEFT;\r\n            }),\r\n            cc.delayTime(1),\r\n            cc.callFunc(() => {\r\n                this.role.animation = ActionType.Q_WALK;\r\n            }),\r\n            // cc.moveTo(dis / 80, target),\r\n            // cc.moveTo(dis / 80, target.x - this.orderNum * 10, target.y),\r\n            cc.moveTo(dis / 80, target.x, target.y),\r\n            cc.callFunc(() => {\r\n                this.shelve.addRole(this);\r\n                this.isMove = false;\r\n                if (this.shelveIndex == 0 || this.shelveIndex == 1) {\r\n                    this.role.animation = ActionType.Q_STAND_RIGHT;\r\n                    // this.node.zIndex = 888;\r\n                } else {\r\n                    this.role.animation = ActionType.H_STAND;\r\n                    // this.node.zIndex = 0;\r\n                }\r\n                if (PlayerModel.guideState) {\r\n\r\n                    MKUtils.setNodeDelay(this.node, 1, () => {\r\n                        this.cropNode.active = true;\r\n                        this.autoBuy();\r\n                    })\r\n                } else {\r\n                    this.cropNode.active = true;\r\n                }\r\n            })\r\n        );\r\n        let newAction = cc.speed(action, this.speed);\r\n        this.node.runAction(newAction);\r\n    }\r\n    //改变摊位\r\n    changeSheleve(shelve: ShelvePrefab) {\r\n\r\n        let oldIdex = this.shelveIndex;\r\n        if (shelve) this.shelveIndex = shelve.mIndex;\r\n        else this.shelveIndex = -1;\r\n        this.orderNum = shelve.roleNum;\r\n        // if (this.shelveIndex == 2 || this.shelveIndex == 3) {\r\n        //     this.node.zIndex = 999;\r\n        // } else {\r\n        //     this.node.zIndex = 0;\r\n        // }\r\n        this.role.animation = ActionType.Q_WALK_FINISH;\r\n        this.changeScaleX(oldIdex);\r\n\r\n        let target = this.shelve.getPoint();\r\n        if (!target) {\r\n            this.goAccount();\r\n            return;\r\n        }\r\n        let dis = MKUtils.twoPointDistance(target, this.targetPoints[oldIdex])\r\n\r\n        this.role.animation = ActionType.Q_WALK_FINISH;\r\n        let action = cc.sequence(\r\n\r\n            cc.moveTo(dis / 80, target.x, target.y),\r\n            // cc.moveTo(dis / 80, target),\r\n            // cc.moveTo(dis / 80, target.x + this.orderNum * 10, target.y+this.orderNum*5),\r\n            cc.callFunc(() => {\r\n                this.shelve.addRole(this);\r\n                if (this.shelveIndex == 2 || this.shelveIndex == 3) {\r\n                    this.role.animation = ActionType.Q_STAND_RIGHT;\r\n                    // this.node.zIndex = 888;\r\n                } else {\r\n                    this.role.animation = ActionType.H_STAND;\r\n                    // this.node.zIndex = 0;\r\n                }\r\n                this.role.node.scaleX = 1;\r\n                MKUtils.setNodeDelay(this.node, 1, () => {\r\n                    this.selectCrop();\r\n                    this.cropNode.active = true;\r\n                    this.autoBuy();\r\n                })\r\n\r\n            })\r\n        );\r\n        let newAction = cc.speed(action, this.speed);\r\n        this.node.runAction(newAction);\r\n    }\r\n    changeScaleX(oldIndex) {\r\n        if (oldIndex == 4) {\r\n            this.role.node.scaleX = -1;\r\n        } else if (oldIndex == 3) {\r\n            if (this.shelveIndex == 0 || this.shelveIndex == 1 || this.shelveIndex == 2) {\r\n                this.role.node.scaleX = -1;\r\n            }\r\n        } else if (oldIndex == 2) {\r\n            if (this.shelveIndex == 0) {\r\n                this.role.node.scaleX = -1;\r\n            }\r\n        } else if (oldIndex == 1) {\r\n            if (this.shelveIndex == 0) {\r\n                this.role.node.scaleX = -1;\r\n            }\r\n        } else {\r\n\r\n            this.role.node.scaleX = 1;\r\n        }\r\n    }\r\n\r\n    onBuy() {\r\n        // this.shelve.roleNum--;\r\n        if (this.checkSheleve()) {\r\n            this.shelve.reduceCrop(this.needCropId, this, () => {\r\n                this.cropNode.active = false;\r\n                if (this.shelveIndex == 0 || this.shelveIndex == 1) {\r\n                    this.role.animation = ActionType.Q_STAND_BUY\r\n                } else {\r\n                    this.role.animation = ActionType.H_STAND_BUY\r\n                }\r\n                this.role.setCompleteListener((trackEntry, loopCount) => {\r\n                    this.role.setCompleteListener(null);\r\n                    if (this.shelveIndex == 0 || this.shelveIndex == 1) {\r\n                        this.role.animation = ActionType.Q_STAND_FINISH_RIGHT;\r\n                    } else {\r\n                        this.role.animation = ActionType.H_STAND_FINISH\r\n                    }\r\n                    MKUtils.setNodeDelay(this.node, 0.5, () => {\r\n                        this.addBuyList();\r\n                        //去结账\r\n                        this.goAccount()\r\n                    })\r\n                })\r\n            });\r\n\r\n        } else {\r\n            this.cropLostBySheleve();\r\n        }\r\n    }\r\n    addBuyList() {\r\n        let arr = this.buyCropList.filter((value) => {\r\n            return value.cropId == this.needCropId;\r\n        })\r\n        if (arr.length > 0) arr[0].num++;\r\n        else {\r\n            this.buyCropList.push({ cropId: this.needCropId, num: 1 });\r\n        }\r\n    }\r\n    //货架缺少当前作物\r\n    cropLostBySheleve() {\r\n        this.cropNode.active = false;\r\n        let str = \"老板种点儿\" + this.baseCropCfg.name + \"吧，我一会儿过来买\"\r\n        this.tipsLab.string = str;\r\n        this.tipsNode.active = true;\r\n        MKUtils.setNodeDelay(this.node, 1.5, () => {\r\n            if (this.buyCropList.length > 0) {\r\n                this.goAccount();\r\n            } else {\r\n                this.goOut();\r\n                this.shelve.refreshRole(this);\r\n            }\r\n            this.tipsNode.active = false;\r\n        })\r\n    }\r\n    //检测货架是否有当前作物\r\n    checkSheleve() {\r\n        let arr = this.shelve.cropList.filter((value) => {\r\n            return value.cropId == this.needCropId;\r\n        })\r\n        if (arr.length > 0) return true;\r\n        return false;\r\n    }\r\n\r\n    nextStep(isOver) {\r\n        if (isOver) {\r\n            let shelve = this.getSheleve();\r\n            if (shelve) {\r\n                // shelve.roleNum++;\r\n                if (this.shelveIndex == shelve.mIndex) {\r\n                    MKUtils.setNodeDelay(this.node, 0.5, () => {\r\n                        this.selectCrop();\r\n                        this.cropNode.active = true;\r\n                        this.autoBuy();\r\n                    })\r\n                } else {\r\n                    this.shelve.refreshRole(this);\r\n                    this.shelve = shelve;\r\n                    this.changeSheleve(shelve)\r\n                }\r\n\r\n            } else {\r\n                this.goAccount();\r\n            }\r\n        } else {\r\n            //去结算\r\n            this.goAccount();\r\n        }\r\n    }\r\n    shelvesType = [21, 22, 23, 24, 25,]\r\n    getSheleve() {\r\n        let arr = PlayerModel.sheleveList.filter((item) => {\r\n            return item.currentNum > 0 && item.roleNum < 8;\r\n        })\r\n        if (arr.length > 0) {\r\n            let shelve = Utils.getRandomByArr(arr);\r\n            return shelve;\r\n        }\r\n        return null;\r\n    }\r\n    //卖出\r\n    onSell() {\r\n\r\n        let random = MKUtils.randomNMF(0, 100);\r\n\r\n\r\n        this.sellTipsGold.active = false;\r\n        this.sellTipsHb.active = false;\r\n        // if (SDKManager.hasCustomerRedReward()) {\r\n\r\n        //     if (random < 30) {\r\n        //         let gold = MKUtils.randomNM(80, 120);\r\n        //         this.sellBack({ gold: gold })\r\n        //         this.sellTipsGold.active = true;\r\n        //     } else {\r\n        //         this.sellTipsHb.active = true;\r\n        //         EventDispath.addEventListener(EventType.SDK_REWARD_CONFIG, this.rewardCfgBack, this)\r\n        //         SDKManager.getCustomerConfig(this.shelve.mId);\r\n        //     }\r\n        // } else {\r\n            let gold = MKUtils.randomNM(200, 230);\r\n            this.sellBack({ gold: gold })\r\n            this.sellTipsGold.active = true;\r\n        // }\r\n\r\n    }\r\n    rewardCfgBack(data) {\r\n        EventDispath.removeByEvent(EventType.SDK_REWARD_CONFIG, this.rewardCfgBack, this)\r\n        EventDispath.addEventListener(EventType.SDK_REWARD_GOT, this.sellBack, this)\r\n        SDKManager.getRedPackReward(data.configId);\r\n    }\r\n    /**\r\n     * \r\n     * @param data \r\n     *  // {\r\n     //     \"code\":0 //0-成功 其他领取失败 酌情处理\r\n     //     \"msg\": \"领取成功\", //非0情况会给出对应msg 酌情处理\r\n     //     \"amount\":\"1.5\",//当前结账领取金额\r\n     //     \"balance\":\"100.33\",//用户总金额\r\n     //     \"level\":1//用户等级\r\n     // }\r\n     */\r\n    sellBack(data) {\r\n\r\n        let type = this.shelvesType[this.shelve.mIndex]\r\n        let add = ConfigManager.getShelveByType(type, this.shelve.mLv).add_num;\r\n\r\n        EventDispath.removeByEvent(EventType.SDK_REWARD_GOT, this.sellBack, this)\r\n        let xfzs = (0.2 * (1 + add / 100)).toFixed(2);\r\n        let p = this.node.convertToWorldSpaceAR(this.cropNode.getPosition());\r\n        if (data.gold) {\r\n            let gold = Math.floor(data.gold * (1 + add / 100))\r\n\r\n            this.sellTipsMoney.string = \"+\" + gold + \"\";\r\n            this.sellTipsXfzs.string = \"+\" + xfzs + \"\";\r\n            PlayerModel.setGold(gold, 1, p);\r\n        } else {\r\n            this.sellTipsMoney.string = \"+\" + Number(data.redBean).toFixed(2) + \"元\";\r\n\r\n            PlayerModel.setMoney(data.userRedBean, data.redBean, p);\r\n        }\r\n        PlayerModel.setXfzs(Number(xfzs), p);\r\n\r\n        PlayerModel.checkAddOrder(100, 1, () => {\r\n            // UIMananger.showPanel(UIType.orderSuccessView);\r\n            EventDispath.send(EventType.ORDER_COMPLETE_UPDATE)\r\n        })\r\n\r\n        PlayerModel.zdGkNum++;\r\n        EventDispath.send(EventType.HKHB_UPDATE);\r\n\r\n        this.sellNode.active = false;\r\n        this.sellTipsNode.y = 100;\r\n        this.sellTipsNode.active = true;\r\n\r\n        this.cashierPfb.onAutoSell();\r\n\r\n        this.sellTipsNode.runAction(cc.sequence(cc.moveTo(0.5, this.sellTipsNode.x, 200).easing(cc.easeOut(5.0)), cc.delayTime(0.5), cc.callFunc(() => {\r\n            this.sellTipsNode.active = false;\r\n        })))\r\n        MKUtils.setNodeDelay(this.node, 1, () => {\r\n            this.goOut(2);\r\n            // MKUtils.setNodeDelay(this.node, 0.2, () => {\r\n            this.cashierPfb.updateRole();\r\n            // })\r\n            // EventDispath.send(EventType.UPDATE_CAHIER_ROLE)\r\n        })\r\n    }\r\n    changeAction(action) {\r\n        this.role.animation = action;\r\n    }\r\n    interval = 0;\r\n    isMove = false;\r\n    update(dt) {\r\n        let p = this.node.getPosition();\r\n        if (!this.isInit && p.x >= this.outPoint.x - 30) {\r\n            this.clear();\r\n        }\r\n\r\n        // this.interval++;\r\n        // if (this.interval >= 10) {\r\n        //     this.interval = 0;\r\n        //     if (this.isMove) {\r\n        //         let arr = this.node.parent.children;\r\n        //         let len = arr.length;\r\n        //         // SortUtils.quickSort(arr, \"y\", false);\r\n        //         for (let i = 0; i < len; i++) {\r\n        //             if (this.node.uuid == arr[i].uuid) continue;\r\n        //             let dis = MKUtils.twoPointDistance(this.node.position, arr[i].position)\r\n        //             if (dis < 100) {\r\n        //                 console.log(\"===============\");\r\n        //                 if(this.node.y>arr[i].y){\r\n        //                     this.node.zIndex = arr[i].zIndex-1;\r\n        //                 }else{\r\n        //                     this.node.zIndex = arr[i].zIndex+1;\r\n\r\n        //                 }\r\n        //             }\r\n\r\n        //         }\r\n        // }\r\n\r\n        // }\r\n\r\n        this.currentY = this.node.y;\r\n\r\n    }\r\n    autoBuy() {\r\n        if (this.shelve.isAuto) {\r\n            MKUtils.setNodeDelay(this.node, 1, () => {\r\n                this.onBuy();\r\n            })\r\n        }\r\n    }\r\n    clear() {\r\n        this.node.stopAllActions();\r\n        this.isInit = true;\r\n        GamePoolManager.putRole(this.node);\r\n        this.currentTimes = 1;\r\n        this.shelveIndex = -1;\r\n        this.isAccount = false;\r\n        EventDispath.removeEventListeners(this);\r\n    }\r\n\r\n    updateSpeed() {\r\n        this.speed = this.speed_base + this.speed_base * PlayerModel.getSpeedAdd();\r\n    }\r\n    //获取引导坐标\r\n    getGuidePoint() {\r\n        return this.cropNode.convertToWorldSpaceAR(cc.v2(0, 0));\r\n    }\r\n    //  引导购买\r\n    guideBuy() {\r\n        // this.shelve.roleNum--;\r\n        this.shelve.reduceCrop(this.needCropId, this);\r\n        this.cropNode.active = false;\r\n        this.role.animation = ActionType.H_STAND_BUY\r\n        this.role.setCompleteListener((trackEntry, loopCount) => {\r\n            this.role.setCompleteListener(null);\r\n            if (this.shelveIndex == 2 || this.shelveIndex == 3) {\r\n                this.role.animation = ActionType.Q_STAND_FINISH_RIGHT;\r\n            } else {\r\n                this.role.animation = ActionType.H_STAND_FINISH\r\n            }\r\n            MKUtils.setNodeDelay(this.node, 0.5, () => {\r\n                this.addBuyList();\r\n                //去结账\r\n                this.goAccount()\r\n            })\r\n        })\r\n    }\r\n    // create(id) {\r\n    //     console.log(\"1111111=\");\r\n    //     this.node.setPosition(id * 30, 0)\r\n    //     // this.node.setPosition(this.startPoint)\r\n    //     let url = `spine/role/0${id}/role_0${id}`;\r\n    //     if (id > 9) {\r\n    //         url = `spine/role/${id}/role_${id}`\r\n    //     }\r\n    //     // url = `spine/alien-ess`;\r\n    //     url = `spine/skeleton`\r\n    //     MKUtils.loadSkeletonData(url, (res) => {\r\n    //         console.log(\"========spine======\", res);\r\n    //         this.role.skeletonData = res;\r\n    //         // this.role.animation = ActionType.Q_WALK;\r\n    //     }, () => { })\r\n    // }\r\n}\r\n"]}
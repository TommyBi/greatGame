{"version":3,"sources":["assets/src/game/Main.ts"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,8DAAyD;AACzD,0CAAqC;AACrC,kEAA6D;AAC7D,sDAAiD;AACjD,gEAA2D;AAC3D,mDAA8C;AAG9C,yDAAoD;AACpD,8DAAyD;AAEnD,IAAA,KAAwB,EAAE,CAAC,UAAU,EAAnC,OAAO,aAAA,EAAE,QAAQ,cAAkB,CAAC;AAG5C;IAAkC,wBAAY;IAA9C;QAAA,qEA8EC;QA5EG,SAAG,GAAc,IAAI,CAAC;QAEtB,WAAK,GAAc,IAAI,CAAC;QAiDxB,0BAAoB,GAAG,CAAC,CAAC;QACzB,YAAM,GAAG,CAAC,CAAC;;QAsBX,6DAA6D;IAEjE,CAAC;IAzEG,qBAAM,GAAN;QACI,EAAE,CAAC,KAAK,CAAC,mBAAmB,GAAG,KAAK,CAAC;QACrC,EAAE,CAAC,mBAAmB,CAAC,OAAO,GAAG,IAAI,CAAC;QACtC,oBAAU,CAAC,IAAI,EAAE,CAAC;QAClB,qBAAW,CAAC,IAAI,EAAE,CAAC;QACnB,sBAAY,CAAC,SAAS,EAAE,CAAC;QACzB,kBAAQ,CAAC,SAAS,CAAC,KAAK,CAAC,CAAC;QAC1B,IAAI,CAAC,IAAI,EAAE,CAAC;IAChB,CAAC;IAED,mBAAI,GAAJ;QAAA,iBAgCC;QA9BG,oBAAU,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC;QAE1B,kEAAkE;QAElE,IAAI,oBAAU,CAAC,iBAAiB,EAAE,EAAE;YAChC,qBAAW,CAAC,SAAS,GAAG,CAAC,CAAC;YAC1B,qBAAW,CAAC,UAAU,GAAG,CAAC,CAAC;SAC9B;aACI;YACD,qBAAW,CAAC,UAAU,GAAG,CAAC,CAAC;YAC3B,qBAAW,CAAC,SAAS,GAAG,CAAC,CAAC,CAAC;SAC9B;QAED,oBAAU,CAAC,QAAQ,CAAC,gBAAM,CAAC,QAAQ,CAAC,CAAC;QACrC,oBAAU,CAAC,aAAa,EAAE,CAAC;QAC3B,4DAA4D;QAC5D,0DAA0D;QAC1D,iBAAO,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,EAAE,CAAC,EAAE;YAC/B,oBAAU,CAAC,GAAG,GAAG,EAAE,CAAC,WAAW,CAAC,KAAI,CAAC,GAAG,CAAC,CAAC;YAC1C,oBAAU,CAAC,MAAM,EAAE,CAAC;YAEpB,IAAI,qBAAW,CAAC,SAAS,IAAI,CAAC;gBAAE,KAAI,CAAC,SAAS,EAAE,CAAC;;gBAC5C,oBAAU,CAAC,SAAS,CAAC,gBAAM,CAAC,QAAQ,CAAC,CAAC;QAC/C,CAAC,CAAC,CAAA;QAEF,gCAAgC;QAEhC,kBAAkB;QAElB,oCAAoC;IACxC,CAAC;IAGD,oBAAK,GAAL;IAEA,CAAC;IAGD,qBAAM,GAAN,UAAO,EAAE;QACL,IAAI,CAAC,oBAAoB,IAAI,EAAE,CAAC;QAEhC,IAAI,IAAI,CAAC,oBAAoB,IAAI,CAAC,EAAE;YAChC,IAAI,CAAC,oBAAoB,GAAG,CAAC,CAAC;YAC9B,qBAAW,CAAC,mBAAmB,EAAE,CAAC;SACrC;QAED,IAAI,CAAC,MAAM,IAAI,EAAE,CAAC;QAElB,IAAI,IAAI,CAAC,MAAM,IAAI,EAAE,EAAE;YACnB,IAAI,CAAC,MAAM,GAAG,CAAC,CAAC;YAChB,mCAAmC;SACtC;IACL,CAAC;IAGD,wBAAS,GAAT;QACI,oBAAU,CAAC,KAAK,GAAG,EAAE,CAAC,WAAW,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC;QAC9C,oBAAU,CAAC,SAAS,EAAE,CAAC;IAC3B,CAAC;IAzED;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;qCACE;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;uCACI;IAJP,IAAI;QADxB,OAAO;OACa,IAAI,CA8ExB;IAAD,WAAC;CA9ED,AA8EC,CA9EiC,EAAE,CAAC,SAAS,GA8E7C;kBA9EoB,IAAI","file":"","sourceRoot":"/","sourcesContent":["import UIMananger from \"../framework/manager/UIMananger\";\r\nimport UIType from \"./consts/UIType\";\r\nimport MusicManager from \"../framework/manager/MusicManager\";\r\nimport MKUtils from \"../framework/tools/MkUtils\";\r\nimport DataManager from \"../framework/manager/DataManager\";\r\nimport PlayerModel from \"./datas/PlayerModel\";\r\nimport { UIEffectType } from \"../framework/manager/UIEffectManager\";\r\nimport SKDManager from \"../framework/manager/SDKManager\";\r\nimport JSHelper from \"../framework/helper/JSHelper\";\r\nimport SDKManager from \"../framework/manager/SDKManager\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\n\r\n@ccclass\r\nexport default class Main extends cc.Component {\r\n    @property(cc.Prefab)\r\n    top: cc.Prefab = null;\r\n    @property(cc.Prefab)\r\n    guide: cc.Prefab = null;\r\n    onLoad() {\r\n        cc.macro.CLEANUP_IMAGE_CACHE = false;\r\n        cc.dynamicAtlasManager.enabled = true;\r\n        UIMananger.init();\r\n        DataManager.init();\r\n        MusicManager.initMusic();\r\n        JSHelper.playMisuc(\"bgm\");\r\n        this.init();\r\n    }\r\n\r\n    init() {\r\n\r\n        SDKManager.onStartGame(1);\r\n\r\n        // console.log(16/9,\"   长宽比：\",cc.winSize.height/cc.winSize.width);\r\n\r\n        if (SDKManager.hasNewOrderReward()) {\r\n            PlayerModel.guideStep = 0;\r\n            PlayerModel.guideState = 0;\r\n        }\r\n        else {\r\n            PlayerModel.guideState = 1;\r\n            PlayerModel.guideStep = -1;\r\n        }\r\n\r\n        UIMananger.showView(UIType.gameView);\r\n        SDKManager.getUserAmount();\r\n        // NResponer.on(Message.configComplete,Handler.create( ()=>{\r\n        // if (!PlayerModel.guideState) PlayerModel.guideStep = 0;\r\n        MKUtils.setNodeDelay(this.node, 0, () => {\r\n            UIMananger.top = cc.instantiate(this.top);\r\n            UIMananger.setTop();\r\n\r\n            if (PlayerModel.guideStep >= 0) this.showGuide();\r\n            else UIMananger.showPanel(UIType.loginDay);\r\n        })\r\n\r\n        // PlayerModel.initMoney(101.25)\r\n\r\n        // },this ),this);\r\n\r\n        // MusicManager.playMusic('bg.mp3');\r\n    }\r\n\r\n\r\n    start() {\r\n\r\n    }\r\n    offlineTime_interval = 0;\r\n    taskHd = 0;\r\n    update(dt) {\r\n        this.offlineTime_interval += dt;\r\n\r\n        if (this.offlineTime_interval >= 5) {\r\n            this.offlineTime_interval = 0;\r\n            PlayerModel.setOfflineTimestamp();\r\n        }\r\n\r\n        this.taskHd += dt;\r\n\r\n        if (this.taskHd >= 10) {\r\n            this.taskHd = 0;\r\n            // SDKManager.getTaskRewardCount();\r\n        }\r\n    }\r\n\r\n\r\n    showGuide() {\r\n        UIMananger.guide = cc.instantiate(this.guide);\r\n        UIMananger.showGuide();\r\n    }\r\n    // https://forum.cocos.org/t/cocos-creator-50/94999      //首屏\r\n\r\n}\r\n"]}
{"version":3,"sources":["assets/src/game/view/lvUp/LvUpView.ts"],"names":[],"mappings":"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","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport BasePanel from \"../../../framework/ui/BasePanel\";\r\nimport { levelUp_config, propType } from \"../../consts/CConst\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\nimport ConfigManager from \"../../manager/ConfigManager\";\r\nimport AVirtualScrollView from \"../task/AVirtualScrollView\";\r\n\r\nconst { ccclass, property } = cc._decorator;\r\nexport interface Lvup_Type {\r\n    tabIndex,\r\n    index,\r\n    level,\r\n    id,\r\n    name,\r\n    addDesc,\r\n    type,\r\n    isMaxLv\r\n}\r\n/**\r\n * 升级界面\r\n * TODO:\r\n * initPropHasList这个方法可以移至更早的登录初始化环节\r\n */\r\n@ccclass\r\nexport default class LvUpView extends BasePanel {\r\n\r\n    @property(cc.Node)\r\n    btn_close: cc.Node = null;\r\n    @property(cc.ToggleContainer)\r\n    tabBtn: cc.ToggleContainer = null;\r\n\r\n    @property(AVirtualScrollView)\r\n    scroller: AVirtualScrollView = null;\r\n\r\n    @property(cc.Node)\r\n    toggleLb1_1: cc.Node = null;\r\n    @property(cc.Node)\r\n    toggleLb1_2: cc.Node = null;\r\n    @property(cc.Node)\r\n    toggleLb2_1: cc.Node = null;\r\n    @property(cc.Node)\r\n    toggleLb2_2: cc.Node = null;\r\n    @property(cc.Node)\r\n    toggleLb3_1: cc.Node = null;\r\n    @property(cc.Node)\r\n    toggleLb3_2: cc.Node = null;\r\n\r\n    fieldList: any[] = [];\r\n    shelveList: any[] = [];\r\n    propList: any[] = [];\r\n\r\n    mTab = \"1\";\r\n    onEnable(): void {\r\n        // 退出\r\n        EventDispath.on(this.btn_close, this.onBtnCloseHandle, this);\r\n\r\n        // 使用成功\r\n        EventDispath.addEventListener(EventType.LVUP_UPDATE, this.onUpdate, this);\r\n\r\n        this.tabBtn.toggleItems[Number(this.mTab)-1].isChecked =true\r\n        this.onUpdate();\r\n        this.changeTab();\r\n        this.changeData();\r\n    }\r\n    onTab(toggle: cc.Toggle) {\r\n        if (toggle.checkEvents.length > 0) {\r\n            let item = toggle.checkEvents[0];\r\n            this.mTab = item.customEventData;\r\n\r\n        }\r\n        this.changeTab();\r\n        this.changeData();\r\n\r\n    }\r\n    changeTab() {\r\n        if (this.mTab == \"1\") {\r\n            this.toggleLb1_1.active = true;\r\n            this.toggleLb1_2.active = false;\r\n\r\n            this.toggleLb2_1.active = false;\r\n            this.toggleLb2_2.active = true;\r\n\r\n            this.toggleLb3_1.active = false;\r\n            this.toggleLb3_2.active = true\r\n        } else if (this.mTab == \"2\") {\r\n\r\n            this.toggleLb1_1.active = false;\r\n            this.toggleLb1_2.active = true;\r\n\r\n            this.toggleLb2_1.active = true;\r\n            this.toggleLb2_2.active = false;\r\n\r\n            this.toggleLb3_1.active = false;\r\n            this.toggleLb3_2.active = true;\r\n        } else if (this.mTab == \"3\") {\r\n            this.toggleLb1_1.active = false;\r\n            this.toggleLb1_2.active = true;\r\n\r\n            this.toggleLb3_1.active = true;\r\n            this.toggleLb3_2.active = false;\r\n\r\n            this.toggleLb2_1.active = false;\r\n            this.toggleLb2_2.active = true;\r\n        }\r\n    }\r\n    changeData() {\r\n        this.scroller.clearItem();\r\n        if (this.mTab == \"1\") {\r\n            if (this.fieldList.length == 0) this.updateList();\r\n            this.scroller.refreshData(this.fieldList);\r\n        } else if (this.mTab == \"2\") {\r\n            if (this.shelveList.length == 0) this.getShleveData()\r\n            this.scroller.refreshData(this.shelveList);\r\n        } else if (this.mTab == \"3\") {\r\n            if (this.propList.length == 0) this.getPropData()\r\n            this.scroller.refreshData(this.propList);\r\n        }\r\n        this.scroller.scrollToTop();\r\n    }\r\n    startShow() {\r\n        this.fieldList = [];\r\n        this.shelveList = [];\r\n        this.propList = [];\r\n        this.mTab = this.inData[0];\r\n    }\r\n\r\n    onUpdate() {\r\n        // this.tabBtn.sec\r\n        if (this.mTab == \"1\") {\r\n            this.updateList();\r\n        } else if (this.mTab == \"2\") {\r\n            this.getShleveData();\r\n        } else {\r\n            this.getPropData();\r\n        }\r\n        this.changeData();\r\n    }\r\n    getShleveData() {\r\n        this.shelveList = [];\r\n        let list2 = PlayerModel.getUIConfig().shelvesList;\r\n        for (let i = 0; i < list2.length; i++) {\r\n            let level = list2[i];\r\n            let type = 2 + `${i + 1}`;\r\n            let baseCfg = ConfigManager.getShelveByType(type, level);\r\n            if (level == 0) baseCfg = ConfigManager.getShelveByType(type, 1);\r\n            let maxLv = ConfigManager.getShelveMaxLv(type);\r\n            let isMaxLv = level == maxLv;\r\n            let cfg: Lvup_Type = { tabIndex: 2, index: i, level: level, id: i + 1, type: type, name: baseCfg.name, addDesc: baseCfg.add_desc, isMaxLv: isMaxLv }\r\n            this.shelveList.push(cfg);\r\n        }\r\n    }\r\n    getPropData() {\r\n\r\n        this.propList = [];\r\n        let uicfg = PlayerModel.getUIConfig();\r\n        let cashierCfg = ConfigManager.getPropById(propType.cashier, uicfg.cashierlv);\r\n        let maxLv = ConfigManager.getPropMaxLv(propType.cashier);\r\n        let isMaxLv = uicfg.cashierlv == maxLv;\r\n        this.propList.push({ tabIndex: 3, index: 0, level: uicfg.cashierlv, id: uicfg.cashierlv, type: propType.cashier, name: cashierCfg.name, addDesc: cashierCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let pipeCfg = ConfigManager.getPropById(propType.pipe, uicfg.pipelv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.pipe);\r\n        isMaxLv = uicfg.pipelv == maxLv;\r\n        this.propList.push({ tabIndex: 4, index: 1, level: uicfg.pipelv, id: uicfg.pipelv, type: propType.pipe, name: pipeCfg.name, addDesc: pipeCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let wallCfg = ConfigManager.getPropById(propType.wall, uicfg.walllv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.wall);\r\n        isMaxLv = uicfg.walllv == maxLv;\r\n        this.propList.push({ tabIndex: 5, index: 2, level: uicfg.walllv, id: uicfg.walllv, type: propType.wall, name: wallCfg.name, addDesc: wallCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let roadCfg = ConfigManager.getPropById(propType.road, uicfg.roadlv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.road);\r\n        isMaxLv = uicfg.roadlv == maxLv;\r\n        this.propList.push({ tabIndex: 6, index: 3, level: uicfg.roadlv, id: uicfg.roadlv, type: propType.road, name: roadCfg.name, addDesc: roadCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let scarecrowCfg = ConfigManager.getPropById(propType.scarecrow, uicfg.scarecrowlv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.scarecrow);\r\n        isMaxLv = uicfg.scarecrowlv == maxLv;\r\n        this.propList.push({ tabIndex: 7, index: 4, level: uicfg.scarecrowlv, id: uicfg.scarecrowlv, type: propType.scarecrow, name: scarecrowCfg.name, addDesc: scarecrowCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let warehouseCfg = ConfigManager.getPropById(propType.warehouse, uicfg.warehouselv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.warehouse);\r\n        isMaxLv = uicfg.warehouselv == maxLv;\r\n        this.propList.push({ tabIndex: 8, index: 5, level: uicfg.warehouselv, id: uicfg.warehouselv, type: propType.warehouse, name: warehouseCfg.name, addDesc: warehouseCfg.add_desc, isMaxLv: isMaxLv })\r\n\r\n        let fenceCfg = ConfigManager.getPropById(propType.fence, uicfg.fencelv);\r\n        maxLv = ConfigManager.getPropMaxLv(propType.fence);\r\n        isMaxLv = uicfg.fencelv == maxLv;\r\n        this.propList.push({ tabIndex: 9, index: 6, level: uicfg.fencelv, id: uicfg.fencelv, type: propType.fence, name: fenceCfg.name, addDesc: fenceCfg.add_desc, isMaxLv: isMaxLv })\r\n    }\r\n    /** 重新加载列表中的显示条目 */\r\n    private updateList(): void {\r\n        this.fieldList = [];\r\n        let list1 = PlayerModel.getFieldListCfg();\r\n        for (let i = 0; i < list1.length; i++) {\r\n            let data = list1[i];\r\n            let baseCfg = ConfigManager.getFieldCfgByType(data.type, data.level);\r\n            if (data.level == 0) baseCfg = ConfigManager.getFieldCfgByType(data.type, 1);\r\n            let maxLv = ConfigManager.getFieldMaxLv(data.type);\r\n            let isMaxLv = data.level == maxLv;\r\n            let cfg: Lvup_Type = { tabIndex: 1, index: i, level: data.level, id: data.id, type: data.type, name: baseCfg.name, addDesc: baseCfg.add_desc, isMaxLv: isMaxLv }\r\n            this.fieldList.push(cfg);\r\n        }\r\n\r\n    }\r\n\r\n    protected update(dt: number): void {\r\n        // let offset = this.uScrollView.getScrollOffset();\r\n        // let height = this.uScrollView.content.height;\r\n        // for (let i = 0; i < this.uScrollView.content.children.length; i++) {\r\n        //     let node = this.uScrollView.content.children[i];\r\n        //     if (node.y <= height - offset.y + 200 && node.y >= height - offset.y - 1280 - 200) {\r\n        //         node.opacity = 255;\r\n        //     } else {\r\n        //         node.opacity = 0;\r\n        //     }\r\n        // }\r\n    }\r\n\r\n    /** 仅用于关闭操作 */\r\n    onBtnCloseHandle() {\r\n        // this.uScrollView.content.removeAllChildren(true);\r\n        super.close();\r\n    }\r\n    guideItem: cc.Node;\r\n    getGuidePoint() {\r\n        // let p = this.guideItem.getComponent(LvUpItem1).getGuidePoint();\r\n        // return p;\r\n    }\r\n}\r\n"]}
{"version":3,"sources":["assets/src/game/view/main/ScarecrowPrefab.ts"],"names":[],"mappings":";;;;;AAAA,oBAAoB;AACpB,wEAAwE;AACxE,mBAAmB;AACnB,kFAAkF;AAClF,8BAA8B;AAC9B,kFAAkF;;;;;;;;;;;;;;;;;;;;;AAElF,wEAAmE;AACnE,kEAAiE;AACjE,4DAAuD;AACvD,uDAAkD;AAE5C,IAAA,KAAsB,EAAE,CAAC,UAAU,EAAlC,OAAO,aAAA,EAAE,QAAQ,cAAiB,CAAC;AAG1C;IAA6C,mCAAY;IAAzD;QAAA,qEA4BC;QAzBG,SAAG,GAAc,IAAI,CAAC;QAEtB,aAAO,GAAgB,IAAI,CAAC;;IAuBhC,CAAC;IAtBG,eAAe;IAEf,+BAAK,GAAL;QACI,IAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,KAAK,CAAC;QACjC,sBAAY,CAAC,gBAAgB,CAAC,qBAAS,CAAC,gBAAgB,EAAE,IAAI,CAAC,UAAU,EAAE,IAAI,CAAC,CAAC;IACrF,CAAC;IAED,iCAAO,GAAP,UAAQ,EAAM;QAAN,mBAAA,EAAA,MAAM;QACX,IAAI,CAAC,UAAU,CAAC,CAAC,CAAC,CAAA;IACrB,CAAC;IACD,oCAAU,GAAV,UAAW,MAAU;QAArB,iBAWC;QAXU,uBAAA,EAAA,UAAU;QAEjB,IAAI,EAAE,GAAG,qBAAW,CAAC,WAAW,EAAE,CAAC,WAAW,CAAC;QAC/C,IAAI,EAAE,IAAI,CAAC;YAAE,OAAO;QACpB,iBAAO,CAAC,eAAe,CAAC,yBAAyB,IAAG,MAAI,EAAI,CAAA,EAAE,UAAC,GAAG;YAC9D,KAAI,CAAC,GAAG,CAAC,WAAW,GAAG,GAAG,CAAC;YAC3B,IAAI,MAAM,EAAE;gBACR,KAAI,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,GAAG,IAAI,CAAC;gBAChC,KAAI,CAAC,OAAO,CAAC,SAAS,GAAG,WAAW,CAAC;aACxC;QACL,CAAC,CAAC,CAAC;IACP,CAAC;IAxBD;QADC,QAAQ,CAAC,EAAE,CAAC,MAAM,CAAC;gDACE;IAEtB;QADC,QAAQ,CAAC,EAAE,CAAC,QAAQ,CAAC;oDACM;IALX,eAAe;QADnC,OAAO;OACa,eAAe,CA4BnC;IAAD,sBAAC;CA5BD,AA4BC,CA5B4C,EAAE,CAAC,SAAS,GA4BxD;kBA5BoB,eAAe","file":"","sourceRoot":"/","sourcesContent":["// Learn TypeScript:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/typescript.html\r\n// Learn Attribute:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/reference/attributes.html\r\n// Learn life-cycle callbacks:\r\n//  - https://docs.cocos.com/creator/manual/en/scripting/life-cycle-callbacks.html\r\n\r\nimport EventDispath from \"../../../framework/message/EventDispath\";\r\nimport { EventType } from \"../../../framework/message/EventType\";\r\nimport MKUtils from \"../../../framework/tools/MkUtils\";\r\nimport PlayerModel from \"../../datas/PlayerModel\";\r\n\r\nconst {ccclass, property} = cc._decorator;\r\n\r\n@ccclass\r\nexport default class ScarecrowPrefab extends cc.Component {\r\n\r\n    @property(cc.Sprite)\r\n    img: cc.Sprite = null;\r\n    @property(sp.Skeleton)\r\n    lvUpEff: sp.Skeleton = null;\r\n    // onLoad () {}\r\n\r\n    start() {\r\n        this.lvUpEff.node.active = false;\r\n        EventDispath.addEventListener(EventType.CHANGE_SCARECROW, this.changeSkin, this);\r\n    }\r\n\r\n    setData(id = 1) {\r\n       this.changeSkin(0)\r\n    }\r\n    changeSkin(isLvUp = 1) {\r\n\r\n        let id = PlayerModel.getUIConfig().scarecrowlv;\r\n        if (id == 0) return;\r\n        MKUtils.loadSpriteFrame(\"texture/prop/scarecrow/\" + `0${id}`, (res) => {\r\n            this.img.spriteFrame = res;\r\n            if (isLvUp) {\r\n                this.lvUpEff.node.active = true;\r\n                this.lvUpEff.animation = \"animation\";\r\n            }\r\n        });\r\n    }\r\n}\r\n"]}